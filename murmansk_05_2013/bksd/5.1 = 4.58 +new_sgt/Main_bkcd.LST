C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN_BKCD
OBJECT MODULE PLACED IN Main_bkcd.OBJ
COMPILER INVOKED BY: d:\Keil4\C51\BIN\C51.EXE Main_bkcd.c LARGE OPTIMIZE(0,SPEED) BROWSE NOAREGS DEBUG OBJECTEXTEND CODE
                    - LISTINCLUDE SYMBOLS TABS(2)

line level    source

   1          /*
   2          Copyright 1995-1996 Keil Software, Inc.  4-задания. task_3 измерение 4 периодов
   3          порт2(0.1.2.3.) 
   4          БАЗОВЫЙ КОНТРОЛЛЕР ИЗМЕРИТЕЛЬНОГО МОДУЛЯ (BKCD-ADuc848)  2005г.
   5          ------------------------------------------------------------------------------*/
   6          
   7          #include "r_main.h" 
   1      =1  
   2      =1  /*--------------------------------------------------------------------------
   3      =1  
   4      =1  Header file for program.
   5      =1  Copyright (c) 2005 Novosibirsk Morozov A.V.****
   6      =1  All rights reserved.
   7      =1  --------------------------------------------------------------------------*/
   8      =1  #define LBUF_SIZE    28
   9      =1  #define BUFOUT_SIZE  34
  10      =1  #define XBUFIN_SIZE  34
  11      =1  #define BUFOUT_LINE_SIZE  34
  12      =1  /*
  13      =1  #define LBUF_SIZE    32
  14      =1  #define BUFOUT_SIZE  32
  15      =1  #define XBUFIN_SIZE  32
  16      =1  #define BUFOUT_LINE_SIZE  32*/
  17      =1  //#define LTKH  11 //размер буфера int BX[]
  18      =1  //#define ATKH  0 //начальный адрес таблицы преобразования
  19      =1  /*--------------------------------------------------------------------
  20      =1  конфигурация констант выбора кристалов(cs)по интерфейсу SPI(порт-P2)
  21      =1  память FLASH D9(P2.6);
  22      =1  ---------------------------------------------------------------------*/
  23      =1  #define MOD_FL1  //микросхемы D9
  24      =1  #define TASK2_2 1     //порядок выполнения задач(0,1,2,2,0..)
  25      =1  #define ADC_MULT 1     //модуль 
  26      =1  
  27      =1  //#define INT_60  //интервал прерывания таймер1 - 60мкс.
  28      =1  //#define INT_501  //интервал прерывания таймер1 - 501 мкс.
  29      =1  #define INT_250 //интервал прерывания таймер1 - 250 мкс.
  30      =1  #ifdef  INT_60 
           =1 #define R_INT_TMR1_L -240 //-17 
           =1 #define R_INT_TMR1_H -3
           =1 #endif
  34      =1  #ifdef  INT_501 
           =1 #define R_INT_TMR1_L -0x17//-0x40 //-17 
           =1 #define R_INT_TMR1_H -0x19
           =1 #define I_TMR1 1
           =1 #endif
  39      =1  #ifdef  INT_250  
  40      =1  #define R_INT_TMR1_L -46//-44//-46    превышение интервала 250
  41      =1  #define R_INT_TMR1_H -13  //по 250 мкс
  42      =1  #define I_TMR1 2
  43      =1  #endif
  44      =1  #ifdef  MOD_FL1 // FLASH D9(P2.6);
  45      =1  #define Cfl_L  0x0BF
  46      =1  #define Cfl_R  0x40
  47      =1  #endif
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 2   

  48      =1  
  49      =1  //конфигурация интервала прерывания  таймера1 250мkс.
  50      =1  
  51      =1  //#define W_INT_TMR1_L -24 
  52      =1  //#define W_INT_TMR1_H -2
  53      =1  #define R_INT_TMR1 250 
  54      =1  #define W_INT_TMR1 280
  55      =1  //конфигурация скорости передачи в линию (38400;19200;9600)
  56      =1  //EEPROM ADR=0;PAGE=1  "FFh-38400;09h-9600;01h-19200" 
  57      =1  #define C_UART_EPR 0 
  58      =1  #define C_UART 1
  59      =1  //#define C_UART_19200 0x01 
  60      =1  //#define C_UART_9600  0x09
  61      =1  #ifdef  C_UART 
  62      =1  #define C_UART_D 0xFF  
  63      =1  #endif
  64      =1  /*-------------------------------------------------------------------------
  65      =1                   разбор линейных адресов контроллеров 
  66      =1   Таблица описания линейных адресов модуля размещена в области EEPROM модуля
  67      =1   в странице1(Epg1) c адреса Eadr=18h.
  68      =1  
  69      =1   В таблице описания линейных адресов модуля присутствует описания двух
  70      =1   адресов (LADR1,LADR2 )и маски для каждого (MSK_LADR1,MSK_LADR2).
  71      =1   Если LADR1= LADR_PAK & MSK_LADR1 либо LADR2= LADR_PAK & MSK_LADR2
  72      =1   (LADR_PAK - адрес в принятом пакете модулем)адресуемый пакет обрабатывается
  73      =1   модулем.
  74      =1   В данном случаи в возвращаемом пакете модуля устанавливается адрес возврата
  75      =1   ADR1_VR (ADR2_VR)из таблицы описания линейных адресов модуля.
  76      =1   Пакет выдается в линию по истечению заданного интервала времени(мсек) 
  77      =1   (T_LADR1,T_LADR2 )
  78      =1    
  79      =1   LADR1 - линейный адрес 1 (18h) ADR1_VR - возвращаемый адрес 1 (19h)
  80      =1   LADR2 - линейный адрес 2 (1Ah) ADR2_VR - возвращаемый адрес 2 (1Bh)
  81      =1   MSK_LADR1 - маска линейного адреса 1 (1Ch)
  82      =1   T_LADR1   _ заданный интервал времени на передачу пакета по адресу 1 (1Dh)
  83      =1   MSK_LADR2 - маска линейного адреса 2 (1Eh)
  84      =1   T_LADR2   _ заданный интервал времени на передачу пакета по адресу 2 (1Fh)
  85      =1   LADR_PAK - линейный адрес в приемном пакете.
  86      =1   NEW_CMD - (NEW_CMD1,NEW_REG1,NEW_LDATA) - параметры для LADR2 команда,регистр,
  87      =1   длина данных (0Ch,0Dh,0Eh)
  88      =1  -------------------------------------------------------------------------*/  
  89      =1  /*---определение номера страниц EEPROM*/
  90      =1  #define  Epg1 0
  91      =1  #define  Epg2 0x40
  92      =1  #define  Epg3 0x80
  93      =1  #define  Epg4 0xC0
  94      =1  
  95      =1  /*-----------------------------------------------------
  96      =1  определение параметров таблицы описания линейных адресов
  97      =1   модулей в области EEPROM страница1 (Epg1)
  98      =1  Имя параметра и его значение (адрес в формате HEX)
  99      =1  -------------------------------------------------------*/
 100      =1  #define  LADR1      0x118
 101      =1  #define  LADR2      0x11A
 102      =1  #define  ADR1_VR    0x119 
 103      =1  #define  ADR2_VR    0x11B
 104      =1  #define  MSK_LADR1  0x11C
 105      =1  #define  T_LADR1    0x11D  
 106      =1  #define  MSK_LADR2  0x11E 
 107      =1  #define  T_LADR2    0x11F
 108      =1  #define  NEW_CMD    0x10C //структура (NEW_CMD1,NEW_REG1,NEW_LDATA )
 109      =1  
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 3   

 110      =1  //#define  TMP_OUT    0x6C //темр вывода EEPROM стр1 адр 6C -3байт
 111      =1  #define  TMP_FLASH  0x164  //0x230 //Epg2
 112      =1  //структура 4байта CNT_IDF,CNT_IZM,CNT_IDF1,CNT_IZM1(30h-33h) 
 113      =1  //#define  MSK_PAR    0x34//MSK_ERR ;MSK_PW1 ;
 114      =1  #define  START_ADC  0x140 //старт цепочки измерения ADC
 115      =1  #define  FILT_RELE  0x150 //фильтр включения реле               
 116      =1  #define  ADR_FLASH  0x160 //текущий адрес FLASH (3bite 1страница)
 117      =1  #define  ADR_Vz     0xE4
 118      =1  /* ---------------------------------------------------------------------
 119      =1  
 120      =1  C_SIN_REPR-константа  в мкс подсинхронизации чтения из EEPROM
 121      =1  ----------------------------------------------------------------------*/
 122      =1  #define C_SIN_REPR 0x0FE //0X0B  //0x78 //0x78 //126mkc
 123      =1  /*
 124      =1  Макрос  Epr_Rd(Epg,Eadr) прочитать из EEPROM 4байта 
 125      =1  по заданной странице pg из диапозона (Epg=1/2/3/4)и адресам Eadr  из диапозона
 126      =1  (adr=00h - FFh) c помещением результатов в регистры SFR EDATA1,EDATA2,
 127      =1   EDATA3,EDATA4;Epg - константы по определению выше (Epg1,Epg2 ...)
 128      =1  ------------------------------------------------------------------*/
 129      =1  
 130      =1  
 131      =1  #define FUM_Epr_Wr(Eadr,E1,E2,E3,E4) { EADRH=(Eadr>>8)&0x03; EADRL=Eadr;ECON=0x01;  \
 132      =1          EDATA1=E1;EDATA2=E2;EDATA3=E3;EDATA4=E4;  \
 133      =1      EA=0;ECON=0x05;ECON=0x02;EADRH=0;EA=1;\  
 134      =1      }
 135      =1  
 136      =1  #define FUM_Epr_Wrout(Eadr,E1,E2,E3,E4) { EADRH=(Eadr>>8)&0x03; EADRL=Eadr;ECON=0x01; \
 137      =1          EDATA1=E1;EDATA2=E2;EDATA3=E3;EDATA4=E4;  \
 138      =1      ECON=0x02;EADRH=0;\  
 139      =1        }
 140      =1  
 141      =1  #define FUM_Epr_Rd(Eadr) {  EADRH=(Eadr>>8)&0x03; \
 142      =1      EADRL=Eadr;ECON=0x01;EADRH=0;\
 143      =1          }
 144      =1  /*-----------------------------------------------------------------------*/
 145      =1  
 146      =1   /*------------------------------------------------------------------
 147      =1  Макрос  FUM_MEMO_Rd(ADR_M) прочитать из xdata 2байта
 148      =1  из буфера BUF_CMD[256] адрес 0300Н 
 149      =1   -ЭТО СТРАНИЦА  ГДЕ РАСПОЛОЖЕНА ПАМЯТЬ ПРОГРАММ АВТОМАТА 
 150      =1  while (TH1>C_SIN_REPR);
 151      =1  ------------------------------------------------------------------*/
 152      =1  //--------------------------------------------------------------------------
 153      =1  
   8          #include "main.h" 
   1      =1  
   2      =1  
   3      =1  #include "TAB_NO_LINE_1.h"
   1      =2  code unsigned int  TAB_NO_LINE_25[17] =
   2      =2  { 
   3      =2    0,
   4      =2    2752,
   5      =2    5668,
   6      =2    8763,
   7      =2    11946,
   8      =2    15121,
   9      =2    18361,
  10      =2    21632,
  11      =2    24896,
  12      =2    28251,
  13      =2    31579,
  14      =2    34952,
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 4   

  15      =2    38397,
  16      =2    41827,
  17      =2    45349,
  18      =2    48889,
  19      =2    52428
  20      =2  } ;
  21      =2  
  22      =2   // таблица укп для каната 25
  23      =2   /*
  24      =2      84,  0,   89, 42, 94, 69, 97, 84, 97, 92, 99, 100,  100, 103, 100,  104
  25      =2      102, 103, 102,99, 103,94, 105,86, 105,74, 107, 60,  108, 42,  108,  21
  26      =2   */
  27      =2  
  28      =2  code unsigned int  TAB_NO_LINE_36[32] =
  29      =2  {
  30      =2    0,
  31      =2    3277,
  32      =2    6554,
  33      =2    9830,
  34      =2    13107,
  35      =2    16384,
  36      =2    19661,
  37      =2    22937,
  38      =2    26214,
  39      =2    29491,
  40      =2    32768,
  41      =2    36044,
  42      =2    39321,
  43      =2    42598,
  44      =2    45875,
  45      =2    49151,
  46      =2    52428
  47      =2  } ;
   4      =1  #include "TAB_NO_LINE_2.h"
   1      =2  code unsigned int  TAB_NO_LINE_28[17] =
   2      =2  { 
   3      =2    0,  
   4      =2    2752,
   5      =2    5701,
   6      =2    8829 ,
   7      =2    11979,
   8      =2    15153 ,
   9      =2    18459,
  10      =2    21796,
  11      =2    25059,
  12      =2    28251,
  13      =2    31579,
  14      =2    34952,
  15      =2    38397,
  16      =2    41827,
  17      =2    45349,
  18      =2    48889,
  19      =2    52428
  20      =2  };
  21      =2  
  22      =2  
  23      =2  
  24      =2  
  25      =2    // таблица из укп
  26      =2  /*  code unsigned int  TAB_NO_LINE_28[32] =
  27      =2  {   84,  0,  90,  42,   96, 69,  98, 84,   98, 92, 102,  100,  105, 103, 105,  104,
  28      =2      102, 103, 102,99, 103,94, 105,86, 105,74, 107, 60,  108, 42,  108,  21};
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 5   

  29      =2    */
   5      =1  #include "TAB_NO_LINE_3.h"
   1      =2  
   2      =2   // таблица из укп адаптированная под датчик 4-20мА то есть 65535-13107=52428    52428/4096=12,8 - масштаб
             -ированная
   3      =2  code unsigned int  TAB_NO_LINE_32[17] =
   4      =2  {
   5      =2    0,
   6      =2    1114,
   7      =2    3473,
   8      =2    6574,
   9      =2    9856,
  10      =2    13133,
  11      =2    16409,
  12      =2    19686,
  13      =2    22963,
  14      =2    26240,
  15      =2    29549,
  16      =2    33088,
  17      =2    36809,
  18      =2    40568,
  19      =2    44462,
  20      =2    48451,
  21      =2    52428
  22      =2  };
  23      =2  
  24      =2  // таблица из укп
  25      =2  /*
  26      =2  code unsigned int  TAB_NO_LINE_32[32] =
  27      =2  {
  28      =2       34,  0,  
  29      =2     72, 170,  
  30      =2     94,  240, 
  31      =2     100, 255,
  32      =2     100,   255,
  33      =2     100, 255, 
  34      =2     100, 255, 
  35      =2     100,  255,
  36      =2      100, 255, 
  37      =2    101,255, 
  38      =2    109,  255, 
  39      =2    112, 228,
  40      =2    115,  198,
  41      =2    119, 160, 
  42      =2    122, 112, 
  43      =2    121,  55};
  44      =2    */
  45      =2  
  46      =2  // таблица морозова
  47      =2  /*
  48      =2  code unsigned int  TAB_NO_LINE_3[32] =
  49      =2  {409,100,409,100,409,100,409,100,409,100,409,100,409,100,409,100,
  50      =2   409,100,409,100,409,100,409,100,409,100,409,100,409,100,409,100} ;
  51      =2  
  52      =2   */
   6      =1  xdata unsigned char b_err_cl=0;
   7      =1  
   8      =1  xdata unsigned char  bufout[BUFOUT_SIZE] _at_ 0x0040; // вторые 64
   9      =1  xdata unsigned char  lbuf [LBUF_SIZE] _at_ 0x0000;     // первые 64
  10      =1  xdata unsigned char  lbuf_dn [LBUF_SIZE] _at_ 0x00C0;
  11      =1  xdata unsigned char zbuf[XBUFIN_SIZE];// _at_ 0x0040;
  12      =1  xdata unsigned char  xbufin[XBUFIN_SIZE] _at_ 0x0080;  // третьи строчка 64
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 6   

  13      =1  
  14      =1  xdata unsigned long  BUF_MN[7] _at_ 0x00DC;
  15      =1  xdata unsigned long  BUF_vr[7] ;
  16      =1  xdata unsigned char  BUF_PIT[7] _at_ 0x00f8;
  17      =1  
  18      =1  idata unsigned char TM_LINE=0;
  19      =1  data unsigned char lineadd=0,status=0;
  20      =1  idata unsigned char  lineadd_dop=0;
  21      =1  
  22      =1  data unsigned char nr=0; //,nrw, ntw,nt,nww;
  23      =1  data  unsigned int  bufcht1[2] = {0,0};
  24      =1  data unsigned int  copy_p=0x00FF, copy_p1=0; 
  25      =1  idata unsigned int cnt_dol=0;
  26      =1  idata unsigned long rasx1_t=0, rasx2_t=0,rasx1=0,rasx2=0;//,delt_r2=0,delt_r1=0;
  27      =1  bit fl_m1=0,fl_m2=0,fl_ds;//fl_i2=0,fl_i1=0,
  28      =1  data unsigned int cop_imp1=0,cop_imp2=0;
  29      =1  
  30      =1  xdata unsigned int OGR_UR=0;
  31      =1  xdata unsigned char DL=0; 
  32      =1  data unsigned char cmd=0; 
  33      =1   
  34      =1  bit FL_BLOK_EEPR=0;
  35      =1  
  36      =1  data unsigned char  priem=0;//lineadd_o=0
  37      =1  xdata unsigned int mi1=0;
  38      =1  data unsigned int mi=0;
  39      =1  
  40      =1  idata unsigned int CNT_SEC_V2=0, CNT_SEC_V1=0,CNT_SEC=0;
  41      =1  idata unsigned long CNT_SEC_DL=0;
  42      =1   
  43      =1  code unsigned short kanal[7] = {
  44      =1      0x05, 0x09, 0x0D, 0x11, 0x15, 0x17, 0xff };
  45      =1  
  46      =1  code unsigned short Crc16Table[256] = {
  47      =1      0x0000, 0xC0C1, 0xC181, 0x0140, 0xC301, 0x03C0, 0x0280, 0xC241,
  48      =1      0xC601, 0x06C0, 0x0780, 0xC741, 0x0500, 0xC5C1, 0xC481, 0x0440,
  49      =1      0xCC01, 0x0CC0, 0x0D80, 0xCD41, 0x0F00, 0xCFC1, 0xCE81, 0x0E40,
  50      =1      0x0A00, 0xCAC1, 0xCB81, 0x0B40, 0xC901, 0x09C0, 0x0880, 0xC841,
  51      =1      0xD801, 0x18C0, 0x1980, 0xD941, 0x1B00, 0xDBC1, 0xDA81, 0x1A40,
  52      =1      0x1E00, 0xDEC1, 0xDF81, 0x1F40, 0xDD01, 0x1DC0, 0x1C80, 0xDC41,
  53      =1      0x1400, 0xD4C1, 0xD581, 0x1540, 0xD701, 0x17C0, 0x1680, 0xD641,
  54      =1      0xD201, 0x12C0, 0x1380, 0xD341, 0x1100, 0xD1C1, 0xD081, 0x1040,
  55      =1      0xF001, 0x30C0, 0x3180, 0xF141, 0x3300, 0xF3C1, 0xF281, 0x3240,
  56      =1      0x3600, 0xF6C1, 0xF781, 0x3740, 0xF501, 0x35C0, 0x3480, 0xF441,
  57      =1      0x3C00, 0xFCC1, 0xFD81, 0x3D40, 0xFF01, 0x3FC0, 0x3E80, 0xFE41,
  58      =1      0xFA01, 0x3AC0, 0x3B80, 0xFB41, 0x3900, 0xF9C1, 0xF881, 0x3840,
  59      =1      0x2800, 0xE8C1, 0xE981, 0x2940, 0xEB01, 0x2BC0, 0x2A80, 0xEA41,
  60      =1      0xEE01, 0x2EC0, 0x2F80, 0xEF41, 0x2D00, 0xEDC1, 0xEC81, 0x2C40,
  61      =1      0xE401, 0x24C0, 0x2580, 0xE541, 0x2700, 0xE7C1, 0xE681, 0x2640,
  62      =1      0x2200, 0xE2C1, 0xE381, 0x2340, 0xE101, 0x21C0, 0x2080, 0xE041,
  63      =1      0xA001, 0x60C0, 0x6180, 0xA141, 0x6300, 0xA3C1, 0xA281, 0x6240,
  64      =1      0x6600, 0xA6C1, 0xA781, 0x6740, 0xA501, 0x65C0, 0x6480, 0xA441,
  65      =1      0x6C00, 0xACC1, 0xAD81, 0x6D40, 0xAF01, 0x6FC0, 0x6E80, 0xAE41,
  66      =1      0xAA01, 0x6AC0, 0x6B80, 0xAB41, 0x6900, 0xA9C1, 0xA881, 0x6840,
  67      =1      0x7800, 0xB8C1, 0xB981, 0x7940, 0xBB01, 0x7BC0, 0x7A80, 0xBA41,
  68      =1      0xBE01, 0x7EC0, 0x7F80, 0xBF41, 0x7D00, 0xBDC1, 0xBC81, 0x7C40,
  69      =1      0xB401, 0x74C0, 0x7580, 0xB541, 0x7700, 0xB7C1, 0xB681, 0x7640,
  70      =1      0x7200, 0xB2C1, 0xB381, 0x7340, 0xB101, 0x71C0, 0x7080, 0xB041,
  71      =1      0x5000, 0x90C1, 0x9181, 0x5140, 0x9301, 0x53C0, 0x5280, 0x9241,
  72      =1      0x9601, 0x56C0, 0x5780, 0x9741, 0x5500, 0x95C1, 0x9481, 0x5440,
  73      =1      0x9C01, 0x5CC0, 0x5D80, 0x9D41, 0x5F00, 0x9FC1, 0x9E81, 0x5E40,
  74      =1      0x5A00, 0x9AC1, 0x9B81, 0x5B40, 0x9901, 0x59C0, 0x5880, 0x9841,
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 7   

  75      =1      0x8801, 0x48C0, 0x4980, 0x8941, 0x4B00, 0x8BC1, 0x8A81, 0x4A40,
  76      =1      0x4E00, 0x8EC1, 0x8F81, 0x4F40, 0x8D01, 0x4DC0, 0x4C80, 0x8C41,
  77      =1      0x4400, 0x84C1, 0x8581, 0x4540, 0x8701, 0x47C0, 0x4680, 0x8641,
  78      =1      0x8201, 0x42C0, 0x4380, 0x8341, 0x4100, 0x81C1, 0x8081, 0x4040 
  79      =1  };
  80      =1  
  81      =1  
  82      =1  #define  ARD_STR_PAKET_BO  0x300 // адрес по которому хранится начало структуры принятия пакетов от БО
  83      =1  
  84      =1  #define prin_rele1  0x01
  85      =1  #define prin_rele2  0x02
  86      =1  #define prin_dac  0xCC   
  87      =1  
  88      =1  xdata struct str_paket_BO 
  89      =1  {
  90      =1    unsigned char linaddr_BO;
  91      =1    unsigned char off_rele1;
  92      =1    unsigned char off_rele2;
  93      =1    unsigned int  off_dac; 
  94      =1  }str_paket_BO;
  95      =1  
  96      =1   xdata struct str_paket_BO paket_BO ;
  97      =1   
  98      =1   
  99      =1   #define  ARD_BEGIN_RELE_PRIEM  0x314 // адрес по которому хранится начало структуры принятия пакетов от Б
             -О
 100      =1   
 101      =1    #define  DLINA_RELE_PRIEM 5
 102      =1   
 103      =1   xdata struct str_rele_prin 
 104      =1   {
 105      =1   // unsigned char num_rele;
 106      =1    unsigned char linaddr;
 107      =1    unsigned char off;
 108      =1    unsigned int  ustavka1; 
 109      =1    unsigned int  ustavka2; 
 110      =1   } str_rele_prin;
 111      =1   
 112      =1     xdata struct str_rele_prin rele_prin[DLINA_RELE_PRIEM];
 113      =1  
 114      =1  
 115      =1  
 116      =1  
 117      =1  
 118      =1  
   9          #include "define_stuct.h"
   1      =1  
   2      =1   
   3      =1  
   4      =1  #define BX_RF 0x40  // выбор источника опорного напряжения(внеш -0x40\внутр -0)АЦП  
   5      =1  #define BX_MD  0x2A //рещим запуска АЦП (2А - однократное измерение в режиме Chop Disable)
   6      =1  #define BX_CON1 0x27 //unipol преобразование 2.5v 
   7      =1  #define BX_SF   0x14//0x08 //4.3 мкс//0x10 //7.9 мкс//0x14  - 9.8мкс//0x07  //0x03 // время преобразования
             - 0.73мс
   8      =1  
   9      =1  #define bx_sf1   0x03 //0x03
  10      =1  //#define ADR_BASE_CH 0x60 //начальный адрес таблицы расположения каналов
  11      =1  
  12      =1  //начальный адрес таблицы размещения результатов измерения  измерения (EEPROM 3страница)
  13      =1  #define ADR_TAB_DAT  0x7C0  //-43F
  14      =1  //начальный адрес таблицы режимов измерения (EEPROM 3страница адрес 80h) 
  15      =1  #define ADR_TAB_IZM 0x780 //-47F
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 8   

  16      =1  //начальный адрес таблицы описания аналог.каналов (EEPROM 3страница adres A0)
  17      =1  #define ADR_TAB_CH   0x680  // - 4FF
  18      =1  //начальный адрес таблицы преобразования (EEPROM 4,5страницы)
  19      =1  #define ADR_TAB_PHIZ 0x400 //-7FF
  20      =1  #define ADR_TAB_PRG  0x5E0 // - 61Fначальный адрес таблицы порогов (EEPROM 6страница)
  21      =1  #define ADR_TAB_IZM_ZCH  0x6F0 
  22      =1  // - начальный адрес таблицы описания цифровых каналов)
  23      =1  
  24      =1  /*-----макрос MAC_Copy_Epr_Ram_TAB_ALL
  25      =1  копирование таблиц а EEPROM (адрес 0x0400)
  26      =1  в XRAM(адрес RAM = 0x0400)
  27      =1  Размер таблицы 1kбайт
  28      =1  */
  29      =1  #define MAC_Copy_Epr_Ram_TAB_ALL(ADR_EP,ADR_MEM) { \
  30      =1  ADR_E = (ADR_EP -0x100)>>2 ; \
  31      =1  tmpadc=ADR_MEM;   \
  32      =1  for(i1=0;i1<128;i1=i1+2)  \
  33      =1  {                      \
  34      =1  FUM_Epr_Rd4(ADR_E)  \ 
  35      =1  CM1=(EDATA1<<8)|EDATA2;CM2=(EDATA3<<8)|EDATA4; \
  36      =1  *((int xdata*)tmpadc+i1) =CM1; \
  37      =1  *((int xdata*)tmpadc+i1+1) =CM2;  \
  38      =1  ADR_E ++;                        \
  39      =1  }                  \
  40      =1  }
  41      =1  
  42      =1  /*-----макрос MAC_Copy_Epr_Ram_
  43      =1  копирование таблиц а EEPROM (адрес )
  44      =1  в XRAM(адрес RAM )
  45      =1  Размер таблицы (L_DAT)
  46      =1  */
  47      =1  #define MAC_Copy_Epr_Ram(ADR_EP,ADR_MEM,L_DAT) { \
  48      =1  ADR_E = (ADR_EP -0x100)>>2 ; \
  49      =1  tmpadc=ADR_MEM;   \
  50      =1  for(i1=0;i1<L_DAT;i1=i1+2)  \
  51      =1  {                      \
  52      =1  FUM_Epr_Rd4(ADR_E)  \ 
  53      =1  CM1=(EDATA1<<8)|EDATA2;CM2=(EDATA3<<8)|EDATA4; \
  54      =1  *((int xdata*)tmpadc+i1) =CM1; \
  55      =1  *((int xdata*)tmpadc+i1+1) =CM2;  \
  56      =1  ADR_E ++;                        \
  57      =1  }                  \
  58      =1  }
  59      =1  
  60      =1  
  61      =1  //-----------------------------  
  62      =1  
  63      =1  
  64      =1  /*---MAC_DFN_DAT_PRG
  65      =1  макрос определение значения порога измеренного аналогового параметра
  66      =1  по заданной таблице пороговых значений ,размещенной в рабочем буфере
  67      =1   BX[] RAM (адрес 0x0430)
  68      =1  //------структура таблиц преобразования
  69      =1  4байтный заголовок три 4байтных значений для каждого параметра,
  70      =1  Копируется в рабочий буфер по имяни параметра одна из таблиц
  71      =1  FL_PORG[8]
  72      =1  wadc = Str_BX_A[N_CH].ZGL_BX_A[1] & 0x0F0; \
  73      =1  if((wadc&0x80)==0x80) \
  74      =1  {wadc=wadc<<2; \
  75      =1  if(wadc1==wadc) {FL_PORG[N_CH]=10;FL_ERR=1;} \
  76      =1  */
  77      =1  
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 9   

  78      =1  
  79      =1  #define FUM_Epr_Rd4(Eadr) { EA=0; \
  80      =1          EADRH=(Eadr>>8)&0x03; EADRL=Eadr;ECON=0x01;EADRH=0;\
  81      =1      EA=1; \
  82      =1                     }
  83      =1  /*-----------------------------------------------------------------------*/
  84      =1  /*------------------------------------------------------------------*/
  85      =1  
  86      =1  #define FUM_Epr_Wr4(Eadr,d1,d2,d3,d4) {  EA=0; \
  87      =1       EADRH=(Eadr>>8)&0x03; EADRL=Eadr;ECON=0x01;\
  88      =1       EDATA1=d1;EDATA2=d2;EDATA3=d3;EDATA4=d4;ECON=0x05;ECON=0x02;\
  89      =1       EADRH=0; \ 
  90      =1     EA=1; \
  91      =1                  }
  92      =1  /*-------------------------------------------------------------*/
  93      =1  /*--------------------------------------------------------------
  94      =1  // 
  95      =1  //это вызов MACRO_определения функции загрузки режима работы АЦП
  96      =1   CH = 5;MD = 6;BX_CH =7; 
  97      =1  BX_RF =0x40;   
  98      =1  BX_CON1 = 0x27;  BX_SF = 0x03;BX_MD = 0x22;  
  99      =1  ------------------------------------------------------------------*/
 100      =1  
 101      =1  
 102      =1  /*макрос вычисление физического значения по таблице описания
 103      =1  из рабочего буфера BX[].код измеренного значения - рабочий параметр BX_KOD
 104      =1  A_TKH - указатель на начало таблицы в буфере BX[A_TKH]
 105      =1  BX[0] - 4байта заголовок. 3,4байты заголовка - длина таблицы
 106      =1  BX[i] (i=4,6,..) - значения кода 1 2 3 ..N точек 
 107      =1  BX[i] (i=5,7,..) - физические значения 1 2 3 ..N точек 
 108      =1   */ 
 109      =1  
 110      =1   
 111      =1  
 112      =1  
 113      =1  
 114      =1  
 115      =1  
 116      =1      
 117      =1  
 118      =1  
 119      =1  
  10          //#include "reg816.h"
  11          #include "aduc848.h"
   1      =1  /*REV.  0.1 (pmg.)   1st August 2003
   2      =1    ADuC845.h MCV Software Group, Analog Devices Inc.*/
   3      =1  
   4      =1  /*  BYTE Registers  */
   5      =1  sfr P0      = 0x80;
   6      =1  sfr SP      = 0x81;
   7      =1  sfr DPL     = 0x82;
   8      =1  sfr DPH     = 0x83;
   9      =1  sfr DPP     = 0x84;
  10      =1  sfr PCON    = 0x87;
  11      =1  sfr TCON    = 0x88;
  12      =1  sfr TMOD    = 0x89;
  13      =1  sfr TL0     = 0x8A;
  14      =1  sfr TL1     = 0x8B;
  15      =1  sfr TH0     = 0x8C;
  16      =1  sfr TH1     = 0x8D;
  17      =1  sfr P1      = 0x90;
  18      =1  sfr SCON    = 0x98;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 10  

  19      =1  sfr SBUF    = 0x99;
  20      =1  sfr I2CDAT = 0x9A;
  21      =1  sfr I2CADD = 0x9B;
  22      =1  sfr T3FD    = 0x9D;
  23      =1  sfr T3CON   = 0x9E;
  24      =1  sfr P2      = 0xA0;
  25      =1  sfr TIMECON = 0xA1;
  26      =1  sfr HTHSEC  = 0xA2;
  27      =1  sfr SEC     = 0xA3;
  28      =1  sfr MIN     = 0xA4;
  29      =1  sfr HOUR    = 0xA5;
  30      =1  sfr INTVAL  = 0xA6;
  31      =1  sfr DPCON   = 0xA7;
  32      =1  sfr IE      = 0xA8;
  33      =1  sfr IEIP2   = 0xA9;
  34      =1  sfr PWMCON  = 0xAE;
  35      =1  sfr CFG848  = 0xAF;
  36      =1  sfr P3      = 0xB0;
  37      =1  sfr PWM0L   = 0xB1;
  38      =1  sfr PWM0H   = 0xB2;
  39      =1  sfr PWM1L   = 0xB3;
  40      =1  sfr PWM1H   = 0xB4;
  41      =1  sfr SPH     = 0xB7;
  42      =1  sfr IP      = 0xB8;
  43      =1  sfr ECON    = 0xB9;
  44      =1  sfr EDATA1  = 0xBC;
  45      =1  sfr EDATA2  = 0xBD;
  46      =1  sfr EDATA3  = 0xBE;
  47      =1  sfr EDATA4  = 0xBF;
  48      =1  sfr WDCON   = 0xC0;
  49      =1  sfr CHIPID  = 0xC2;
  50      =1  sfr EADRL   = 0xC6;
  51      =1  sfr EADRH   = 0xC7;
  52      =1  sfr T2CON   = 0xC8;
  53      =1  sfr RCAP2L  = 0xCA;
  54      =1  sfr RCAP2H  = 0xCB;
  55      =1  sfr TL2     = 0xCC;
  56      =1  sfr TH2     = 0xCD;
  57      =1  sfr PSW     = 0xD0;
  58      =1  sfr ADCMODE = 0xD1;
  59      =1  sfr ADC0CON1 = 0xD2;
  60      =1  sfr SF      = 0xD4;
  61      =1  sfr ICON    = 0xD5;
  62      =1  sfr PLLCON  = 0xD7;
  63      =1  sfr ADCSTAT = 0xD8;
  64      =1  sfr ADC0L   = 0xD9;
  65      =1  sfr ADC0M   = 0xDA;
  66      =1  sfr ADC0H   = 0xDB;
  67      =1  sfr PSMCON  = 0xDF;
  68      =1  sfr ACC     = 0xE0;
  69      =1  sfr OF0L    = 0xE1;
  70      =1  sfr OF0M    = 0xE2;
  71      =1  sfr OF0H    = 0xE3;
  72      =1  sfr ADC0CON2 = 0xE6;
  73      =1  sfr I2CCON  = 0xE8;
  74      =1  sfr GN0L    = 0xE9;
  75      =1  sfr GN0M    = 0xEA;
  76      =1  sfr GN0H    = 0xEB;
  77      =1  sfr B       = 0xF0;
  78      =1  sfr I2CADD1 = 0xF2;
  79      =1  sfr SPIDAT  = 0xF7;
  80      =1  sfr SPICON  = 0xF8;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 11  

  81      =1  sfr DACL  = 0xFB;
  82      =1  sfr DACH  = 0xFC;
  83      =1  sfr DACCON  = 0xFD;
  84      =1  /*  BIT Registers  */
  85      =1  /*  PSW  */
  86      =1  sbit CY    = PSW^7;
  87      =1  sbit AC    = PSW^6;
  88      =1  sbit F0    = PSW^5;
  89      =1  sbit RS1   = PSW^4;
  90      =1  sbit RS0   = PSW^3;
  91      =1  sbit OV    = PSW^2;
  92      =1  sbit F1    = PSW^1;
  93      =1  sbit P     = PSW^0;
  94      =1  /*  TCON  */
  95      =1  sbit TF1   = TCON^7;
  96      =1  sbit TR1   = TCON^6;
  97      =1  sbit TF0   = TCON^5;
  98      =1  sbit TR0   = TCON^4;
  99      =1  sbit IE1   = TCON^3;
 100      =1  sbit IT1   = TCON^2;
 101      =1  sbit IE0   = TCON^1;
 102      =1  sbit IT0   = TCON^0;
 103      =1  /*  IE  */
 104      =1  sbit EA    = IE^7;
 105      =1  sbit EADC  = IE^6;
 106      =1  sbit ET2   = IE^5;
 107      =1  sbit ES    = IE^4;
 108      =1  sbit ET1   = IE^3;
 109      =1  sbit EX1   = IE^2;
 110      =1  sbit ET0   = IE^1;
 111      =1  sbit EX0   = IE^0;
 112      =1  /*  IP  */
 113      =1  //sbit PS1   = IP^7;
 114      =1  sbit PADC  = IP^6;
 115      =1  sbit PT2   = IP^5;
 116      =1  sbit PS    = IP^4;
 117      =1  sbit PT1   = IP^3;
 118      =1  sbit PX1   = IP^2;
 119      =1  sbit PT0   = IP^1;
 120      =1  sbit PX0   = IP^0;
 121      =1  /*  P3  */
 122      =1  sbit RELE1 = P0^3;
 123      =1  sbit int0 = P3^2;
 124      =1  sbit RD    = P3^7;
 125      =1  sbit WR    = P3^6;
 126      =1  sbit T1    = P3^5;
 127      =1  sbit T0    = P3^4;
 128      =1  sbit INT1  = P3^3;
 129      =1  sbit INT0  = P3^2;
 130      =1  sbit TXD   = P3^1;
 131      =1  sbit RXD   = P3^0;
 132      =1  /*  SCON  */
 133      =1  sbit SM0   = SCON^7;
 134      =1  sbit SM1   = SCON^6;
 135      =1  sbit SM2   = SCON^5;
 136      =1  sbit REN   = SCON^4;
 137      =1  sbit TB8   = SCON^3;
 138      =1  sbit RB8   = SCON^2;
 139      =1  sbit TI    = SCON^1;
 140      =1  sbit RI    = SCON^0;
 141      =1  /*  P1  */
 142      =1  sbit T2EX  = P1^1;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 12  

 143      =1  sbit T2    = P1^0;
 144      =1  
 145      =1  /*  T2CON  */
 146      =1  sbit TF2    = T2CON^7;
 147      =1  sbit EXF2   = T2CON^6;
 148      =1  sbit RCLK   = T2CON^5;
 149      =1  sbit TCLK   = T2CON^4;
 150      =1  sbit EXEN2  = T2CON^3;
 151      =1  sbit TR2    = T2CON^2;
 152      =1  sbit CNT2   = T2CON^1;
 153      =1  sbit CAP2   = T2CON^0;
 154      =1  /*  WDCON  */
 155      =1  sbit PRE3   = WDCON^7;
 156      =1  sbit PRE2   = WDCON^6;
 157      =1  sbit PRE1   = WDCON^5;
 158      =1  sbit PRE0   = WDCON^4;
 159      =1  sbit WDIR   = WDCON^3;
 160      =1  sbit WDS    = WDCON^2;
 161      =1  sbit WDE    = WDCON^1;
 162      =1  sbit WDWR   = WDCON^0;
 163      =1  /*  ADCSTAT  */        
 164      =1  sbit RDY0   = ADCSTAT^7;
 165      =1  sbit RDY1   = ADCSTAT^6;
 166      =1  sbit CAL    = ADCSTAT^5;
 167      =1  sbit NOXREF = ADCSTAT^4;
 168      =1  sbit ERR0   = ADCSTAT^3;
 169      =1  sbit ERR1   = ADCSTAT^2;
 170      =1  /*  I2CCON  */
 171      =1  sbit MDO   = I2CCON^7;
 172      =1  sbit MDE   = I2CCON^6;
 173      =1  sbit MCO   = I2CCON^5;
 174      =1  sbit MDI   = I2CCON^4;
 175      =1  sbit I2CM  = I2CCON^3;
 176      =1  sbit I2CRS = I2CCON^2;
 177      =1  sbit I2CTX = I2CCON^1;
 178      =1  sbit I2CI  = I2CCON^0;
 179      =1  /*  DCON  */
 180      =1  //sbit D1     = DCON^7;
 181      =1  //sbit D1EN   = DCON^6;
 182      =1  //sbit D0     = DCON^5;
 183      =1  //sbit D0EN   = DCON^3;
 184      =1  /*  SPICON  */
 185      =1  sbit ISPI   = SPICON^7;
 186      =1  sbit WCOL   = SPICON^6;
 187      =1  sbit SPE    = SPICON^5;
 188      =1  sbit SPIM   = SPICON^4;
 189      =1  sbit CPOL   = SPICON^3;
 190      =1  sbit CPHA   = SPICON^2;
 191      =1  sbit SPR1   = SPICON^1;
 192      =1  sbit SPR0   = SPICON^0;
  12          #include "ADC_bkcd.h"
   1      =1   
   2      =1  /*------------------------------------------------------------------
   3      =1  Макрос   FUM_RD_DAT_CLOCK прочитать значение RAM часов 
   4      =1  len-3;adcbuf[12]
   5      =1  ------------------------------------------------------------------*/
   6      =1  #define FUM_RD_DAT_CLOCK(Adr,Buf_d,size,wpar)   { \                   
   7      =1  wpar=0xD0;MDO=0;DL=2;while (1){DL--;if(DL==0)break;} MCO=0; \
   8      =1  for(j=0;j<2;j++) \
   9      =1  {for(i1=0;i1<8;i1++) \
  10      =1  {if((wpar&0x80)==0)  \
  11      =1  {MDO=0;} else {MDO=1;}  \
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 13  

  12      =1  DL=2;while (1){DL--;if(DL==0)break;}MCO=1;  \
  13      =1  while (1) {if (MCO==1) break;}        \
  14      =1  DL=2;while (1){DL--;if(DL==0)break;}MCO=0;MDO=0; \
  15      =1  wpar = wpar<<1; }                             \           
  16      =1                   DL=2;while (1){DL--;if(DL==0)break;}  \   
  17      =1                     MDE=0; MCO=1;  MDO=1;  while (1) {if (MCO==1) break;}  \                
  18      =1                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;} \
  19      =1              if (DL==0) b_err_cl++;    \
  20      =1             MDE=1;  MCO=0;                    \
  21      =1  wpar = Adr;}                                                       \                     
  22      =1  DL=2;while (1){DL--;if(DL==0)break;} MCO=1;                \
  23      =1  while (1) {if (MCO==1) break;}                      \
  24      =1  DL=2;while (1){DL--;if(DL==0)break;}                   \
  25      =1  MDO=1;DL=2;while (1){DL--;if(DL==0)break;}                      \
  26      =1  wpar=0xD1; DL=2;while (1){DL--;if(DL==0)break;}                \
  27      =1  MDO=0; DL=2;while (1){DL--;if(DL==0)break;}           \
  28      =1  MCO=0; DL=2;while (1){DL--;if(DL==0)break;}                         \
  29      =1  for(i1=0;i1<8;i1++)                          \
  30      =1  { if((wpar&0x80)==0){MDO=0;}else { MDO=1;}           \
  31      =1  DL=2;while (1){DL--;if(DL==0)break;}                \
  32      =1  MCO=1;DL=2;while (1) {if (MCO==1) break;}while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;   \                  
             -                                
  33      =1  wpar= wpar<<1; }                                   \
  34      =1                   DL=2;while (1){DL--;if(DL==0)break;}                    \
  35      =1                     MDE=0; MDO=1; MCO=1;       DL=2;while (1) {if (MCO==1) break;}  while (1){DL--;if(DL==0
             -)break;}   \   
  36      =1                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          \
  37      =1              if (DL==0) b_err_cl++;                                 \
  38      =1             MDE=1;  MCO=0;   DL=2;while (1){DL--;if(DL==0)break;}                        \
  39      =1  for(j=0;j<size;j++)                                                 \
  40      =1  {for(i1=0;i1<8;i1++){ MDO=1;MDE=0;MCO=1; while (1){if (MCO==1) break;} DL=2;while (1){DL--;if(DL==0)break;
             -}       \
  41      =1  if (MDI ==0)                                                     \
  42      =1  {Buf_d[j] = Buf_d[j]<<1;Buf_d[j] = Buf_d[j]&0xFE;}                                 \
  43      =1  else                                                         \
  44      =1  {Buf_d[j] = Buf_d[j]<<1;                                              \
  45      =1  Buf_d[j] = Buf_d[j]|0x01; }                                   \
  46      =1  MCO=0; DL=2;while (1){DL--;if(DL==0)break;}}                 \
  47      =1  MDO=0;                                    \
  48      =1  if (j==(size-1)) {MDO=1;}                          \
  49      =1  MDE=1;                                                  \
  50      =1  MCO=1;  while (1) {if (MCO==1) break;}                     \
  51      =1  DL=2;while (1){DL--;if(DL==0)break;}                      \
  52      =1  MCO=0;MDE=0;DL=2;while (1){DL--;if(DL==0)break;}}                  \
  53      =1  MDE=1;DL=2;while (1){DL--;if(DL==0)break;}                    \
  54      =1  MDO=0;DL=2;while (1){DL--;if(DL==0)break;}                       \
  55      =1  MCO=1;while (1) {if (MCO==1) break;}DL=2;while (1){DL--;if(DL==0)break;} MDO=1;   \                    
  56      =1  }                                          \
  57      =1                                            
  58      =1                                             
  59      =1  /*------------------------------------------------------------------
  60      =1  Макрос   FUM_Wr_DAT_CLOCK записать значения в RAM часов 
  61      =1  len-3;adcbuf[12]
  62      =1  ------------------------------------------------------------------*/
  63      =1  #define FUM_WR_DAT_CLOCK(Buf_d,size)   { \ 
  64      =1  MDO=0; \
  65      =1  DL=2;while (1){DL--;if(DL==0)break;} \
  66      =1  MCO=0; \
  67      =1  for(g=0;g<size;g++) \
  68      =1    {   \
  69      =1     for(g1=0;g1<8;g1++) \
  70      =1       { \
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 14  

  71      =1        if((Buf_d[g]&0x80)==0) \
  72      =1          { \
  73      =1           MDO=0; \ 
  74      =1           }  \
  75      =1            else  \
  76      =1             {  \
  77      =1              MDO=1;  \
  78      =1               } \
  79      =1                DL=2;while (1){DL--;if(DL==0)break;} \ 
  80      =1                MCO=1; while (1) {if (MCO==1)break;} \
  81      =1                DL=2;while (1){DL--;if(DL==0)break;} \
  82      =1                MCO=0;  \                      
  83      =1                if (tmp_ch!=7) { Buf_d[g] = Buf_d[g]<<1;} \
  84      =1                MDO=0;  \
  85      =1                 }   \                                
  86      =1                     DL=2;while (1){DL--;if(DL==0)break;}  \   
  87      =1                     MDO=1; MDE=0; MCO=1; while (1) {if (MCO==1)break;} \                  
  88      =1                                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          \
  89      =1         if (DL==0) b_err_cl++;          \
  90      =1           MDE=1;  MCO=0; \ 
  91      =1                 }   \                       
  92      =1                    DL=2;while (1){DL--;if(DL==0)break;}  \
  93      =1                    MCO=1; while (1) {if (MCO==1)break;}\
  94      =1                    DL=2;while (1){DL--;if(DL==0)break;} \
  95      =1                    MDO=1;  \ 
  96      =1  } 
  97      =1  #define FUM_WR_CLOCK(Buf_d,size)   { \ 
  98      =1  MDO=0; \
  99      =1  DL=2;while (1){DL--;if(DL==0)break;} \
 100      =1  MCO=0; \
 101      =1  for(g=0;g<size;g++) \
 102      =1    {   \
 103      =1     for(g1=0;g1<8;g1++) \
 104      =1       { \
 105      =1        if((Buf_d[g]&0x80)==0) \
 106      =1          { \
 107      =1           MDO=0; \ 
 108      =1           }  \
 109      =1            else  \
 110      =1             {  \
 111      =1              MDO=1;  \
 112      =1               } \
 113      =1                DL=2;while (1){DL--;if(DL==0)break;} \ 
 114      =1                MCO=1; while (1) {if (MCO==1)break;} \
 115      =1                DL=2;while (1){DL--;if(DL==0)break;} \
 116      =1                MCO=0;  \                      
 117      =1                if (j!=7) { Buf_d[g] = Buf_d[g]<<1;} \
 118      =1                MDO=0;  \
 119      =1                 }   \                                
 120      =1                     DL=2;while (1){DL--;if(DL==0)break;}  \   
 121      =1                     MDO=1; MDE=0; MCO=1; while (1) {if (MCO==1)break;} \                  
 122      =1                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          \
 123      =1             if (DL==0) b_err_cl++;                         \
 124      =1             MDE=1;  MCO=0; \ 
 125      =1                 }   \                       
 126      =1                    DL=2;while (1){DL--;if(DL==0)break;}  \
 127      =1                    MCO=1; while (1) {if (MCO==1)break;}\
 128      =1                    DL=2;while (1){DL--;if(DL==0)break;} \
 129      =1                    MDO=1;  \ 
 130      =1  } 
 131      =1  
 132      =1  #define FUM_RD_CLOCK(Adr,Buf_d,size,wpar)   { \                   
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 15  

 133      =1  wpar=0xD0;MDO=0;DL=2;while (1){DL--;if(DL==0)break;} MCO=0; \
 134      =1  for(j=0;j<2;j++) \
 135      =1  {for(i1=0;i1<8;i1++) \
 136      =1  {if((wpar&0x80)==0)  \
 137      =1  {MDO=0;} else {MDO=1;}  \
 138      =1  DL=2;while (1){DL--;if(DL==0)break;}MCO=1;  \
 139      =1  while (1) {if (MCO==1) break;}        \
 140      =1  DL=2;while (1){DL--;if(DL==0)break;}MCO=0;MDO=0; \
 141      =1  wpar = wpar<<1; }                             \           
 142      =1                   DL=2;while (1){DL--;if(DL==0)break;}  \   
 143      =1                     MDE=0; MCO=1;  MDO=1;  while (1) {if (MCO==1) break;}  \                
 144      =1                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          \
 145      =1             if (DL==0) b_err_cl++;                    \
 146      =1             MDE=1;  MCO=0;                    \
 147      =1  wpar = Adr;}                                                       \                     
 148      =1  DL=2;while (1){DL--;if(DL==0)break;} MCO=1;                \
 149      =1  while (1) {if (MCO==1) break;}                      \
 150      =1  DL=2;while (1){DL--;if(DL==0)break;}                   \
 151      =1  MDO=1;DL=2;while (1){DL--;if(DL==0)break;}                      \
 152      =1  wpar=0xD1; DL=2;while (1){DL--;if(DL==0)break;}                \
 153      =1  MDO=0; DL=2;while (1){DL--;if(DL==0)break;}           \
 154      =1  MCO=0; DL=2;while (1){DL--;if(DL==0)break;}                         \
 155      =1  for(i1=0;i1<8;i1++)                          \
 156      =1  { if((wpar&0x80)==0){MDO=0;}else { MDO=1;}           \
 157      =1  DL=2;while (1){DL--;if(DL==0)break;}                \
 158      =1  MCO=1;DL=2;while (1) {if (MCO==1) break;}while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;   \                  
             -                                
 159      =1  wpar= wpar<<1; }                                   \
 160      =1                   DL=2;while (1){DL--;if(DL==0)break;}                    \
 161      =1                     MDE=0; MDO=1; MCO=1;       DL=2;while (1) {if (MCO==1) break;}  while (1){DL--;if(DL==0
             -)break;}   \             
 162      =1                   DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          \
 163      =1             MDE=1;  MCO=0;   DL=2;while (1){DL--;if(DL==0)break;}                        \
 164      =1  for(j=0;j<size;j++)                                                 \
 165      =1  {for(i1=0;i1<8;i1++){ MDO=1;MDE=0;MCO=1; while (1){if (MCO==1) break;} DL=2;while (1){DL--;if(DL==0)break;
             -}       \
 166      =1  if (MDI ==0)                                                     \
 167      =1  {Buf_d[j] = Buf_d[j]<<1;Buf_d[j] = Buf_d[j]&0xFE;}                                 \
 168      =1  else                                                         \
 169      =1  {Buf_d[j] = Buf_d[j]<<1;                                              \
 170      =1  Buf_d[j] = Buf_d[j]|0x01; }                                   \
 171      =1  MCO=0; DL=2;while (1){DL--;if(DL==0)break;}}                 \
 172      =1  MDO=0;                                    \
 173      =1  if (j==(size-1)) {MDO=1;}                          \
 174      =1  MDE=1;                                                  \
 175      =1  MCO=1;  while (1) {if (MCO==1) break;}                     \
 176      =1  DL=2;while (1){DL--;if(DL==0)break;}                      \
 177      =1  MCO=0;MDE=0;DL=2;while (1){DL--;if(DL==0)break;}}                  \
 178      =1  MDE=1;DL=2;while (1){DL--;if(DL==0)break;}                    \
 179      =1  MDO=0;DL=2;while (1){DL--;if(DL==0)break;}                       \
 180      =1  MCO=1;while (1) {if (MCO==1) break;}DL=2;while (1){DL--;if(DL==0)break;} MDO=1;   \                    
 181      =1  }           
  13          //#include "rasx.h" 
  14          //#include "Опис_Таб_Кан.h"
  15          //xdata unsigned int kol_t=0,kol_kom=0,kol_e=0,kol_tsk=0,imp2=0;
  16          //data unsigned char nas1,nas2;
  17          
  18          // для запуска ацп на минимальное время из таймера
  19            //      data unsigned int PNT_BUF_TD;
  20            
  21          
  22            
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 16  

  23           xdata unsigned char tm_kan;
  24           data unsigned char kn;
  25           
  26           extern data int DAC_PRIN;
  27          
  28           bit d1,d2,d11,d22,napr=0;
  29           bit aktiv;
  30           xdata unsigned char chp=1,paket=0;
  31          
  32          //  data  unsigned char  dis, tdis;
  33           xdata unsigned char WK_1, WKs;  // байт кнопок
  34           data  unsigned char  N_K, KOL;
  35           bit fl_tadc;
  36           extern code unsigned int  TAB_ADC[4][9];
  37           extern xdata unsigned long  BUF_MN[7];
  38           extern xdata unsigned long  BUF_vr[7];
  39          //  для увеличения объема каждые 100 мс
  40           data unsigned char   nas1,nas2;
  41           xdata unsigned int BUF_FP_100_0=0;
  42           xdata unsigned int fcnt_k=0;
  43          // xdata unsigned char  cnt_r=0;
  44          
  45          xdata unsigned char  b_err_p=0,mi11=30,stat_byte=0, b_err_pit=0;
  46          data unsigned int kol_c=0;
  47          //data unsigned char fk=0;
  48          
  49          //xdata unsigned char fl_buf=0;
  50          bit  fl_buf=0,fl_rgr, v_rgr;
  51          bit fl_sv=0;
  52          bit fl_rest=0;
  53          sbit svet=P2^4;
  54          
  55          //xdata unsigned char vr,int_d;
  56          xdata unsigned char POR_R1_ON=0,POR_R2_ON=0,POR_R1_OFF=0,POR_R2_OFF=0;
  57          
  58          xdata unsigned char par=0;
  59          //xdata unsigned char  adcbuf[12];
  60          //data unsigned int tmpadc;
  61          //extern xdata unsigned char BUF_S[15];
  62          //extern void Timer1int (void);
  63          void kmd (void);
  64          //xdata unsigned char im_2,buf_sh[4];
  65          extern xdata unsigned long BUF_T[15];
  66          //idata unsigned int nach=0;
  67          
  68          data unsigned char zad=0;
  69          
  70          extern  void setup (void);
  71          extern  void setup_ADC (void);
  72          //extern  void wradc(void);
  73          //extern void sttim1 (void);
  74          //extern void ser_int (void);
  75          //extern void timer1int (void);
  76          //extern void intWD (void); 
  77          
  78          extern void task_3 (unsigned char kan) ;
  79          extern void lbuf_cop();
  80          extern void cop_buf();
  81          
  82          //extern xdata unsigned char ZG_TABX_DAT[4];
  83          
  84          data unsigned char Len_p=0;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 17  

  85          data unsigned char len_o=0;
  86          //xdata unsigned int  zn_ko=0; //kol_o, kol_e, kol_s,kol_n,kol_ez;
  87          data unsigned int ED=0;
  88          bit   rez, fl_r22=0,fl_r11=0, Eprom_zap=0,Eprom_ch=0,FL_BLOK_EPROM=0;
  89          bit  ep2=0;
  90          bit FCNT_SEC_V1=0, FCNT_SEC_V2=0,fcnt=0,fcnt_100=0;//FCNT_V2=0,
  91          
  92              
  93          
  94          
  95          idata unsigned char  j,j1,i,j2;   // временно изза зависания макроса сетап адс если их расположить в регис
             -трах майн
  96          data unsigned char i1;          // временно изза зависания макроса сетап адс если их расположить в регистрах 
             -майн
  97          data unsigned int crc=0;
  98          
  99          xdata unsigned int ob_par=0;
 100          //xdata unsigned bit ob_par[13]={0,0,0,0,0,0,0,0,0,0,0,0,0};
 101          
 102          data unsigned char st_ser=0, r_crc=0;
 103          
 104          
 105          idata unsigned char tmo=0,nro=0;//,tm_f;
 106          //idata unsigned char tms;
 107          idata unsigned int crco=0;
 108          idata unsigned char tmp=0;
 109          //xdata unsigned char dl_p;
 110          
 111          
 112          //idata unsigned int CNT_SEC_V=0, CNT_SEC_V2=0;
 113          //idata unsigned long CNT_SEC_DL=0;
 114          
 115          data unsigned long H1=0,H2=0;
 116          //bit FCNT_SEC_V,FCNT_SEC_V2;
 117          
 118          //extern  data unsigned int CM1,CM2,CM3,CM_RAX1;
 119          //extern data unsigned char N_CH;
 120          //xdata unsigned char a;
 121          
 122           extern xdata struct TABX_CH_A 
 123          {
 124          //unsigned char ZGL_TABX_CH[4]; 
 125          unsigned char NAME_PAR; //имя параметра измеряемого
 126          unsigned char R_IZM;    //режим измерения анал.каналов(task3/task2)
 127          unsigned char Frm_Dat; //значение запятой 00 40 80 C0; 00 10 20 30; ......
 128          unsigned char LA_TAB; //длина таблицы
 129          unsigned char NA_P1; //имя производного параметра1(порог)
 130          unsigned char NA_P2; //имя производного параметра2(I/U)
 131          unsigned char NA_P3; //формат основного параметра {XX,X запятая)
 132          unsigned char NA_P5; //имя производного параметра5 
 133          unsigned char NA_P4; //формат производного параметра {XX,X запятая)
 134          unsigned char N_RAZ; //номер разъема TIP_PAR;
 135          unsigned char KF_CRD; //коэффициент усреднения
 136          unsigned char KF_WIND;
 137          unsigned int  KF_KORZ; //коэффициент коррекции(множитель)  резул.измерения(физ.значен)
 138          unsigned int  KF_KORZ1;//KF_KORZ1; //коэффициент коррекции1(делитель) резул.измерения(физ.значен)
 139          //unsigned char  KF_KORZ1; //адрес размещения
 140          }TABX_CH_A;
 141          extern xdata struct  TABX_CH_A Str_CH_A[13]; //0x0494;// адрес и количество структур данного типа
 142          
 143          extern   xdata struct TABX_DAT 
 144          {   
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 18  

 145          unsigned char NAME_PAR; //имя параметра
 146          unsigned char ADR_RZ; //адрес размещения результата в буфер результатов
 147          }TABX_DAT;
 148          extern xdata struct  TABX_DAT Str_TDAT[20];// адрес и количество структур данного типа
 149          
 150          
 151          //extern code unsigned int  TAB_ADC[4][9];
 152          code unsigned int  VER_PR=0x0501; 
 153          
 154          //extern unsigned long idata TEMP_1;
 155          //extern  data unsigned int  cnt_dol,rasx1, rasx1_t,rasx2, rasx2_t, copy_p0,copy_p1; 
 156          idata unsigned char MM[7];
 157          extern  data unsigned int  copy_p, copy_p1; 
 158          //extern idata unsigned int  rasx1_t, rasx2_t;
 159          //extern idata unsigned int cnt_dol,rasx1,rasx2;
 160          
 161          //xdata unsigned char flz,flzz; // флаг защиты буфера результатов
 162          //idata unsigned char z0,z1,z2,z3,z4; // переменные для перекопирования параметра в случае его порчи
 163          //bit er1=0, er2=0;// ens=0;
 164           // мои
 165          
 166           /*
 167             описание версий:
 168               3.0 между каналами разнобой
 169             3.1 между каналами по 9 мск
 170             3.2 между каналами  1 мск  (епром виснет) =3.1+(ИЗЗА ЗАВИСАНИЯ ПРИ ЗАПИСИ ЕПРОМА ПО  КМД 01 И 03) запись 
             -епрома вынесена из прерывания в майн по флагу Eprom_zap
 171                  вроде бы очень быстрые зависания при жутком шуме и наложениях в течении 5 мин не наблюдаются..  
 172                  диодик мигает реже по таймеру и часто по завершению  80ти циклов полной оцифровки и расчета
 173                  однако на команды перестал реагировать ч\з 5 мин
 174               3.3 время преобразования ацп настроено на 9мс на обработку общую отводится по 9 мс 
 175                  дополнительный буфер результатов заполняемый по завершению полного цикла преобразования каналов ,
 176                этот буфер теперь и  выдается по команде опроса 
 177                каждые начала десятка минут происходит автокалибровка ацп
 178                стек с защитой буфером  вниз 
 179             4.3 - почищенная и готовая с накоплением импульсов хода за время, заданное в епроме.
 180          
 181             4.41 - проверенная испытаниями с отслеживанием по миганию диодика разных неисправностей
 182             4.42 - та же 4.41 но с инверсией включения реле(для нягани реле включаются низким потенциалом)
 183          
 184           */
 185          
 186          
 187           /************** timer1 *********************/
 188          /*
 189          void sttim1 (void) using 0
 190          {     
 191          
 192            //TF1=0;  
 193           
 194           // TR1 = 1;
 195          
 196          return;
 197          }
 198          */
 199           /*
 200           void intWD (void) interrupt 0xB
 201          {
 202              EA=0;
 203            WDWR=1;
 204            WDCON=0x10;     // 31.2 ms
 205            EA = 1; 
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 19  

 206            
 207           //IT0=1;
 208           //IE0=1;
 209           return;     
 210          }
 211          
 212           */
 213          
 214           /*
 215          void intIE (void) interrupt 0
 216          {
 217          //extern idata unsigned int CMRX1_K1,CMRX2_K1, CMRX1_K2,CMRX2_K2, cnt_dol;
 218          
 219           /*
 220            i=0;
 221            WR=1;
 222            while (1)
 223            {
 224            
 225            SBUF=0x77;
 226            while (TI==0)
 227            {}
 228            TI=0;
 229            }
 230            WR=0;
 231            */
 232           // EEPR_ADDBUF[0]=0;
 233           // EEPR_ADDBUF[1]=0;
 234           // TEMP=&lbuf[0];
 235           // FU_wepr(TEMP,4,&EEPR_ADDBUF[0]);
 236           /*
 237          #pragma asm
 238          //POP B
 239          MOV EADRH, #00H    
 240          MOV EADRL, #58H 
 241          //MOV ECON,   0x01    
 242          MOV EDATA1, #11H 
 243          MOV EDATA2, #22H 
 244          MOV EDATA3, #33H 
 245          MOV EDATA4, #44H 
 246          //MOV     ECON,#05H                                          
 247          MOV     ECON,#02H
 248          MOV     EADRH,#00H 
 249          
 250          #pragma endasm
 251           */
 252           /*CMRX1_K1=2222;
 253          while(1) {
 254           CMRX1_K1++;
 255           FUM_Epr_Wrout((0x160-0x100)>>2,0x33,0x22,CMRX1_K1>>8,CMRX1_K1)
 256           }
 257           */
 258           
 259           /*
 260            j=buf_sh[0];
 261            if (j!=0xFF)
 262            {   TEMP_1=BUF_T[j];   
 263              FUM_Epr_Wrout((0x160-0x100)>>2,TEMP_1>>24,TEMP_1>>16,TEMP_1>>8,TEMP_1)
 264            } 
 265              j=buf_sh[1];
 266            if (j!=0xFF)
 267            { TEMP_1=BUF_T[j];
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 20  

 268             FUM_Epr_Wrout((0x164-0x100)>>2,TEMP_1>>24,TEMP_1>>16,TEMP_1>>8,TEMP_1)
 269            }
 270              
 271            j=buf_sh[2];
 272            if (j!=0xFF)
 273            {  TEMP_1=BUF_T[j];
 274              FUM_Epr_Wrout((0x168-0x100)>>2,TEMP_1>>24,TEMP_1>>16,TEMP_1>>8,TEMP_1)
 275            }
 276            
 277              j=buf_sh[3];
 278            if (j!=0xFF)
 279            { TEMP_1=BUF_T[j];
 280              FUM_Epr_Wrout((0x16C-0x100)>>2,TEMP_1>>24,TEMP_1>>16,TEMP_1>>8,TEMP_1)
 281            }
 282            
 283          
 284            // раньше было досюда
 285          // FUM_Epr_Wrout((0x100-0x100)>>2,SPH,SP,kol_ez,kol_e)
 286           
 287           //FUM_Epr_Wr((0x104-0x100)>>2,kol_s>>8,kol_s,kol_n>>8,kol_n)
 288          
 289          //goto    STARTUP1;
 290            
 291               while (st_ser==40)
 292             {}
 293             EA = 0;
 294             WDWR=1;
 295             WDCON=0x03;      // 15.6 ms
 296             EA = 1;                    
 297          
 298          
 299          }
 300          */
 301          
 302          
 303          void timer1int (void) interrupt 3 using 1
 304          {
 305   1      //extern idata unsigned char p2cf;
 306   1      extern xdata unsigned int cnt_ves;
 307   1      //extern xdata unsigned long BUF_FP_100;
 308   1      
 309   1      
 310   1       // TF1=0;
 311   1       // TL1 = -0;//0xC4;//-200;
 312   1       // TH1 = -49;//-1;
 313   1      
 314   1      //   status=status|0x04;
 315   1      
 316   1      
 317   1      
 318   1      //  status=st_ser;
 319   1        TF1=0;
 320   1        TH1=R_INT_TMR1_H;
 321   1        TL1=R_INT_TMR1_L;
 322   1        
 323   1        copy_p1=copy_p;
 324   1        copy_p=P0;            
 325   1        rasx2_t++;
 326   1        rasx1_t++;
 327   1      //  kol_t++;
 328   1      //  if (kol_c<=6200)
 329   1      //    kol_c++;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 21  

 330   1      //   if (kol_c==6200)
 331   1      //   {
 332   1      //      st_ser=5;
 333   1      //    ES=1;
 334   1      //   }
 335   1      
 336   1      
 337   1        CNT_SEC_V1++;  // отсчет времени для объема насоса по режиму 0х84
 338   1          if (nas2!=0xff)
 339   1        { 
 340   2          if (CNT_SEC_V1==400)
 341   2          {   extern idata unsigned long  CMRX1_K2; 
 342   3            extern xdata unsigned long BUF_FP[15];
 343   3              CMRX1_K2+=BUF_FP[nas2];
 344   3              CNT_SEC_V1=0;
 345   3          }
 346   2        }
 347   1        else
 348   1          if (CNT_SEC_V1>4000)
 349   1          { CNT_SEC_V1=0;
 350   2            FCNT_SEC_V1=1;
 351   2          } 
 352   1      
 353   1      
 354   1        CNT_SEC_V2++;  // режим 84
 355   1          if (nas1!=0xff)
 356   1        { 
 357   2          if (CNT_SEC_V2==400)
 358   2          {   extern idata unsigned long  CMRX1_K1;
 359   3            extern xdata unsigned long BUF_FP[15];
 360   3              CMRX1_K1+=BUF_FP[nas1];
 361   3              CNT_SEC_V2=0;
 362   3          }
 363   2        }        
 364   1        else
 365   1          if (CNT_SEC_V2>4000)
 366   1          { CNT_SEC_V2=0;
 367   2            FCNT_SEC_V2=1;
 368   2          }
 369   1      
 370   1        if (MM[2]!=0)         // ходы канала 2 режим 0х84   обьем 0x09
 371   1        {
 372   2      
 373   2          if (((copy_p&MM[2])==MM[2])&((copy_p1&MM[2])!=MM[2]))
 374   2          {  
 375   3      
 376   3             bufcht1[0]++;
 377   3             if (!fl_m2)
 378   3             {   
 379   4                fl_m2=1;
 380   4               bufcht1[0]=0;fl_r22=0; rasx2_t=0;rasx2=0;// rasx2_t=rasxti_2;
 381   4             }
 382   3      
 383   3          if (H2!=0)
 384   3          {   if (rasx2_t>H2)//&(rasx2_t>Ras[bufcht1[0]]))
 385   4              {
 386   5                fl_r22=1;
 387   5                cop_imp2=bufcht1[0];
 388   5                rasx2=rasx2_t;
 389   5                rasx2_t=0;
 390   5                bufcht1[0]=0;
 391   5              }
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 22  

 392   4              else 
 393   4                if (!fl_r22)
 394   4                {
 395   5                cop_imp2=bufcht1[0];
 396   5                rasx2=rasx2_t;
 397   5                }
 398   4      
 399   4             }
 400   3             else
 401   3             {
 402   4              cop_imp2=bufcht1[0];
 403   4              rasx2=rasx2_t;
 404   4              rasx2_t=0;
 405   4              bufcht1[0]=0;
 406   4      
 407   4             }
 408   3          }
 409   2      
 410   2      
 411   2           if (rasx2_t>((rasx2/cop_imp2)<<1)+H2)
 412   2           {
 413   3              rasx2=rasx2_t;      
 414   3           }
 415   2      
 416   2           if (rasx2_t>=80000)
 417   2           {
 418   3              cop_imp2=0;
 419   3              bufcht1[0]=0;
 420   3              rasx2=0;      
 421   3                  rasx2_t=0;
 422   3              fl_m2=0;
 423   3           }
 424   2          }
 425   1      
 426   1      // ходы канала 1 по режиму 0х88
 427   1        if (MM[1]!=0)
 428   1        {
 429   2          if (((copy_p&MM[1])==MM[1])&((copy_p1&MM[1])!=MM[1]))
 430   2          {  
 431   3             bufcht1[1]++;
 432   3             if (!fl_m1)
 433   3             {   
 434   4              fl_m1=1;
 435   4             bufcht1[1]=0;fl_r11=0; rasx1_t=0; rasx1=0;// rasx2_t=rasxti_2;
 436   4             }
 437   3      
 438   3            if (H1!=0)
 439   3            {
 440   4              if (rasx1_t>H1)//&(rasx1_t>Ras[bufcht1[1]]))
 441   4              {
 442   5                fl_r11=1;
 443   5                cop_imp1=bufcht1[1];
 444   5                rasx1=rasx1_t;
 445   5                rasx1_t=0;
 446   5                bufcht1[1]=0;
 447   5              }
 448   4              else 
 449   4                if (!fl_r11)
 450   4                {   cop_imp1=bufcht1[1];
 451   5                    rasx1=rasx1_t;
 452   5                }
 453   4            }
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 23  

 454   3            else
 455   3            {
 456   4              cop_imp1=bufcht1[1];
 457   4              rasx1=rasx1_t;  
 458   4              rasx1_t=0;
 459   4              bufcht1[1]=0;         
 460   4            }
 461   3           }
 462   2           if (rasx1_t>((rasx1/cop_imp1)<<1)+H1)
 463   2           {
 464   3              rasx1=rasx1_t;      
 465   3           }
 466   2      
 467   2           if (rasx1_t>=80000)
 468   2           {
 469   3              cop_imp1=0;
 470   3              bufcht1[1]=0;
 471   3              rasx1=0;      
 472   3                rasx1_t=0;
 473   3              fl_m1=0;
 474   3           }
 475   2      
 476   2          }
 477   1      // когец ходов 1 по режиму 0х88
 478   1      
 479   1      
 480   1        if (MM[0]!=0)
 481   1        {
 482   2        
 483   2          if ((copy_p&MM[0])==MM[0])  {d1=1;} else {d1=0;}
 484   2          if ((copy_p&MM[6])==MM[6])  {d2=1;} else {d2=0;}
 485   2          
 486   2          if  ((d1==1)&(d11==0))  
 487   2          { if (d2==1) {if (napr) {if (cnt_dol>0) {cnt_dol--;} } else  {if (cnt_dol<65535) {cnt_dol++;}}}
 488   3            else {if (napr) {if (cnt_dol<65535) {cnt_dol++;}} else  {if (cnt_dol>0) {cnt_dol--;}}}    }
 489   2          
 490   2          if  ((d1==0)&(d11==1))  
 491   2          { if (d2==1) {if (napr) {if (cnt_dol<65535) {cnt_dol++;}} else  {if (cnt_dol>0) {cnt_dol--;}}}
 492   3            else {if (napr) {if (cnt_dol>0) {if (cnt_dol>0) {cnt_dol--;}}} else  {if (cnt_dol<65535) {cnt_dol++;}}
             -}    }
 493   2          
 494   2        
 495   2        
 496   2          if  ((d2==1)&(d22==0))  
 497   2          { if (d1==1) {if (napr) {if (cnt_dol<65535) {cnt_dol++;}} else  {if (cnt_dol>0) {cnt_dol--;}}}
 498   3            else {if (napr) {if (cnt_dol>0) {cnt_dol--;}} else  {if (cnt_dol<65535) {cnt_dol++;}}}    }
 499   2        
 500   2          if  ((d2==0)&(d22==1))  
 501   2          { if (d1==1) {if (napr) {if (cnt_dol>0) {cnt_dol--;}} else  {if (cnt_dol<65535) {cnt_dol++;}}}
 502   3            else {if (napr) {if (cnt_dol<65535) {cnt_dol++;}} else  {if (cnt_dol>0) {cnt_dol--;}}}    }
 503   2      
 504   2          d11=d1;
 505   2          d22=d2;
 506   2        }
 507   1      
 508   1       // начало время для подсчета объема по ходам
 509   1        CNT_SEC++;
 510   1          if (fl_rgr)
 511   1        { if (CNT_SEC==400)
 512   2          {   extern idata unsigned long  cmr;
 513   3            cmr+=BUF_FP_100_0;
 514   3      //      cnt_r++;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 24  

 515   3            CNT_SEC=0;
 516   3          }
 517   2        }
 518   1        else
 519   1          if (CNT_SEC>4000)
 520   1          { CNT_SEC=0;
 521   2            fcnt=1;
 522   2          }
 523   1       // конец время для подсчета объема по ходам
 524   1      
 525   1      
 526   1        if (zad!=0)
 527   1          zad--;
 528   1        else
 529   1          stat_byte=0x66;                         
 530   1      
 531   1      
 532   1       // начало проверки вышел ли таймаут после ответа
 533   1       priem++;
 534   1      
 535   1       if ((priem>2)&((st_ser==5)|(st_ser==10)))
 536   1       {
 537   2        WR=0;st_ser=5;nr=0xFF; ES=1;
 538   2       }
 539   1       // конец проверки вышел ли таймаут после ответа 
 540   1       
 541   1        if (tmo<1)
 542   1        {
 543   2            if (st_ser==20)
 544   2            {
 545   3        
 546   3            st_ser=40;
 547   3            nro=1;
 548   3            SBUF=0x7E;
 549   3            }
 550   2        }
 551   1        else 
 552   1        {
 553   2          if (st_ser==20)
 554   2            tmo--;
 555   2        }             
 556   1        
 557   1      return;
 558   1      }
 559          
 560          
 561          void int_adc (void) interrupt 6
 562          {
 563   1        data unsigned int tmadc;
 564   1        
 565   1        mi++;
 566   1      
 567   1        if (mi>666) 
 568   1        {
 569   2          mi=0;
 570   2            ep2=ep2^1;
 571   2          if (fl_sv)
 572   2              if (ep2==1)
 573   2              svet=1;
 574   2          else
 575   2            svet=0;
 576   2        } 
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 25  

 577   1          
 578   1        /*
 579   1        if  (RDY0)
 580   1        {  RDY0 = 0;
 581   1             tmadc=TAB_ADC[Str_CH_A[0].N_RAZ&0x03][Str_CH_A[0].N_RAZ>>2];
 582   1           
 583   1             P2=(P2&0x57)|(tmadc&0xA8);
 584   1      
 585   1          
 586   1             SF=bx_sf1;
 587   1             ADC0CON2 = BX_RF | (tmadc>>8); 
 588   1             ADCMODE = BX_MD; //старт ацп 
 589   1        }
 590   1        */
 591   1       
 592   1        if (RDY0)
 593   1        { 
 594   2          RDY0 = 0;
 595   2        
 596   2          if (Str_CH_A[N_K].N_RAZ==0xFF)
 597   2            tmadc=0;
 598   2          else
 599   2              tmadc  =  ADC0H<<8 | ADC0M;//int
 600   2      
 601   2          ADC0H=0;
 602   2          ADC0M=0;
 603   2      
 604   2              BUF_MN[N_K]+=tmadc; 
 605   2           
 606   2          if (KOL==4)
 607   2          {
 608   3            BUF_vr[N_K]=BUF_MN[N_K];
 609   3              BUF_MN[N_K]=0;     
 610   3          } 
 611   2                
 612   2          N_K++;
 613   2          if (N_K==7)
 614   2          {
 615   3            N_K=0;
 616   3            if (KOL==4)
 617   3            {
 618   4              KOL=0;
 619   4              // проверка кнопок
 620   4              WK_1=0;
 621   4              for(kn=1;kn<9;kn++)
 622   4              { 
 623   5                WK_1=WK_1>>1;     
 624   5                P2 = (P2&0x57)|(TAB_ADC[2][kn]&0xA8);
 625   5                WK_1=WK_1 |((P0&0x04)<<5);
 626   5              }
 627   4              WK_1=~WK_1;
 628   4            }
 629   3            KOL++;
 630   3          }
 631   2        
 632   2           tm_kan= Str_CH_A[N_K].N_RAZ;
 633   2           if  (tm_kan==0xFF)
 634   2             {tm_kan=5;}
 635   2          
 636   2          //   tmadc=TAB_ADC[kanal[N_K]&0x03][kanal[N_K]>>2];
 637   2      /*
 638   2          if (N_K==0)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 26  

 639   2          if (N_K==1)  {tmadc=TAB_ADC[0x09&0x03][0x09>>2];}
 640   2          if (N_K==2)  {tmadc=TAB_ADC[0x0D&0x03][0x0D>>2];}
 641   2          if (N_K==3)  {tmadc=TAB_ADC[0x11&0x03][0x11>>2];}
 642   2          if (N_K==4)  {tmadc=TAB_ADC[0x15&0x03][0x15>>2];}
 643   2          if (N_K==5)  {tmadc=TAB_ADC[0x19&0x03][0x19>>2];}
 644   2          if (N_K==6)  {tmadc=TAB_ADC[0xFF&0x03][0xFF>>2];}
 645   2          
 646   2          if (N_K==0)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
 647   2          if (N_K==1)  {tmadc=TAB_ADC[0x09&0x03][0x09>>2];}
 648   2          if (N_K==2)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
 649   2          if (N_K==3)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
 650   2          if (N_K==4)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
 651   2          if (N_K==5)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}
 652   2          if (N_K==6)  {tmadc=TAB_ADC[0x05&0x03][0x05>>2];}          
 653   2      */
 654   2          
 655   2        //     P2=(P2&0x57)|(tmadc&0xA8);
 656   2      
 657   2             tmadc=TAB_ADC[tm_kan&0x03][tm_kan>>2];   
 658   2             SF=bx_sf1;
 659   2             ADC0CON2 = BX_RF | (tmadc>>8); 
 660   2          //   ADC0CON2 = BX_RF | (0x0108>>8);
 661   2      
 662   2             ADCMODE = BX_MD; //старт ацп     
 663   2          }
 664   1          
 665   1      
 666   1      /*
 667   1      
 668   1            N_K++;
 669   1            if (N_K==7)
 670   1            {
 671   1              KOL++;
 672   1              N_K=0;
 673   1              if (KOL==16)
 674   1              {
 675   1                for (i1=0;i1<8;i1++)
 676   1                {                                                            
 677   1                  BUF_vr[i1]=BUF_MN[i1];
 678   1              //    BUF_MN[i1]=0;                          
 679   1                }
 680   1      
 681   1            //    cop_buf();
 682   1      
 683   1                KOL=0;
 684   1      
 685   1              }
 686   1            }
 687   1      */    
 688   1       return;
 689   1      }
 690          
 691          
 692          void ser_int (void) interrupt 4 using 2                             //monitor    monitor
 693                
 694          {
 695   1        data unsigned char i;
 696   1      
 697   1        if (RI == 1)
 698   1          {   
 699   2          tmp=SBUF;
 700   2          RI = 0;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 27  

 701   2            
 702   2              
 703   2          if (WR==1)
 704   2          {
 705   3            goto kon;
 706   3          }
 707   2        
 708   2            priem=0; 
 709   2      
 710   2          if   (st_ser!=5)
 711   2            {goto kon;}
 712   2           
 713   2          nr++;
 714   2          if (nr>34) 
 715   2          {
 716   3            st_ser=10;
 717   3            goto kon;
 718   3          }
 719   2      
 720   2          if (nr==2)
 721   2          {
 722   3            if ((tmp<36)&(tmp>6))
 723   3            {
 724   4              Len_p=tmp;
 725   4            }
 726   3            else
 727   3            { 
 728   4              st_ser=10;
 729   4              goto kon;// return;
 730   4            }
 731   3          }
 732   2            
 733   2             
 734   2          if (nr==0)
 735   2          {
 736   3            if (tmp!=0x7E)
 737   3            { 
 738   4              st_ser=10;
 739   4              goto kon;// return;
 740   4            }
 741   3          }
 742   2      
 743   2          if (nr==1)
 744   2          {
 745   3            if ((tmp!=lineadd)&(tmp!=0x3F)&(tmp!=lineadd_dop))
 746   3            {
 747   4              if (tmp==0xFF)
 748   4              {
 749   5                st_ser=10;
 750   5                goto kon;// return;
 751   5              }
 752   4              if ((tmp!=rele_prin[0].linaddr)|(tmp!=rele_prin[1].linaddr)|(tmp!=rele_prin[2].linaddr)|(tmp!=rele_pri
             -n[3].linaddr)|(tmp!=rele_prin[4].linaddr))
 753   4              {
 754   5                st_ser=10;
 755   5                goto kon;// return;
 756   5              }
 757   4            }
 758   3          }
 759   2      
 760   2          xbufin[nr] = tmp;
 761   2      
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 28  

 762   2          if ((nr==Len_p)&(nr>6))
 763   2          {   
 764   3            st_ser=50;
 765   3            /*
 766   3            if ((xbufin[1]==lineadd)|(xbufin[1]==0x3F))
 767   3            {
 768   3            */
 769   3            crc=0xFFFF;
 770   3            if (r_crc==0xFF)
 771   3            {
 772   4              for(i=0;i<Len_p;i++)
 773   4              {
 774   5                if (i==1) {crc=0;}
 775   5                   crc+=xbufin[i] ;
 776   5              }
 777   4            }
 778   3            else
 779   3              for(i=1;i<Len_p-1;i++)
 780   3              {
 781   4                data tmpbait=xbufin[i];
 782   4                crc = (crc >> 8) ^ Crc16Table[(crc & 0xFF) ^ tmpbait++];
 783   4              //  xbufin[i]--;
 784   4              }
 785   3      
 786   3            if (((crc&0x00FF)==tmp)&((r_crc==0xFF)|(xbufin[nr-1]==crc>>8)))
 787   3            { 
 788   4               len_o=xbufin[5];
 789   4               if (len_o>28) 
 790   4                  {st_ser=10; goto kon;}
 791   4      
 792   4      
 793   4      
 794   4      
 795   4               if ((xbufin[1]==lineadd_dop)&(lineadd_dop!=0xFF))
 796   4               {
 797   5                // принята команда как на блок отображения с адресом коробки  и 0x80
 798   5              //  if (len_o==4)       
 799   5                {
 800   6                  
 801   6                  bit bRELE;
 802   6      
 803   6                  DAC_PRIN=xbufin[paket_BO.off_dac];
 804   6                  DAC_PRIN<<=8;
 805   6                  DAC_PRIN+=xbufin[paket_BO.off_dac+1];
 806   6                  
 807   6                  bRELE= (xbufin[paket_BO.off_rele1]&0x01); RELE1=~bRELE;
 808   6      
 809   6                  bRELE=(xbufin[paket_BO.off_rele2]&0x01);  RD=~bRELE;
 810   6                  
 811   6                
 812   6                //  DACH=xbufin[6];
 813   6                //  DACL=xbufin[7]; 
 814   6          /*      
 815   6                paket_BO.off_rele1=7;
 816   6                paket_BO.off_rele2=9;
 817   6                paket_BO.off_dac=10;
 818   6            */  
 819   6        
 820   6        /*          
 821   6                  DAC_PRIN=0x04;
 822   6                  DAC_PRIN<<=8;
 823   6                  DAC_PRIN+=0xD2;   
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 29  

 824   6      
 825   6                  DAC_PRIN=0x04;
 826   6                  DAC_PRIN<<=8;
 827   6                  DAC_PRIN+=0xD2; 
 828   6      */
 829   6      
 830   6      
 831   6      /*
 832   6                  DAC_PRIN=xbufin[10];
 833   6                  DAC_PRIN<<=8;
 834   6                  DAC_PRIN+=xbufin[11];
 835   6      
 836   6                  bRELE= (xbufin[7]&0x01);  RELE1=~bRELE;
 837   6      
 838   6                  bRELE=(xbufin[9]&0x01); RD=~bRELE;
 839   6        */          
 840   6                  
 841   6            //      DAC_PRIN=4000;
 842   6            //      RELE1=0;
 843   6            //      RD=0;
 844   6                  
 845   6                  
 846   6                //  RELE1=~(xbufin[8]&0x01);
 847   6                //  RD= ~(xbufin[8]&0x02);                
 848   6                }
 849   5                
 850   5                st_ser=10; goto kon;
 851   5               }
 852   4               else
 853   4               {
 854   5               
 855   5                 if ((xbufin[1]==lineadd)|(xbufin[1]==0x3F))
 856   5                 {
 857   6                 for(i=0;i<Len_p;i++)
 858   6                         zbuf[i]=xbufin[i]; 
 859   6                        
 860   6                 zbuf[1]=xbufin[1]|0x80;
 861   6                   cmd = zbuf[3] &0x03;
 862   6        
 863   6                 if ((zbuf[3]&0xE0)!= 0)    // команда работы с епромом
 864   6                 {
 865   7                      if (len_o!=24)
 866   7                    if (len_o>0x16) 
 867   7                        {st_ser=10; goto kon;}
 868   7                    if ((xbufin[3]&0x1C)!=0) 
 869   7                      {st_ser=10; goto kon;}
 870   7                  if ((zbuf[3]&0x1C)!= 0) 
 871   7                    {st_ser=10; goto kon;}
 872   7        
 873   7                  ED=zbuf[3]&0xE0;
 874   7                  ED=ED<<3;
 875   7                  ED=ED+zbuf[4]-0x100;
 876   7                            
 877   7                  // write eeprom
 878   7                  if (((cmd ==1))|(cmd ==3))
 879   7                  {  
 880   8                     if ((len_o!=Len_p-7)|(FL_BLOK_EPROM!=1))
 881   8                      {st_ser=10; goto kon;}
 882   8                    Eprom_zap=1;
 883   8                  } 
 884   7          
 885   7        
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 30  

 886   7                  if (cmd ==2)
 887   7                  {  
 888   8                    Eprom_ch=1;
 889   8                  }
 890   7              
 891   7                  }
 892   6                  
 893   6                  //*****************************************
 894   6                if ((zbuf[3]&0xE0)  == 0) //no EEPROM
 895   6                {
 896   7                  if  (zbuf[4]==0)
 897   7                  {  
 898   8                    if ((cmd == 2)&(fl_buf))              // команда выдачи результатов в буфер         
 899   8                    { 
 900   9                      for(i=0;i<len_o;i++)
 901   9                        {
 902  10                          bufout[i+6] =lbuf_dn[i];
 903  10                      }  
 904   9                      WR=1; len_o=len_o+6;  
 905   9                      tmo=TM_LINE+TM_LINE;
 906   9                      st_ser=20;
 907   9                      bufout[2]=len_o+1;                   
 908   9                      }
 909   8                  }
 910   7        
 911   7                  if  ((zbuf[4]==0x20)&((zbuf[3]==0x01)|(zbuf[3]==0x03)|(zbuf[3]==0x02)))   // спецкоманда       
 912   7                  {
 913   8                      if (len_o==Len_p-7)
 914   8                      kmd();
 915   8                  }          
 916   7                } 
 917   6        
 918   6                if ((zbuf[3] ==5)&(cmd!=0)&(zbuf[4] ==0x10)&(zbuf[5] ==0x01))   // команда рестарта
 919   6                {  
 920   7                  fl_rest=1;
 921   7                  EA = 0; 
 922   7                  WDWR=1;WDCON=0x02;   // 500 ms
 923   7                  EA = 1; 
 924   7                }
 925   6        
 926   6                if ((st_ser==50)&(Eprom_zap!=1))
 927   6                   {st_ser=10; goto kon;}
 928   6                   
 929   6                }
 930   5                else   //  dopolnitelnie linadr for rele
 931   5                {
 932   6                  extern xdata unsigned int REL1_ON,REL1_OFF,REL2_ON,REL2_OFF;
 933   6                    if (xbufin[1]==rele_prin[0].linaddr)
 934   6                    {
 935   7                        xdata int temp_pr_rel=0;            
 936   7                      temp_pr_rel=xbufin[rele_prin[0].off];
 937   7                      temp_pr_rel<<=8;
 938   7                      temp_pr_rel+=xbufin[rele_prin[0].off+1];
 939   7                      
 940   7                      if (temp_pr_rel>rele_prin[0].ustavka1)
 941   7                          REL1_ON++;
 942   7                      else
 943   7                          REL1_OFF++; 
 944   7                          
 945   7                      if (temp_pr_rel>rele_prin[0].ustavka2)
 946   7                          REL2_ON++;
 947   7                      else
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 31  

 948   7                          REL2_OFF++;                   
 949   7                    }
 950   6      
 951   6                    if (xbufin[1]==rele_prin[1].linaddr)
 952   6                    {
 953   7                        xdata int temp_pr_rel=0;            
 954   7                      temp_pr_rel=xbufin[rele_prin[1].off];
 955   7                      temp_pr_rel<<=8;
 956   7                      temp_pr_rel+=xbufin[rele_prin[1].off+1];
 957   7                      
 958   7                      if (temp_pr_rel>rele_prin[1].ustavka1)
 959   7                          REL1_ON++;
 960   7                      else
 961   7                          REL1_OFF++; 
 962   7                          
 963   7                      if (temp_pr_rel>rele_prin[1].ustavka2)
 964   7                          REL2_ON++;
 965   7                      else
 966   7                          REL2_OFF++;                   
 967   7                    }
 968   6      
 969   6                    if (xbufin[1]==rele_prin[2].linaddr)
 970   6                    {
 971   7                        xdata int temp_pr_rel=0;            
 972   7                      temp_pr_rel=xbufin[rele_prin[2].off];
 973   7                      temp_pr_rel<<=8;
 974   7                      temp_pr_rel+=xbufin[rele_prin[2].off+1];
 975   7                      
 976   7                      if (temp_pr_rel>rele_prin[2].ustavka1)
 977   7                          REL1_ON++;
 978   7                      else
 979   7                          REL1_OFF++; 
 980   7                          
 981   7                      if (temp_pr_rel>rele_prin[2].ustavka2)
 982   7                          REL2_ON++;
 983   7                      else
 984   7                          REL2_OFF++; 
 985   7                    }
 986   6                    
 987   6                    if (xbufin[1]==rele_prin[3].linaddr)
 988   6                    {
 989   7                        xdata int temp_pr_rel=0;            
 990   7                      temp_pr_rel=xbufin[rele_prin[3].off];
 991   7                      temp_pr_rel<<=8;
 992   7                      temp_pr_rel+=xbufin[rele_prin[3].off+1];
 993   7                      
 994   7                      if (temp_pr_rel>rele_prin[3].ustavka1)
 995   7                          REL1_ON++;
 996   7                      else
 997   7                          REL1_OFF++; 
 998   7                          
 999   7                      if (temp_pr_rel>rele_prin[3].ustavka2)
1000   7                          REL2_ON++;
1001   7                      else
1002   7                          REL2_OFF++; 
1003   7                    }
1004   6      
1005   6                    if (xbufin[1]==rele_prin[4].linaddr)
1006   6                    {
1007   7                        xdata int temp_pr_rel=0;            
1008   7                      temp_pr_rel=xbufin[rele_prin[4].off];
1009   7                      temp_pr_rel<<=8;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 32  

1010   7                      temp_pr_rel+=xbufin[rele_prin[4].off+1];
1011   7                      
1012   7                      if (temp_pr_rel>rele_prin[4].ustavka1)
1013   7                          REL1_ON++;
1014   7                      else
1015   7                          REL1_OFF++; 
1016   7                          
1017   7                      if (temp_pr_rel>rele_prin[4].ustavka2)
1018   7                          REL2_ON++;
1019   7                      else
1020   7                          REL2_OFF++;                 
1021   7                    }
1022   6      
1023   6                    
1024   6                     if (REL1_ON>POR_R1_ON)  
1025   6                     {  RELE1=0; REL1_ON=0;  REL1_OFF=0;}
1026   6      
1027   6                     if (REL1_OFF>POR_R1_OFF)  
1028   6                     {  RELE1=1; REL1_ON=0;  REL1_OFF=0;}
1029   6      
1030   6                     if (REL2_ON>POR_R2_ON)  
1031   6                     {  RD=0;    REL2_ON=0;  REL2_OFF=0;}
1032   6      
1033   6                     if (REL2_OFF>POR_R2_OFF)  
1034   6                     {  RD=1;    REL2_ON=0;  REL2_OFF=0;}             
1035   6                    st_ser=10; goto kon;
1036   6                }
1037   5              }
1038   4            }
1039   3            else
1040   3            { 
1041   4              st_ser=10;
1042   4              goto kon;// return;
1043   4            }
1044   3            /*
1045   3            }
1046   3            else 
1047   3            {
1048   3              st_ser=10;
1049   3              goto kon;// return;
1050   3            }
1051   3            */
1052   3          }          
1053   2        }
1054   1        // КОНЕЦ РАЗБОРКИ ПРИНЯТОГО ПАКЕТА
1055   1      
1056   1        if (TI == 1)
1057   1        {
1058   2            TI=0;
1059   2            if (WR!=1)
1060   2            {st_ser=10; goto kon;}
1061   2      
1062   2          if (st_ser==40)
1063   2          { 
1064   3            if (nro<=5)
1065   3            {
1066   4              if (nro==2)
1067   4                tmp=bufout[2];
1068   4              else
1069   4                if (nro==1)
1070   4                { 
1071   5                  tmp=lineadd|0x80; 
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 33  

1072   5                  crco=0;
1073   5                  if (r_crc!=0xFF)
1074   5                        crco=0xFFFF;
1075   5                }
1076   4                else
1077   4                  tmp=zbuf[nro];
1078   4            }
1079   3            else 
1080   3              if (nro==len_o)
1081   3              {
1082   4                if (r_crc==0xFF)
1083   4                    tmp=status;
1084   4                else
1085   4                  tmp=crco>>8;
1086   4              }
1087   3              else
1088   3                if (nro==len_o+1)
1089   3                    tmp=crco;
1090   3                else
1091   3                  if (nro>len_o+1)
1092   3                  {
1093   4                    crco=0;
1094   4                    st_ser=10;
1095   4                    goto kon;
1096   4                  }
1097   3                  else
1098   3                    tmp=bufout[nro];
1099   3            SBUF=tmp;
1100   3            if (r_crc==0xFF)
1101   3              crco+=tmp;
1102   3            else
1103   3              if (nro!=len_o)
1104   3                  crco = (crco >> 8) ^ Crc16Table[(crco & 0xFF) ^ tmp++];
1105   3      
1106   3            nro++;
1107   3          }
1108   2          else
1109   2            {st_ser=10;}         
1110   2        }
1111   1        //  КОНЕЦ ОБРАБОТКИ ПОСЛЕ ПРИНЯТИЯ ОЧЕРЕДНОГО БАЙТА ПО УСАРТ 
1112   1      
1113   1        kon:
1114   1        return;
1115   1      }
1116          
1117          
1118          
1119          void kmd (void) //using 3
1120          { 
1121   1        register unsigned char tmp_rw;
1122   1      
1123   1        // начало по флагу 21 аналог адц 20
1124   1          if ((zbuf[2]==0x09)&(zbuf[5]==0x02)&(zbuf[6]==0xA0)&(zbuf[7]==0x01)) //  флаг разрешения записи в епром
1125   1          {                                 
1126   2          FL_BLOK_EPROM=1;
1127   2          bufout[6]=zbuf[6];bufout[7]=zbuf[7];
1128   2          WR=1;
1129   2          tmo=TM_LINE+TM_LINE;
1130   2          st_ser=20;
1131   2          }
1132   1      
1133   1       
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 34  

1134   1          if ((zbuf[2]==0x0B)&(zbuf[5]==0x04)&(zbuf[6]==0xC1)) //  установить новое значение параметров
1135   1          {
1136   2          extern data unsigned int new_zn;  
1137   2          data unsigned char t=0; 
1138   2      
1139   2          t=zbuf[7];
1140   2        /*      if (t==0x01)  //     
1141   2              {
1142   2                  ob_par=ob_par|0x0001;
1143   2              }
1144   2      
1145   2              if (t==0x02)  //     
1146   2              {
1147   2                 ob_par=ob_par|0x0002;
1148   2              }
1149   2      
1150   2              if (t==0x03)  //     
1151   2              {
1152   2                 ob_par=ob_par|0x0004;
1153   2              }
1154   2      
1155   2      
1156   2              if (t==0x04)  //  обнулить тальблок  
1157   2              {
1158   2                  ob_par=ob_par|0x0008;
1159   2              }
1160   2      
1161   2              if (t==0x05)  //  обнулить колонну   
1162   2              {
1163   2                  ob_par=ob_par|0x0010;
1164   2              }
1165   2      
1166   2              if (t==0x06)  //  обнулить трение  
1167   2              {
1168   2                  ob_par=ob_par|0x0020;
1169   2              }
1170   2      
1171   2              if (t==0x07)  //     
1172   2              {
1173   2                  ob_par=ob_par|0x0040;
1174   2              }
1175   2      
1176   2              if (t==0x08)  //     
1177   2              {
1178   2                 ob_par=ob_par|0x0080;
1179   2              }
1180   2      
1181   2              if (t==0x10)  //  корректировать Насаос аналог   
1182   2              {
1183   2                  if ((ob_par&0xFF00)==0)
1184   2                { 
1185   2                    ob_par=ob_par|0x100;
1186   2                  new_zn=zbuf[7]<<8;
1187   2                  new_zn+=zbuf[8];
1188   2                }
1189   2              }
1190   2      
1191   2              if (t==0x20)  //   корректировать Насаос 1     
1192   2              {
1193   2                  if ((ob_par&0xFF00)==0)
1194   2                { 
1195   2                  ob_par=ob_par|0x200;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 35  

1196   2                new_zn=zbuf[8]<<8;
1197   2                new_zn+=zbuf[9];
1198   2                }
1199   2              }
1200   2              
1201   2              if (t==0x30)  //  корректировать Насаос 2    
1202   2              {
1203   2                  if ((ob_par&0xFF00)==0)
1204   2                { 
1205   2                  ob_par=ob_par|0x400;
1206   2                new_zn=zbuf[8]<<8;
1207   2                new_zn+=zbuf[9];
1208   2                }
1209   2              }
1210   2              
1211   2        */      if (t==0x40)  //  корректировать тальблок    
1212   2              {
1213   3                  if ((ob_par&0xFF00)==0)
1214   3                { 
1215   4                  ob_par=ob_par|0x800;
1216   4                new_zn=zbuf[8]<<8;
1217   4                new_zn+=zbuf[9];
1218   4                }
1219   3              }
1220   2      
1221   2              if (t==0x50)  //  установить новый вес колонны   
1222   2              {
1223   3                  if ((ob_par&0xFF00)==0)
1224   3                { 
1225   4                  ob_par=ob_par|0x1000;
1226   4                new_zn=zbuf[8]<<8;
1227   4                new_zn+=zbuf[9];
1228   4                }
1229   3              }
1230   2      
1231   2      /*        if (t==0x60)  //  корректировать трение  
1232   2              {
1233   2                  if ((ob_par&0xFF00)==0)
1234   2                { 
1235   2                  ob_par=ob_par|0x2000;
1236   2                new_zn=zbuf[8]<<8;
1237   2                new_zn+=zbuf[9];
1238   2                }
1239   2              }
1240   2              
1241   2              if (t==0x70)  //  корректировать тальблок    
1242   2              {
1243   2                  if ((ob_par&0xFF00)==0)
1244   2                { 
1245   2                  ob_par=ob_par|0x4000;
1246   2                new_zn=zbuf[8]<<8;
1247   2                new_zn+=zbuf[9];
1248   2                }
1249   2              }
1250   2      
1251   2              if (t==0x80)  //  установить новый вес колонны   
1252   2              {
1253   2                  if ((ob_par&0xFF00)==0)
1254   2                { 
1255   2                  ob_par=ob_par|0x8000;
1256   2                new_zn=zbuf[8]<<8;
1257   2                new_zn+=zbuf[9];
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 36  

1258   2                }
1259   2              }
1260   2        */   
1261   2      
1262   2      //        bufout[6]=zbuf[6];bufout[7]=zbuf[7];
1263   2      //        tmo=TM_LINE+TM_LINE;
1264   2      //        st_ser=20;
1265   2            }
1266   1      
1267   1      
1268   1         /*
1269   1             if ((zbuf[6]==0xB2)&(zbuf[7]==0x00)) //      команда установки 
1270   1                 {                           
1271   1            старший байт дола zbuf[8]
1272   1            младший байт дола zbuf[9] 
1273   1            bufout[8]=VER_PR>>8;bufout[9]=VER_PR;  bufout[10]=st_ser;
1274   1            bufout[11]=SPH;bufout[12]=SP;
1275   1              tmo=TM_LINE+TM_LINE;
1276   1              zbuf[5]=7;    // длина ответа+1
1277   1              st_ser=20;
1278   1                 }
1279   1         */
1280   1      
1281   1               if ((zbuf[6]==0xB2)&(zbuf[7]==0x34)) //      команда чтения прошивки
1282   1                 {                           
1283   2              //  bufout[6]=;/*bufout[7]=0x01;*/ 
1284   2            bufout[6]=zbuf[6];bufout[7]=zbuf[7]; 
1285   2            bufout[8]=VER_PR>>8;bufout[9]=VER_PR;  bufout[10]=st_ser;
1286   2            bufout[11]=SPH;bufout[12]=SP;
1287   2            WR=1; tmo=TM_LINE+TM_LINE;
1288   2              zbuf[5]=7;    // длина ответа+1
1289   2              st_ser=20;
1290   2                 }
1291   1      
1292   1      
1293   1             if ((zbuf[5]==0x02)&(zbuf[6]==0xB0)&(zbuf[7]!=0xFF)) //  обнуления объемов
1294   1                 {                           
1295   2                  if (zbuf[7]==1)          // аналог
1296   2                ob_par=ob_par|0x01;
1297   2      
1298   2                  if (zbuf[7]==2)           //  насос 1
1299   2              {  ob_par=ob_par|0x02;
1300   3              }
1301   2      
1302   2                  if (zbuf[7]==3)         //  насос 2
1303   2                ob_par=ob_par|0x04;
1304   2      
1305   2                  if (zbuf[7]==0x20)          //  актив-пассив
1306   2                ob_par=ob_par|0x20;
1307   2      
1308   2               //   if (zbuf[7]==0)
1309   2            //    ob_par=ob_par|0x08;
1310   2      
1311   2      /*
1312   2                if (zbuf[7]==1)
1313   2                  vr=1;
1314   2                if ((zbuf[7]==2)&(vr==1))
1315   2                  vr=2;
1316   2                if ((zbuf[7]==3)&(vr==2))
1317   2                  vr=3;
1318   2         */
1319   2            //  bufout[6]=zbuf[6];bufout[7]=zbuf[7]; bufout[8]=zbuf[8];bufout[9]=zbuf[9];
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 37  

1320   2              //zbuf[5]=4;
1321   2            //  tmo=1;
1322   2          //    tmo=TM_LINE+TM_LINE;
1323   2            //  zbuf[5]=7;    // длина ответа+1
1324   2            //  st_ser=20;
1325   2                 }
1326   1      
1327   1       /*      if ((zbuf[5]==0x04)&(zbuf[6]==0xA3)&(zbuf[7]==0x0B)) //  FLASH
1328   1                 {                           
1329   1                 lineadd=zbuf[8];
1330   1               lineaddo=zbuf[9];
1331   1                  
1332   1              EDATA1=lineadd;
1333   1              EDATA2=lineaddo;
1334   1              FUM_Epr_Wr(((LADR1-0x100)>>2),lineadd,lineaddo,0xFF,0xFF)
1335   1              bufout[6]=zbuf[6];bufout[7]=zbuf[7]; bufout[8]=zbuf[8];bufout[9]=zbuf[9];
1336   1            //  zbuf[5]=10;
1337   1              tmo=TM_LINE+TM_LINE;
1338   1        
1339   1                 }
1340   1       */
1341   1               
1342   1                    
1343   1                 if (zbuf[6]==0xB5) // R/W CLOCK
1344   1                 {                           
1345   2                    if ((cmd == 1)&(zbuf[5]==0x0A)&(zbuf[2]==0x11))                   //wr
1346   2                    {
1347   3         /*
1348   3      adcbuf[0]=0xD0;
1349   3      adcbuf[1]=0x00;  
1350   3      adcbuf[2]=0; adcbuf[3]=0;
1351   3      adcbuf[4]=0;adcbuf[5]=0;
1352   3      adcbuf[6]=0;adcbuf[7]=0;
1353   3      adcbuf[8]=0;adcbuf[9]=0;
1354   3      adcbuf[10]=0;adcbuf[11]=0;
1355   3      adcbuf[12]=0; adcbuf[13]=0;
1356   3      adcbuf[14]=0; adcbuf[15]=0;
1357   3      
1358   3      FUM_WR_DAT_CLOCK(adcbuf,16)
1359   3      */
1360   3      
1361   3            SEC=zbuf[9];
1362   3          MIN=zbuf[10];
1363   3          HOUR=zbuf[11];
1364   3          
1365   3                zbuf[7]=0xD0;
1366   3                zbuf[8]=0x00;
1367   3      MDO=0; 
1368   3      DL=2;while (1){DL--;if (DL==0) break;} 
1369   3      MCO=0; 
1370   3      for(j=7;j<17;j++) 
1371   3        {   
1372   4         for(i1=0;i1<8;i1++) 
1373   4           { 
1374   5            if((zbuf[j]&0x80)==0) 
1375   5              { 
1376   6               MDO=0;  
1377   6               }  
1378   5                else  
1379   5                 {  
1380   6                  MDO=1;  
1381   6                   } 
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 38  

1382   5                    DL=2;while (1){DL--;if(DL==0)break;} 
1383   5                    MCO=1; while (1) {if (MCO==1)break;} 
1384   5                    DL=2;while (1){DL--;if(DL==0)break;} 
1385   5                    MCO=0;                        
1386   5                    if (i1!=7) { zbuf[j] = zbuf[j]<<1;} 
1387   5                    MDO=0;  
1388   5                     }                                   
1389   4                         DL=2;while (1){DL--;if(DL==0)break;}     
1390   4                         MDO=1; MDE=0; MCO=1; while (1) {if (MCO==1)break;}                   
1391   4                       DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;}          
1392   4                 if (DL==0) b_err_cl++;
1393   4                 MDE=1;  MCO=0;  
1394   4                     }                          
1395   3                        DL=2;while (1){DL--;if(DL==0)break;}  
1396   3                        MCO=1; while (1) {if (MCO==1)break;}
1397   3                        DL=2;while (1){DL--;if(DL==0)break;} 
1398   3                        MDO=1;   
1399   3                          
1400   3              // прочитали в часы внутренние
1401   3      /*                    tmp_rw=0xD0;MDO=0;DL=2;while (1){DL--;if(DL==0)break;} MCO=0;  
1402   3                for(j=0;j<2;j++)  
1403   3                {for(i1=0;i1<8;i1++)  
1404   3                {if((tmp_rw&0x80)==0)   
1405   3                {MDO=0;} else {MDO=1;}   
1406   3                DL=2;while (1){DL--;if(DL==0)break;}MCO=1;   
1407   3                while (1) {if (MCO==1) break;}         
1408   3                DL=2;while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;  
1409   3                tmp_rw = tmp_rw<<1; }                                         
1410   3                                 DL=2;while (1){DL--;if(DL==0)break;}      
1411   3                                   MDE=0; MCO=1;  MDO=1;  while (1) {if (MCO==1) break;}                   
1412   3                                 while (1){if (MDI==0) break;}           
1413   3                           MDE=1;  MCO=0;                     
1414   3                tmp_rw = 0x00;}                                                                             
1415   3                DL=2;while (1){DL--;if(DL==0)break;} MCO=1;                 
1416   3                while (1) {if (MCO==1) break;}                       
1417   3                DL=2;while (1){DL--;if(DL==0)break;}                    
1418   3                MDO=1;DL=2;while (1){DL--;if(DL==0)break;}                       
1419   3                tmp_rw=0xD1; DL=2;while (1){DL--;if(DL==0)break;}                 
1420   3                MDO=0; DL=2;while (1){DL--;if(DL==0)break;}            
1421   3                MCO=0; DL=2;while (1){DL--;if(DL==0)break;}                          
1422   3                for(i1=0;i1<8;i1++)                           
1423   3                { if((tmp_rw&0x80)==0){MDO=0;}else { MDO=1;}            
1424   3                DL=2;while (1){DL--;if(DL==0)break;}                 
1425   3                MCO=1;DL=2;while (1) {if (MCO==1) break;}while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;                 
             -                                     
1426   3                tmp_rw= tmp_rw<<1; }                                    
1427   3                                 DL=2;while (1){DL--;if(DL==0)break;}                     
1428   3                                   MDE=0; MDO=1; MCO=1;       DL=2;while (1) {if (MCO==1) break;}  while (1){DL--;if(
             -DL==0)break;}                 
1429   3                                 while (1){if (MDI==0) break;}                                    
1430   3                           MDE=1;  MCO=0;   DL=2;while (1){DL--;if(DL==0)break;}                         
1431   3                for(j=0;j<8;j++)                                                   
1432   3                {for(i1=0;i1<8;i1++){ MDO=1;MDE=0;MCO=1; while (1){if (MCO==1) break;} DL=2;while (1){DL--;if(DL==0)b
             -reak;}        
1433   3                if (MDI ==0)                                                      
1434   3                {buf_ch[j] = buf_ch[j]<<1;buf_ch[j] = buf_ch[j]&0xFE;}                                  
1435   3                else                                                          
1436   3                {buf_ch[j] = buf_ch[j]<<1;                                               
1437   3                buf_ch[j] = buf_ch[j]|0x01; }                                    
1438   3                MCO=0; DL=2;while (1){DL--;if(DL==0)break;}}                  
1439   3                MDO=0;                                     
1440   3                if (j==(8-1)) {MDO=1;}                            
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 39  

1441   3                MDE=1;                                                   
1442   3                MCO=1;  while (1) {if (MCO==1) break;}                      
1443   3                DL=2;while (1){DL--;if(DL==0)break;}                       
1444   3                MCO=0;MDE=0;DL=2;while (1){DL--;if(DL==0)break;}}                   
1445   3                MDE=1;DL=2;while (1){DL--;if(DL==0)break;}                     
1446   3                MDO=0;DL=2;while (1){DL--;if(DL==0)break;}                        
1447   3                MCO=1;while (1) {if (MCO==1) break;}DL=2;while (1){DL--;if(DL==0)break;} MDO=1; 
1448   3           tmp_rw=((buf_ch[0]>>4)*10) +(buf_ch[0]&0x0F);      
1449   3           SEC=tmp_rw;
1450   3           tmp_rw=((buf_ch[1]>>4)*10) +(buf_ch[1]&0x0F);      
1451   3           MIN=tmp_rw;
1452   3           tmp_rw=((buf_ch[2]>>4)*10) +(buf_ch[2]&0x0F);      
1453   3           HOUR=tmp_rw; 
1454   3        */   
1455   3      //     bufout[6]=SEC;
1456   3      //     bufout[7]=MIN; bufout[8]=HOUR;bufout[5]=17;  zbuf[5]=9;   
1457   3      
1458   3          zbuf[5]=2;
1459   3          cmd=2;
1460   3          zbuf[2]=0x09;
1461   3      
1462   3               
1463   3                    }
1464   2         
1465   2              if ((cmd == 2)&(zbuf[5]==2)&(zbuf[2]==0x09))                   //wr/ rd 
1466   2              {
1467   3                tmp_rw=0xD0;MDO=0;DL=2;while (1){DL--;if(DL==0)break;} MCO=0;  
1468   3                for(j=0;j<2;j++)  
1469   3                {for(i1=0;i1<8;i1++)  
1470   4                {if((tmp_rw&0x80)==0)   
1471   5                {MDO=0;} else {MDO=1;}   
1472   5                DL=2;while (1){DL--;if(DL==0)break;}MCO=1;   
1473   5                while (1) {if (MCO==1) break;}         
1474   5                DL=2;while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;  
1475   5                tmp_rw = tmp_rw<<1; }                                         
1476   4                                 DL=2;while (1){DL--;if(DL==0)break;}      
1477   4                                   MDE=0; MCO=1;  MDO=1;  while (1) {if (MCO==1) break;}                   
1478   4                       DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;} 
1479   4                           if (DL==0) b_err_cl++;
1480   4              
1481   4                 
1482   4                           MDE=1;  MCO=0;                     
1483   4                tmp_rw = 0x00;}                                                                             
1484   3                DL=2;while (1){DL--;if(DL==0)break;} MCO=1;                 
1485   3                while (1) {if (MCO==1) break;}                       
1486   3                DL=2;while (1){DL--;if(DL==0)break;}                    
1487   3                MDO=1;DL=2;while (1){DL--;if(DL==0)break;}                       
1488   3                tmp_rw=0xD1; DL=2;while (1){DL--;if(DL==0)break;}                 
1489   3                MDO=0; DL=2;while (1){DL--;if(DL==0)break;}            
1490   3                MCO=0; DL=2;while (1){DL--;if(DL==0)break;}                          
1491   3                for(i1=0;i1<8;i1++)                           
1492   3                { if((tmp_rw&0x80)==0){MDO=0;}else { MDO=1;}            
1493   4                DL=2;while (1){DL--;if(DL==0)break;}                 
1494   4                MCO=1;DL=2;while (1) {if (MCO==1) break;}while (1){DL--;if(DL==0)break;}MCO=0;MDO=0;                 
             -                                     
1495   4                tmp_rw= tmp_rw<<1; }                                    
1496   3                                 DL=2;while (1){DL--;if(DL==0)break;}                     
1497   3                                   MDE=0; MDO=1; MCO=1;       DL=2;while (1) {if (MCO==1) break;}  while (1){DL--;if(
             -DL==0)break;}                 
1498   3                       DL=200; while (1){DL--; if ((MDI==0)|(DL==0)) break;} 
1499   3                           if (DL==0) b_err_cl++;
1500   3              
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 40  

1501   3                                        
1502   3                           MDE=1;  MCO=0;   DL=2;while (1){DL--;if(DL==0)break;}                         
1503   3                for(j=0;j<8;j++)                                                   
1504   3                {for(i1=0;i1<8;i1++){ MDO=1;MDE=0;MCO=1; while (1){if (MCO==1) break;} DL=2;while (1){DL--;if(DL==0)b
             -reak;}        
1505   5                if (MDI ==0)                                                      
1506   5                {bufout[9+j] = bufout[9+j]<<1;bufout[9+j] = bufout[9+j]&0xFE;}                                  
1507   5                else                                                          
1508   5                {bufout[9+j] = bufout[9+j]<<1;                                               
1509   6                bufout[9+j] = bufout[9+j]|0x01; }                                    
1510   5                MCO=0; DL=2;while (1){DL--;if(DL==0)break;}}                  
1511   4                MDO=0;                                     
1512   4                if (j==(8-1)) {MDO=1;}                            
1513   4                MDE=1;                                                   
1514   4                MCO=1;  while (1) {if (MCO==1) break;}                      
1515   4                DL=2;while (1){DL--;if(DL==0)break;}                       
1516   4                MCO=0;MDE=0;DL=2;while (1){DL--;if(DL==0)break;}}                   
1517   3                MDE=1;DL=2;while (1){DL--;if(DL==0)break;}                     
1518   3                MDO=0;DL=2;while (1){DL--;if(DL==0)break;}                        
1519   3                MCO=1;while (1) {if (MCO==1) break;}DL=2;while (1){DL--;if(DL==0)break;} MDO=1;       
1520   3            //    for(i1=0;i1<8;i1++)
1521   3            //    {   adcbuf[i1]=i1;}
1522   3            //    SEC=bufout[9];
1523   3            //    MIN=bufout[10];
1524   3            //    HOUR=bufout[11]; 
1525   3            //    bufout[9]=zbuf[9];
1526   3            //    bufout[10]=zbuf[10];
1527   3            //    bufout[11]=zbuf[11]; 
1528   3                bufout[6]=zbuf[6];/*bufout[7]=0x01;*/ 
1529   3                bufout[7]=zbuf[7]; bufout[8]=zbuf[8];bufout[5]=17;  zbuf[5]=10;// len_o=17;bufout[2]=17;
1530   3      
1531   3            //    for(i1=0;i1<8;i1++)
1532   3            //    {   bufout[9+i1]=adcbuf[i1];}                            
1533   3                  
1534   3               // len_o=17;
1535   3               WR=1;
1536   3               tmo=TM_LINE+TM_LINE;
1537   3               st_ser=20;
1538   3               }
1539   2      
1540   2                  }
1541   1      
1542   1      
1543   1             
1544   1      /*       if((zbuf[6]&0x3F)==0x37) // read Flash zikl в обратном направлении
1545   1                 {                           
1546   1          
1547   1            EA=0;
1548   1            WR=1;
1549   1        //    CM1=(zbuf[7]<<8)|zbuf[8];
1550   1            CM1=0;
1551   1          for  (j=1;j<9;j++)
1552   1            for(i1=0;i1<127;i1++)
1553   1              {
1554   1              tmpadc=*(int xdata*)CM1;
1555   1            SBUF=tmpadc>>8;
1556   1              while (TI==0)
1557   1              {}
1558   1              TI=0; 
1559   1              SBUF=tmpadc;
1560   1              while (TI==0)
1561   1              {}
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 41  

1562   1              TI=0;
1563   1              CM1++;
1564   1              CM1++;
1565   1            }
1566   1        
1567   1            WR=0;
1568   1            EA=1;
1569   1                 }
1570   1       */     
1571   1      /* 
1572   1               if((zbuf[6]&0x3F)==0x39) // читать RAM
1573   1                 {                           
1574   1                        tmpadc_m=zbuf[8]<<8|zbuf[9];//адресRAM
1575   1                a=zbuf[10];if(a>24)a=24; // длина в байтах
1576   1                if(zbuf[7]==2) //обращение к RAM(2k)
1577   1                {
1578   1                  if ((cmd&0x01) == 1)
1579   1                    {
1580   1                      if(tmpadc_m<0400) goto PR01;
1581   1                      if(a>19)a=19;
1582   1                      for(j2=0;j2<a;j2++)
1583   1                      {
1584   1                        *((char xdata*)tmpadc_m+j2)=zbuf[11+j2] ;
1585   1                      }     
1586   1                    }
1587   1                  if ((cmd&0x02) == 2)
1588   1                    {
1589   1            // что делать с этой строчкой??          while(t==1);
1590   1                    for(j2=0;j2<a;j2++)
1591   1                      {
1592   1                         bufout[6+j2]= *((char xdata*)tmpadc_m+j2) ;
1593   1                      }
1594   1                       zbuf[2]=a+7;zbuf[3]=0x02;zbuf[4]=0x20;zbuf[5]=a;//0x18;           
1595   1                       bufout[2]=zbuf[2];len=a+6;
1596   1                     
1597   1        // че то делать надо             t = 1;//while(t==1);
1598   1                       
1599   1                     
1600   1                     if(tmpadc_m==0x04C0) 
1601   1                       {
1602   1                           *((char xdata*)tmpadc_m)=0x0FF; *((char xdata*)tmpadc_m+1)=0x0FF;
1603   1                            *((char xdata*)tmpadc_m+2)=0x0FF;*((char xdata*)tmpadc_m+3)=0x0FF;
1604   1                           *((char xdata*)tmpadc_m+4)=0; *((char xdata*)tmpadc_m+5)=0;
1605   1                            *((char xdata*)tmpadc_m+6)=0; *((char xdata*)tmpadc_m+7)=0;
1606   1                        } 
1607   1                    }
1608   1                }
1609   1                 PR01:
1610   1                 cmd=1;   
1611   1                       
1612   1                   }
1613   1         */
1614   1                
1615   1        /*     if((zbuf[6]&0x3F)==0x3B) // вкл выкл активность..
1616   1                 {                           
1617   1              
1618   1            //  ob_par=zbuf[7]; 
1619   1            if (zbuf[7]!=0xFF)
1620   1            { if (s_otv==0xFF)
1621   1                {s_otv=zbuf[7];
1622   1                  tms=s_otv+s_otv;}
1623   1            }
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 42  

1624   1            else
1625   1              {s_otv=0xFF;
1626   1               tms=0xFF;  }
1627   1            tmo=TM_LINE+TM_LINE;  
1628   1                 }
1629   1       */
1630   1                 
1631   1      /*       if((zbuf[6]&0x3F)==0x3C) // рестарт модуля
1632   1                 {                                                    
1633   1                        //    cmd=1;
1634   1                  while (WR==1)
1635   1                  {
1636   1                  }
1637   1               EA = 0; 
1638   1      
1639   1               WDWR=1;WDCON=0x03;
1640   1               EA = 1; 
1641   1                }
1642   1              
1643   1             
1644   1             if((zbuf[6]&0x3F)==0x3E) // записать прочитать RAM Clock
1645   1                 {                                                    
1646   1                    if((zbuf[8]+zbuf[9])<0x3F)
1647   1                {  
1648   1                    if(zbuf[9]>10) {zbuf[9]=10;} 
1649   1                    if ((cmd&0x01) == 1)//   записать 
1650   1                  {
1651   1                  //    adcbuf[0]=0xD0;
1652   1                  //    adcbuf[1]=zbuf[8]; wadc=zbuf[9]+2;
1653   1                      for (j=0;j<zbuf[9];j++)
1654   1                      {
1655   1                  //      adcbuf[j+2]=zbuf[10+j];
1656   1                      }
1657   1                    //  FUM_WR_DAT_CLOCK(adcbuf,wadc)  
1658   1                  }
1659   1                    if ((cmd&0x02) == 2)   //  читать
1660   1                    {
1661   1              //    wadc1=zbuf[8]; 
1662   1                  //    FUM_RD_DAT_CLOCK(wadc1,adcbuf,zbuf[9],wadc)
1663   1          //        if(wadc1==0x10) 
1664   1          //        {K_PAH=zbuf[12];}
1665   1                      //while(t==1);
1666   1                      for (j=0;j<zbuf[9];j++)
1667   1                      {
1668   1                  //      bufout[10+j]=adcbuf[j];
1669   1                      }
1670   1                        bufout[6]=zbuf[6];bufout[7]=zbuf[7];bufout[8]=zbuf[8];
1671   1                      bufout[9]=zbuf[9];
1672   1                      zbuf[5]=zbuf[9]+4;len=6+zbuf[5];
1673   1                }
1674   1                }
1675   1                 }
1676   1           */
1677   1        
1678   1      
1679   1           //конец ао флагу 21 аналога адц 20
1680   1         len_o=zbuf[5]+6;
1681   1         bufout[2]=len_o+1;
1682   1      
1683   1      
1684   1      /*
1685   1       #pragma asm
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 43  

1686   1        POP PSW
1687   1        POP DPL
1688   1        POP DPH
1689   1        POP B
1690   1        POP ACC
1691   1      #pragma endasm
1692   1        */
1693   1      
1694   1      //       status=status&0xEF;
1695   1      return;
1696   1      }
1697          
1698          
1699          
1700          /*************** MAIN ************/
1701          
1702          void main (void) using 0  
1703          { 
1704   1      xdata unsigned char fl_kal=0, kol_cik=0;
1705   1      extern xdata unsigned long copy_dol;
1706   1        ES = 0;
1707   1        TR1=0;
1708   1        EA=0;
1709   1      
1710   1      
1711   1       P0=0xFF;
1712   1       P2=0x40;
1713   1       DAC_PRIN=0;
1714   1      
1715   1      
1716   1       CFG848=0x81;
1717   1      // stat_byte=stat_byte|0x01;
1718   1      while (!int0)
1719   1        {kol_c=0;   //  stat_byte=stat_byte|0x10;
1720   2        }
1721   1       
1722   1       IE=0;
1723   1       IP=0x08;
1724   1      
1725   1       EA=0;
1726   1      
1727   1       if (WDS==1)
1728   1       {
1729   2        EA=0;
1730   2          WDWR=1;
1731   2        WDCON=0x10;
1732   2        WDS=0;
1733   2      //    stat_byte=stat_byte|0x80;
1734   2       }
1735   1      
1736   1      
1737   1       svet=0;
1738   1       rasx1_t=0;
1739   1       rasx2_t=0;
1740   1       rasx1=0;
1741   1       rasx2=0;
1742   1       fl_m1=0;
1743   1       fl_m2=0;
1744   1       cop_imp1=0;
1745   1       cop_imp2=0;
1746   1       copy_p=0x00FF;
1747   1       copy_p1=0; 
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 44  

1748   1       bufcht1[0] = 0;
1749   1       bufcht1[1] = 0;
1750   1       FL_BLOK_EPROM=0;
1751   1       FCNT_SEC_V1=0;
1752   1       FCNT_SEC_V2=0;
1753   1       fcnt=0;
1754   1       CNT_SEC_V2=0;
1755   1       CNT_SEC_V1=0;
1756   1       CNT_SEC=0;
1757   1       kol_c=0;
1758   1       par=0;
1759   1       st_ser=0;
1760   1       fl_buf=0;
1761   1       fl_ds=1;
1762   1       BUF_FP_100_0=0;
1763   1       
1764   1      nro=1;  
1765   1      WR=0; 
1766   1      
1767   1      
1768   1      setup();  
1769   1      
1770   1      FUM_Epr_Rd((T_LADR1-0x100)>>2)
1771   1      
1772   1      TM_LINE=EDATA2;     // 0x011D
1773   1      if (TM_LINE>0x3F)
1774   1        {TM_LINE=0x3F;}
1775   1        
1776   1      TM_LINE+=TM_LINE;
1777   1      
1778   1      if (TM_LINE==0)
1779   1        {TM_LINE=1;}
1780   1       
1781   1      if (EDATA4==0xCC)   // 0x011F
1782   1        r_crc=EDATA4;
1783   1      else
1784   1        r_crc=0xFF;
1785   1      
1786   1      //  r_crc=0xCC;
1787   1      
1788   1      if (EDATA1==0x64)   // 0x011C
1789   1      {
1790   2        nas1=1; nas2=1;
1791   2      }
1792   1      else
1793   1      { nas1=0xff; nas2=0xff;
1794   2      }
1795   1      
1796   1      FUM_Epr_Rd((LADR1-0x100)>>2)            
1797   1      lineadd=EDATA1;
1798   1      if (lineadd==0xFF)
1799   1        {lineadd=0x3F;
1800   2        lineadd=0x01;
1801   2        }
1802   1      
1803   1      //lineadd_dop=EDATA1;
1804   1      
1805   1       aktiv=0;
1806   1       if (EDATA3==0)
1807   1        aktiv=1;
1808   1      
1809   1       //aktiv=1;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 45  

1810   1      
1811   1      /*
1812   1      lineaddo=EDATA2;
1813   1      if (lineaddo==0xFF)
1814   1        {lineaddo=0xBF;}
1815   1      
1816   1      */
1817   1      
1818   1      v_rgr=0;
1819   1      if (EDATA4==0x04)
1820   1        {v_rgr=1;}       // obem rgr 4 bytes
1821   1      
1822   1      
1823   1       FUM_Epr_Rd((FILT_RELE -0x100)>>2);
1824   1       
1825   1        POR_R1_ON=EDATA1;
1826   1        POR_R1_OFF=EDATA2;
1827   1       if (POR_R1_ON>=POR_R1_OFF)
1828   1        {POR_R1_OFF=10;POR_R1_ON=3;}
1829   1      
1830   1      
1831   1        POR_R2_ON=EDATA3;
1832   1        POR_R2_OFF=EDATA4;
1833   1       if (POR_R2_ON>=POR_R2_OFF)
1834   1          {POR_R2_OFF=10;POR_R2_ON=3;}
1835   1      
1836   1      
1837   1      // начало чтения 3 страницы для заполнения структуры для реагирования на пакеты от БО
1838   1        FUM_Epr_Rd((ARD_STR_PAKET_BO -0x100)>>2);
1839   1      
1840   1        paket_BO.linaddr_BO=EDATA1;
1841   1        
1842   1        if (paket_BO.linaddr_BO!=0xFF)
1843   1        {
1844   2          unsigned char off=0;
1845   2          lineadd_dop=paket_BO.linaddr_BO;
1846   2        //  while (EDATA1!=0xFF)
1847   2          for(off=1;off<13;off++)  
1848   2          {
1849   3            FUM_Epr_Rd(((ARD_STR_PAKET_BO+0x10*off) -0x100)>>2);
1850   3            switch (EDATA1)  //
1851   3            {
1852   4              case 1: //    реле 1
1853   4                  {
1854   5                    paket_BO.off_rele1=(EDATA2>>3)+7;
1855   5                    break;
1856   5                  }
1857   4              case 2: //    реле 2
1858   4                  {
1859   5                    paket_BO.off_rele2=(EDATA2>>3)+7;
1860   5                    break;
1861   5                  }
1862   4              case 0xCC: //    цап
1863   4                  {
1864   5                    paket_BO.off_dac=(EDATA2>>3)+6;
1865   5                    break;
1866   5                  }
1867   4            }
1868   3          }
1869   2        }
1870   1        
1871   1      // конец чтения 3 страницы для заполнения структуры для реагирования на пакеты от БО
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 46  

1872   1      
1873   1        for(i1=0;i1<DLINA_RELE_PRIEM;i1++)  
1874   1        {
1875   2          FUM_Epr_Rd(((ARD_BEGIN_RELE_PRIEM+0x10*i1 )-0x100)>>2);
1876   2          if (EDATA1!=0xFF)
1877   2          {   
1878   3            rele_prin[i1].linaddr=EDATA1;
1879   3            rele_prin[i1].off=EDATA2;
1880   3            rele_prin[i1].ustavka1=EDATA3;
1881   3            rele_prin[i1].ustavka1<<=8;
1882   3            rele_prin[i1].ustavka1+=EDATA4;
1883   3            
1884   3            
1885   3            FUM_Epr_Rd(((ARD_BEGIN_RELE_PRIEM+0x10*i1+4 )-0x100)>>2);
1886   3            rele_prin[i1].ustavka2=EDATA1;
1887   3            rele_prin[i1].ustavka2<<=8;
1888   3            rele_prin[i1].ustavka2+=EDATA2;
1889   3            
1890   3          }
1891   2        }
1892   1      
1893   1      ob_par=0x00;  
1894   1      
1895   1      TH1=R_INT_TMR1_H;
1896   1      TL1=R_INT_TMR1_L;
1897   1      
1898   1      OGR_UR=0;
1899   1        for(i1=0;i1<13;i1++)
1900   1          {
1901   2           if (Str_CH_A[i1].NAME_PAR!=0xFF)
1902   2           {
1903   3             if (Str_CH_A[i1].R_IZM==0x84)    // канал 2 режим 84
1904   3             {  H2= Str_CH_A[i1].KF_WIND;
1905   4              H2=H2*400; 
1906   4              if (nas1==1)
1907   4                nas1=i1;
1908   4             }
1909   3        
1910   3             if (Str_CH_A[i1].R_IZM==0x88)     // канал 1 режим 88
1911   3             {  H1= Str_CH_A[i1].KF_WIND;
1912   4              H1=H1*400; 
1913   4              if (nas2==1)
1914   4                nas2=i1;
1915   4             }
1916   3        
1917   3             if  (Str_CH_A[i1].R_IZM==0x60)
1918   3             {
1919   4               OGR_UR=Str_CH_A[i1].NA_P5;
1920   4             }
1921   3        
1922   3             if  ((Str_CH_A[i1].NA_P5&0x0F)==0x05)
1923   3              if ((Str_CH_A[i1].Frm_Dat&0x10)==0x10)
1924   3                fl_rgr=1;
1925   3              else
1926   3                fl_rgr=0; 
1927   3          }
1928   2        }
1929   1      
1930   1      
1931   1      
1932   1        for(i1=0;i1<13;i1++)
1933   1          { Str_CH_A[i1].KF_WIND=0xFF;
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 47  

1934   2        }
1935   1      
1936   1        j=0;
1937   1        for(i1=0;i1<13;i1++)
1938   1          { if (Str_CH_A[i1].NAME_PAR!=0xFF)
1939   2          {
1940   3            
1941   3          
1942   3          Str_CH_A[i1].KF_WIND=0xFF;  
1943   3          for(j1=0;j1<21;j1++)
1944   3          {
1945   4           if (Str_TDAT[j1].NAME_PAR!=0xFF)
1946   4             if (Str_TDAT[j1].NAME_PAR==Str_CH_A[i1].NAME_PAR) 
1947   4             {
1948   5                 Str_CH_A[i1].KF_WIND=Str_TDAT[j1].ADR_RZ;
1949   5                 break; 
1950   5             }
1951   4          }
1952   3          }
1953   2        }
1954   1      
1955   1      napr=0;
1956   1      
1957   1      setup_ADC();
1958   1      
1959   1      copy_p=P0;
1960   1      if ((copy_p&MM[0])==MM[0])  {d1=1;} else {d1=0;}
1961   1      if ((copy_p&MM[6])==MM[6])  {d2=1;} else {d2=0;}
1962   1      d11=d1;
1963   1      d22=d2;
1964   1      
1965   1      
1966   1      
1967   1      
1968   1      
1969   1      rez=1;
1970   1      task_3(0);
1971   1      rez=0;
1972   1      WK_1=0;
1973   1      WKs=0;
1974   1      copy_dol=cnt_dol;
1975   1      //ADCMODE|=0x20;
1976   1      
1977   1      TR1=0;
1978   1      TL1 = R_INT_TMR1_L;//0xC4;//-200;
1979   1      TH1 = R_INT_TMR1_H;//-1;
1980   1      TF1=0;
1981   1      ET1=1;
1982   1      TR1=1;
1983   1      EA = 1;
1984   1      PS=1;
1985   1      EADC=1;
1986   1      // задержка
1987   1        while (kol_c<65000)
1988   1          kol_c++;
1989   1      
1990   1            st_ser=5;
1991   1          ES=1;
1992   1      //    aktiv=0;
1993   1      
1994   1      /*   Str_CH_A[N_K].N_RAZ;
1995   1             tmadc=TAB_ADC[tmadc1&0x03][tmadc1>>2];
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 48  

1996   1           
1997   1             tmadc1=(P2&0x57)|(tmadc&0xB8);
1998   1             P2 =tmadc1;
1999   1      
2000   1             SF=bx_sf1;
2001   1             ADC0CON2 = BX_RF | (tmadc>>8); 
2002   1             ADCMODE = BX_MD; //старт ацп 
2003   1             */   
2004   1      zz1:
2005   1      
2006   1       if (!fl_rest)
2007   1        {
2008   2      
2009   2        if (!PLLCON&0x40)
2010   2          b_err_p++;
2011   2         EA = 0; 
2012   2          WDWR=1;WDCON=0x32;   // 0x32 = 125 ms   0x52= 500 ms
2013   2         EA = 1;
2014   2      
2015   2        }
2016   1      
2017   1       if (b_err_p>100)
2018   1        mi11=60;
2019   1      
2020   1       if (b_err_cl>100)
2021   1        mi11=10;
2022   1      
2023   1        if (b_err_pit>100)
2024   1        mi11=0;
2025   1      
2026   1        mi1++;
2027   1        if (mi1>=mi11)
2028   1          { if (ep2==1)
2029   2          if (fl_sv)
2030   2            svet^=1;
2031   2          mi1=0;
2032   2        }
2033   1      
2034   1      
2035   1      
2036   1        /*
2037   1        if (par==0)
2038   1        {
2039   1         //  отличие от всех прошивок - кнопки находятся тут!
2040   1      
2041   1          if ((!fl_tadc)&(KOL==16))
2042   1          { xdata unsigned char i1,tmp_ch;
2043   1            for (i1=0;i1<8;i1++)
2044   1            {                                                            
2045   1               tmp_ch=Str_CH_A[i1].R_IZM;
2046   1                if((tmp_ch!=0x84)&(tmp_ch!=0x88)&(tmp_ch!=0x8C)&(tmp_ch!=0x50)&(tmp_ch!=0xFF)&(tmp_ch!=0xCC))
2047   1              {
2048   1                if (BUF_MN[i1]<1048560)
2049   1                {
2050   1                  BUF_T[i1]=BUF_MN[i1]>>4;            
2051   1                    BUF_MN[i1]=0;
2052   1                }
2053   1                else
2054   1                  BUF_T[i1]=0xffff;                          
2055   1              }
2056   1            }  
2057   1          // проверка кнопок
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 49  

2058   1           
2059   1             WK_1=0;
2060   1              for(tmp_ch=1;tmp_ch<9;tmp_ch++)
2061   1              {  xdata unsigned char c_P00;
2062   1               WK_1=WK_1>>1;     
2063   1               P2 = P2&0x57;
2064   1              P2 = P2|(TAB_ADC[2][tmp_ch]&0xB8); //aua?aou ioeuoeieaeni?u (ii?o ?2.5,7,3)
2065   1              P2 = (P2&0x57)|(TAB_ADC[2][tmp_ch]&0xB8);
2066   1              c_P00=P0;
2067   1              WK_1=WK_1 |((c_P00&0x04)<<5);
2068   1              }
2069   1               WK_1=~WK_1;
2070   1           
2071   1            
2072   1            tmp_ch= Str_CH_A[0].N_RAZ;
2073   1            i1=TAB_ADC[tmp_ch&0x03][tmp_ch>>2];
2074   1            tmp_ch=(P2&0x57)|(i1&0xB8);
2075   1            P2 =tmp_ch;
2076   1            SF=bx_sf1;
2077   1            ADC0CON2 = BX_RF | (i1>>8); 
2078   1            ADCMODE = BX_MD; //старт ацп 
2079   1         
2080   1            KOL=0;
2081   1            fl_tadc=1;  
2082   1          } 
2083   1        }
2084   1      
2085   1        */ 
2086   1       
2087   1       if (par==10)
2088   1       {
2089   2       // zad=80;     // на общий 20 мс
2090   2        zad=37;
2091   2      
2092   2        for (i1=0;i1<7;i1++)
2093   2        { 
2094   3        if (BUF_vr[i1]<1048560)
2095   3        {
2096   4        
2097   4          BUF_T[i1]=BUF_vr[i1]>>2;          
2098   4        }
2099   3        else
2100   3          BUF_T[i1]=0xffff; 
2101   3        }                        
2102   2       
2103   2      
2104   2        for (i1=0;i1<11;i1++)
2105   2        {
2106   3          task_3(i1);
2107   3        }
2108   2      }
2109   1       else
2110   1      //  zad=32;     // на каналы по 8 мс    а нужно по 9,1
2111   1        zad=37;
2112   1        if (int0)
2113   1        {
2114   2          //  task_3(par);
2115   2          par++;
2116   2        }
2117   1        else
2118   1          b_err_pit++;
2119   1      
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 50  

2120   1      
2121   1      
2122   1              if (Eprom_ch==1)
2123   1            {
2124   2              data unsigned char j4;
2125   2              ES=0;
2126   2                  if ((cmd ==2)&(int0))
2127   2                {
2128   3                  for (j4=0;j4<len_o;j4++)
2129   3                    {    
2130   4                    EADRH=ED>>0x0A;
2131   4                    EADRL=ED>>2;
2132   4                //    TR1=0;  
2133   4                    ECON=0x01;  
2134   4                //    TR1=1;
2135   4          
2136   4                        if ((j4<len_o)&((ED&0x03)==0))
2137   4                      {bufout[j4+6]=EDATA1;ED++; j4++;}
2138   4                  
2139   4                    if ((j4<len_o)&((ED&0x03)==0x01))
2140   4                      {bufout[j4+6]=EDATA2;ED++; j4++;}
2141   4                  
2142   4                    if ((j4<len_o)&((ED&0x03)==0x02))
2143   4                      {bufout[j4+6]=EDATA3;ED++; j4++;}
2144   4                   
2145   4                    if ((j4<len_o)&((ED&0x03)==0x03))
2146   4                      {bufout[j4+6]=EDATA4;ED++; j4++;}
2147   4                    j4--;
2148   4                  }
2149   3                  len_o =len_o+6;
2150   3                  tmo=TM_LINE+TM_LINE; 
2151   3                  WR=1;
2152   3                  st_ser=20;
2153   3                  bufout[2]=len_o+1; 
2154   3            }
2155   2            else 
2156   2              st_ser=10;
2157   2              Eprom_ch=0;
2158   2              ES=1;
2159   2            }
2160   1      
2161   1              if (Eprom_zap==1)
2162   1            {
2163   2              data unsigned char i1;
2164   2              ES=0;
2165   2                  if ((cmd ==1)&(int0))
2166   2                  {  
2167   3                   if (len_o!=Len_p-7)
2168   3                    {st_ser=10; goto kon1;}
2169   3      
2170   3                  for (i1=0;i1<len_o;i1++)
2171   3                    {   
2172   4                    EADRH=ED>>0x0A;
2173   4                    EADRL=ED>>2;
2174   4      
2175   4                          ECON=0x01;
2176   4      
2177   4                    if ((i1<len_o)&((ED&0x03)==0))
2178   4                      {EDATA1=zbuf[6+i1]; ED++; i1++;
2179   5                      }
2180   4                    
2181   4                    if ((i1<len_o)&((ED&0x03)==0x01))
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 51  

2182   4                      {EDATA2=zbuf[6+i1];ED++; i1++;
2183   5                      }
2184   4      
2185   4                    if ((i1<len_o)&((ED&0x03)==0x02))
2186   4                      {EDATA3=zbuf[6+i1];ED++; i1++;
2187   5                      }
2188   4      
2189   4                    if ((i1<len_o)&((ED&0x03)==0x03))
2190   4                      {EDATA4=zbuf[6+i1];ED++; i1++;
2191   5                      }
2192   4                    i1--;
2193   4                    TR1=0;  
2194   4                    ECON=0x05;
2195   4                    TR1=1;
2196   4                    TR1=0;
2197   4                    ECON=0x02;
2198   4                    TR1=1;
2199   4                  }             
2200   3                  st_ser=10;
2201   3                }
2202   2      
2203   2                if ((cmd ==3)&(int0))
2204   2                {
2205   3                   
2206   3                   if (len_o!=Len_p-7)
2207   3                    {st_ser=10; goto kon1;}
2208   3                  
2209   3                  for (i1=0;i1<len_o;i1++)
2210   3                    {    
2211   4                    EADRH=ED>>0x0A;
2212   4                    EADRL=ED>>2;
2213   4                    ECON=0x01;  
2214   4                        if ((i1<len_o)&((ED&0x03)==0))
2215   4                      {EDATA1=zbuf[6+i1]; bufout[6+i1]=zbuf[6+i1]; ED++; i1++;}
2216   4                    
2217   4                    if ((i1<len_o)&((ED&0x03)==0x01))
2218   4                      {EDATA2=zbuf[6+i1];bufout[6+i1]=zbuf[6+i1];ED++; i1++;}
2219   4      
2220   4                    if ((i1<len_o)&((ED&0x03)==0x02))
2221   4                      {EDATA3=zbuf[6+i1];bufout[6+i1]=zbuf[6+i1];ED++; i1++;}
2222   4      
2223   4                    if ((i1<len_o)&((ED&0x03)==0x03))
2224   4                      {EDATA4=zbuf[6+i1];bufout[6+i1]=zbuf[6+i1];ED++; i1++;}
2225   4                    i1--;
2226   4                    TR1=0;
2227   4                    ECON=0x05;
2228   4                    TR1=1;
2229   4                    TR1=0;
2230   4                    ECON=0x02;
2231   4                    TR1=1;
2232   4      
2233   4                  }
2234   3      
2235   3              ECON=0x04;
2236   3              if (ECON==0)
2237   3              {
2238   4                    len_o =len_o+6; 
2239   4                  tmo=TM_LINE+TM_LINE; 
2240   4                  WR=1;
2241   4                  st_ser=20;
2242   4                  bufout[2]=len_o+1; 
2243   4              }
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 52  

2244   3              else
2245   3                 st_ser=10;
2246   3            }
2247   2          kon1: 
2248   2           Eprom_zap=0;
2249   2           ES=1;
2250   2      //     kol_e--;
2251   2           }
2252   1      
2253   1      
2254   1      
2255   1       if (par==11)
2256   1       {//  idata unsigned char j3;
2257   2       
2258   2        par=0; 
2259   2      
2260   2        if (MIN%10==0)
2261   2        {
2262   3          if (fl_kal==30)
2263   3            fl_kal=10;
2264   3        }
2265   2        if (MIN%10==9)
2266   2        {
2267   3          if (fl_kal==0)
2268   3              fl_kal=30;
2269   3        }
2270   2      /*  
2271   2        if (fl_kal==10)
2272   2        { idata unsigned long tmp_ln;
2273   2          extern idata unsigned long PNT_BUF_TD;
2274   2      
2275   2           fl_kal=0;
2276   2          while(RDY0 ==0); 
2277   2          tmp_ln=PNT_BUF_TD; 
2278   2          RDY0 = 0;   
2279   2          ADCMODE = 0x24;//калибровка 0
2280   2          while(RDY0 ==0);  
2281   2          RDY0 = 0; 
2282   2          ADCMODE = 0x25;  //калибровка 1
2283   2          while(RDY0 ==0);  
2284   2          PNT_BUF_TD=tmp_ln;
2285   2        }
2286   2       */
2287   2        ES=0;
2288   2        lbuf_cop();
2289   2        fl_buf=1;
2290   2        ES=1;
2291   2      
2292   2      //  status=lineadd;
2293   2      //  status=paket;
2294   2      
2295   2      
2296   2      /* начало выдачи пакета в активном режиме  */
2297   2      chp++;
2298   2         
2299   2       
2300   2      
2301   2      if (chp>0) {
2302   3      chp=1;
2303   3      
2304   3      
2305   3        if (st_ser==5)  {
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 53  

2306   4      
2307   4      /*    else
2308   4        */
2309   4            if (aktiv)  
2310   4            {// aktiv=0;    
2311   5              st_ser=40;
2312   5              WR=1;
2313   5              cmd=2;
2314   5              len_o=26;
2315   5              for(i=0;i<len_o;i++)  {
2316   6                bufout[i+6] =lbuf_dn[i];} 
2317   5              zbuf[0]=0x7e;             
2318   5              zbuf[1]=lineadd|0x80;
2319   5            //  zbuf[1]=0x81;
2320   5              zbuf[2]=7;
2321   5              zbuf[3]=2;
2322   5              zbuf[4]=0;
2323   5              zbuf[5]=len_o;
2324   5                 
2325   5                len_o=len_o+6;  
2326   5            //  tmo=TM_LINE+TM_LINE;
2327   5            //  st_ser=20;
2328   5              bufout[2]=len_o+1; 
2329   5              nro=1;
2330   5              SBUF=0x7E;
2331   5            }   
2332   4         
2333   4        }
2334   3      }
2335   2      
2336   2      
2337   2      /* конец выдачи пакета в активном режиме  */
2338   2      
2339   2        if (kol_cik<=50)
2340   2          kol_cik++;
2341   2        
2342   2        if (kol_cik>50)
2343   2        { fl_sv=1;
2344   3      
2345   3        }
2346   2       }
2347   1       // P2=P2|0x10;
2348   1      
2349   1       
2350   1        while (zad!=0)
2351   1       {
2352   2        }
2353   1       
2354   1      
2355   1       goto zz1;                   
2356   1       }   
2357           
2358          // *************return paket *******************
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 54  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION timer1int (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D008            MOV     PSW,#08H
                                           ; SOURCE LINE # 303
                                           ; SOURCE LINE # 319
000D C28F              CLR     TF1
                                           ; SOURCE LINE # 320
000F 758DF3            MOV     TH1,#0F3H
                                           ; SOURCE LINE # 321
0012 758BD2            MOV     TL1,#0D2H
                                           ; SOURCE LINE # 323
0015 850000      R     MOV     copy_p1,copy_p
0018 850000      R     MOV     copy_p1+01H,copy_p+01H
                                           ; SOURCE LINE # 324
001B AF80              MOV     R7,P0
001D 7E00              MOV     R6,#00H
001F 8E00        R     MOV     copy_p,R6
0021 8F00        R     MOV     copy_p+01H,R7
                                           ; SOURCE LINE # 325
0023 7800        R     MOV     R0,#LOW rasx2_t
0025 120000      E     LCALL   ?C?LLDIDATA
0028 7B01              MOV     R3,#01H
002A 7A00              MOV     R2,#00H
002C 7900              MOV     R1,#00H
002E 7800              MOV     R0,#00H
0030 EF                MOV     A,R7
0031 2B                ADD     A,R3
0032 FF                MOV     R7,A
0033 EE                MOV     A,R6
0034 3A                ADDC    A,R2
0035 FE                MOV     R6,A
0036 ED                MOV     A,R5
0037 39                ADDC    A,R1
0038 FD                MOV     R5,A
0039 EC                MOV     A,R4
003A 38                ADDC    A,R0
003B FC                MOV     R4,A
003C 7800        R     MOV     R0,#LOW rasx2_t
003E 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 326
0041 7800        R     MOV     R0,#LOW rasx1_t
0043 120000      E     LCALL   ?C?LLDIDATA
0046 7B01              MOV     R3,#01H
0048 7A00              MOV     R2,#00H
004A 7900              MOV     R1,#00H
004C 7800              MOV     R0,#00H
004E EF                MOV     A,R7
004F 2B                ADD     A,R3
0050 FF                MOV     R7,A
0051 EE                MOV     A,R6
0052 3A                ADDC    A,R2
0053 FE                MOV     R6,A
0054 ED                MOV     A,R5
0055 39                ADDC    A,R1
0056 FD                MOV     R5,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 55  

0057 EC                MOV     A,R4
0058 38                ADDC    A,R0
0059 FC                MOV     R4,A
005A 7800        R     MOV     R0,#LOW rasx1_t
005C 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 337
005F 7800        R     MOV     R0,#LOW CNT_SEC_V1+01H
0061 06                INC     @R0
0062 E6                MOV     A,@R0
0063 18                DEC     R0
0064 7001              JNZ     ?C0713
0066 06                INC     @R0
0067         ?C0713:
                                           ; SOURCE LINE # 338
0067 E500        R     MOV     A,nas2
0069 64FF              XRL     A,#0FFH
006B 604B              JZ      ?C0001
                                           ; SOURCE LINE # 339
                                           ; SOURCE LINE # 340
006D 7800        R     MOV     R0,#LOW CNT_SEC_V1
006F E6                MOV     A,@R0
0070 FE                MOV     R6,A
0071 08                INC     R0
0072 E6                MOV     A,@R0
0073 FF                MOV     R7,A
0074 EF                MOV     A,R7
0075 6490              XRL     A,#090H
0077 7003              JNZ     ?C0714
0079 EE                MOV     A,R6
007A 6401              XRL     A,#01H
007C         ?C0714:
007C 7053              JNZ     ?C0003
                                           ; SOURCE LINE # 341
                                           ; SOURCE LINE # 343
007E 7800        E     MOV     R0,#LOW CMRX1_K2
0080 120000      E     LCALL   ?C?LLDIDATA
0083 AB00        R     MOV     R3,nas2
0085 EB                MOV     A,R3
0086 25E0              ADD     A,ACC
0088 25E0              ADD     A,ACC
008A 2400        E     ADD     A,#LOW BUF_FP
008C F582              MOV     DPL,A
008E E4                CLR     A
008F 3400        E     ADDC    A,#HIGH BUF_FP
0091 F583              MOV     DPH,A
0093 E0                MOVX    A,@DPTR
0094 F8                MOV     R0,A
0095 A3                INC     DPTR
0096 E0                MOVX    A,@DPTR
0097 F9                MOV     R1,A
0098 A3                INC     DPTR
0099 E0                MOVX    A,@DPTR
009A FA                MOV     R2,A
009B A3                INC     DPTR
009C E0                MOVX    A,@DPTR
009D FB                MOV     R3,A
009E EF                MOV     A,R7
009F 2B                ADD     A,R3
00A0 FF                MOV     R7,A
00A1 EE                MOV     A,R6
00A2 3A                ADDC    A,R2
00A3 FE                MOV     R6,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 56  

00A4 ED                MOV     A,R5
00A5 39                ADDC    A,R1
00A6 FD                MOV     R5,A
00A7 EC                MOV     A,R4
00A8 38                ADDC    A,R0
00A9 FC                MOV     R4,A
00AA 7800        E     MOV     R0,#LOW CMRX1_K2
00AC 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 344
00AF 7800        R     MOV     R0,#LOW CNT_SEC_V1
00B1 7600              MOV     @R0,#00H
00B3 08                INC     R0
00B4 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 345
00B6         ?C0002:
                                           ; SOURCE LINE # 346
00B6 8019              SJMP    ?C0003
00B8         ?C0001:
                                           ; SOURCE LINE # 348
00B8 7800        R     MOV     R0,#LOW CNT_SEC_V1
00BA E6                MOV     A,@R0
00BB FE                MOV     R6,A
00BC 08                INC     R0
00BD E6                MOV     A,@R0
00BE FF                MOV     R7,A
00BF D3                SETB    C
00C0 EF                MOV     A,R7
00C1 94A0              SUBB    A,#0A0H
00C3 EE                MOV     A,R6
00C4 940F              SUBB    A,#0FH
00C6 4009              JC      ?C0003
                                           ; SOURCE LINE # 349
00C8 7800        R     MOV     R0,#LOW CNT_SEC_V1
00CA 7600              MOV     @R0,#00H
00CC 08                INC     R0
00CD 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 350
00CF D200        R     SETB    FCNT_SEC_V1
                                           ; SOURCE LINE # 351
00D1         ?C0004:
00D1         ?C0003:
                                           ; SOURCE LINE # 354
00D1 7800        R     MOV     R0,#LOW CNT_SEC_V2+01H
00D3 06                INC     @R0
00D4 E6                MOV     A,@R0
00D5 18                DEC     R0
00D6 7001              JNZ     ?C0715
00D8 06                INC     @R0
00D9         ?C0715:
                                           ; SOURCE LINE # 355
00D9 E500        R     MOV     A,nas1
00DB 64FF              XRL     A,#0FFH
00DD 604B              JZ      ?C0005
                                           ; SOURCE LINE # 356
                                           ; SOURCE LINE # 357
00DF 7800        R     MOV     R0,#LOW CNT_SEC_V2
00E1 E6                MOV     A,@R0
00E2 FE                MOV     R6,A
00E3 08                INC     R0
00E4 E6                MOV     A,@R0
00E5 FF                MOV     R7,A
00E6 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 57  

00E7 6490              XRL     A,#090H
00E9 7003              JNZ     ?C0716
00EB EE                MOV     A,R6
00EC 6401              XRL     A,#01H
00EE         ?C0716:
00EE 7053              JNZ     ?C0007
                                           ; SOURCE LINE # 358
                                           ; SOURCE LINE # 360
00F0 7800        E     MOV     R0,#LOW CMRX1_K1
00F2 120000      E     LCALL   ?C?LLDIDATA
00F5 AB00        R     MOV     R3,nas1
00F7 EB                MOV     A,R3
00F8 25E0              ADD     A,ACC
00FA 25E0              ADD     A,ACC
00FC 2400        E     ADD     A,#LOW BUF_FP
00FE F582              MOV     DPL,A
0100 E4                CLR     A
0101 3400        E     ADDC    A,#HIGH BUF_FP
0103 F583              MOV     DPH,A
0105 E0                MOVX    A,@DPTR
0106 F8                MOV     R0,A
0107 A3                INC     DPTR
0108 E0                MOVX    A,@DPTR
0109 F9                MOV     R1,A
010A A3                INC     DPTR
010B E0                MOVX    A,@DPTR
010C FA                MOV     R2,A
010D A3                INC     DPTR
010E E0                MOVX    A,@DPTR
010F FB                MOV     R3,A
0110 EF                MOV     A,R7
0111 2B                ADD     A,R3
0112 FF                MOV     R7,A
0113 EE                MOV     A,R6
0114 3A                ADDC    A,R2
0115 FE                MOV     R6,A
0116 ED                MOV     A,R5
0117 39                ADDC    A,R1
0118 FD                MOV     R5,A
0119 EC                MOV     A,R4
011A 38                ADDC    A,R0
011B FC                MOV     R4,A
011C 7800        E     MOV     R0,#LOW CMRX1_K1
011E 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 361
0121 7800        R     MOV     R0,#LOW CNT_SEC_V2
0123 7600              MOV     @R0,#00H
0125 08                INC     R0
0126 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 362
0128         ?C0006:
                                           ; SOURCE LINE # 363
0128 8019              SJMP    ?C0007
012A         ?C0005:
                                           ; SOURCE LINE # 365
012A 7800        R     MOV     R0,#LOW CNT_SEC_V2
012C E6                MOV     A,@R0
012D FE                MOV     R6,A
012E 08                INC     R0
012F E6                MOV     A,@R0
0130 FF                MOV     R7,A
0131 D3                SETB    C
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 58  

0132 EF                MOV     A,R7
0133 94A0              SUBB    A,#0A0H
0135 EE                MOV     A,R6
0136 940F              SUBB    A,#0FH
0138 4009              JC      ?C0007
                                           ; SOURCE LINE # 366
013A 7800        R     MOV     R0,#LOW CNT_SEC_V2
013C 7600              MOV     @R0,#00H
013E 08                INC     R0
013F 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 367
0141 D200        R     SETB    FCNT_SEC_V2
                                           ; SOURCE LINE # 368
0143         ?C0008:
0143         ?C0007:
                                           ; SOURCE LINE # 370
0143 7800        R     MOV     R0,#LOW MM+02H
0145 E6                MOV     A,@R0
0146 FF                MOV     R7,A
0147 EF                MOV     A,R7
0148 7003              JNZ     $ + 5H
014A 020000      R     LJMP    ?C0009
                                           ; SOURCE LINE # 371
                                           ; SOURCE LINE # 373
014D 7800        R     MOV     R0,#LOW MM+02H
014F E6                MOV     A,@R0
0150 FF                MOV     R7,A
0151 7E00              MOV     R6,#00H
0153 EE                MOV     A,R6
0154 5500        R     ANL     A,copy_p
0156 FE                MOV     R6,A
0157 EF                MOV     A,R7
0158 5500        R     ANL     A,copy_p+01H
015A FF                MOV     R7,A
015B 7800        R     MOV     R0,#LOW MM+02H
015D E6                MOV     A,@R0
015E FD                MOV     R5,A
015F 7C00              MOV     R4,#00H
0161 EF                MOV     A,R7
0162 6D                XRL     A,R5
0163 7002              JNZ     ?C0717
0165 EE                MOV     A,R6
0166 6C                XRL     A,R4
0167         ?C0717:
0167 7004              JNZ     ?C0011
0169 7F01              MOV     R7,#01H
016B 8002              SJMP    ?C0012
016D         ?C0011:
016D 7F00              MOV     R7,#00H
016F         ?C0012:
016F 7800        R     MOV     R0,#LOW MM+02H
0171 E6                MOV     A,@R0
0172 FE                MOV     R6,A
0173 EE                MOV     A,R6
0174 FD                MOV     R5,A
0175 7C00              MOV     R4,#00H
0177 EC                MOV     A,R4
0178 5500        R     ANL     A,copy_p1
017A FC                MOV     R4,A
017B ED                MOV     A,R5
017C 5500        R     ANL     A,copy_p1+01H
017E FD                MOV     R5,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 59  

017F 7800        R     MOV     R0,#LOW MM+02H
0181 E6                MOV     A,@R0
0182 FE                MOV     R6,A
0183 EE                MOV     A,R6
0184 FB                MOV     R3,A
0185 7A00              MOV     R2,#00H
0187 ED                MOV     A,R5
0188 6B                XRL     A,R3
0189 7002              JNZ     ?C0718
018B EC                MOV     A,R4
018C 6A                XRL     A,R2
018D         ?C0718:
018D 6004              JZ      ?C0013
018F 7E01              MOV     R6,#01H
0191 8002              SJMP    ?C0014
0193         ?C0013:
0193 7E00              MOV     R6,#00H
0195         ?C0014:
0195 EE                MOV     A,R6
0196 5F                ANL     A,R7
0197 FF                MOV     R7,A
0198 EF                MOV     A,R7
0199 7003              JNZ     $ + 5H
019B 020000      R     LJMP    ?C0010
                                           ; SOURCE LINE # 374
                                           ; SOURCE LINE # 376
019E 0500        R     INC     bufcht1+01H
01A0 E500        R     MOV     A,bufcht1+01H
01A2 7002              JNZ     ?C0719
01A4 0500        R     INC     bufcht1
01A6         ?C0719:
                                           ; SOURCE LINE # 377
01A6 20001C      R     JB      fl_m2,?C0015
                                           ; SOURCE LINE # 378
                                           ; SOURCE LINE # 379
01A9 D200        R     SETB    fl_m2
                                           ; SOURCE LINE # 380
01AB 750000      R     MOV     bufcht1,#00H
01AE 750000      R     MOV     bufcht1+01H,#00H
01B1 C200        R     CLR     fl_r22
01B3 7800        R     MOV     R0,#LOW rasx2_t
01B5 120000      E     LCALL   ?C?LSTKIDATA
01B8 00                DB      00H
01B9 00                DB      00H
01BA 00                DB      00H
01BB 00                DB      00H
01BC 7800        R     MOV     R0,#LOW rasx2
01BE 120000      E     LCALL   ?C?LSTKIDATA
01C1 00                DB      00H
01C2 00                DB      00H
01C3 00                DB      00H
01C4 00                DB      00H
                                           ; SOURCE LINE # 381
01C5         ?C0015:
                                           ; SOURCE LINE # 383
01C5 7F00              MOV     R7,#00H
01C7 7E00              MOV     R6,#00H
01C9 7D00              MOV     R5,#00H
01CB 7C00              MOV     R4,#00H
01CD AB00        R     MOV     R3,H2+03H
01CF AA00        R     MOV     R2,H2+02H
01D1 A900        R     MOV     R1,H2+01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 60  

01D3 A800        R     MOV     R0,H2
01D5 C3                CLR     C
01D6 120000      E     LCALL   ?C?ULCMP
01D9 604B              JZ      ?C0016
                                           ; SOURCE LINE # 384
01DB AF00        R     MOV     R7,H2+03H
01DD AE00        R     MOV     R6,H2+02H
01DF AD00        R     MOV     R5,H2+01H
01E1 AC00        R     MOV     R4,H2
01E3 7800        R     MOV     R0,#LOW rasx2_t
01E5 120000      E     LCALL   ?C?LLDIDATA0
01E8 D3                SETB    C
01E9 120000      E     LCALL   ?C?ULCMP
01EC 4023              JC      ?C0017
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 386
01EE D200        R     SETB    fl_r22
                                           ; SOURCE LINE # 387
01F0 850000      R     MOV     cop_imp2,bufcht1
01F3 850000      R     MOV     cop_imp2+01H,bufcht1+01H
                                           ; SOURCE LINE # 388
01F6 7800        R     MOV     R0,#LOW rasx2_t
01F8 120000      E     LCALL   ?C?LLDIDATA
01FB 7800        R     MOV     R0,#LOW rasx2
01FD 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 389
0200 7800        R     MOV     R0,#LOW rasx2_t
0202 120000      E     LCALL   ?C?LSTKIDATA
0205 00                DB      00H
0206 00                DB      00H
0207 00                DB      00H
0208 00                DB      00H
                                           ; SOURCE LINE # 390
0209 750000      R     MOV     bufcht1,#00H
020C 750000      R     MOV     bufcht1+01H,#00H
                                           ; SOURCE LINE # 391
020F 8034              SJMP    ?C0010
0211         ?C0017:
                                           ; SOURCE LINE # 393
0211 200031      R     JB      fl_r22,?C0010
                                           ; SOURCE LINE # 394
                                           ; SOURCE LINE # 395
0214 850000      R     MOV     cop_imp2,bufcht1
0217 850000      R     MOV     cop_imp2+01H,bufcht1+01H
                                           ; SOURCE LINE # 396
021A 7800        R     MOV     R0,#LOW rasx2_t
021C 120000      E     LCALL   ?C?LLDIDATA
021F 7800        R     MOV     R0,#LOW rasx2
0221 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 397
0224         ?C0019:
0224         ?C0018:
                                           ; SOURCE LINE # 399
0224 801F              SJMP    ?C0010
0226         ?C0016:
                                           ; SOURCE LINE # 401
                                           ; SOURCE LINE # 402
0226 850000      R     MOV     cop_imp2,bufcht1
0229 850000      R     MOV     cop_imp2+01H,bufcht1+01H
                                           ; SOURCE LINE # 403
022C 7800        R     MOV     R0,#LOW rasx2_t
022E 120000      E     LCALL   ?C?LLDIDATA
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 61  

0231 7800        R     MOV     R0,#LOW rasx2
0233 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 404
0236 7800        R     MOV     R0,#LOW rasx2_t
0238 120000      E     LCALL   ?C?LSTKIDATA
023B 00                DB      00H
023C 00                DB      00H
023D 00                DB      00H
023E 00                DB      00H
                                           ; SOURCE LINE # 405
023F 750000      R     MOV     bufcht1,#00H
0242 750000      R     MOV     bufcht1+01H,#00H
                                           ; SOURCE LINE # 407
0245         ?C0020:
                                           ; SOURCE LINE # 408
0245         ?C0010:
                                           ; SOURCE LINE # 411
0245 AE00        R     MOV     R6,cop_imp2
0247 AF00        R     MOV     R7,cop_imp2+01H
0249 E4                CLR     A
024A FC                MOV     R4,A
024B FD                MOV     R5,A
024C EC                MOV     A,R4
024D C0E0              PUSH    ACC
024F ED                MOV     A,R5
0250 C0E0              PUSH    ACC
0252 EE                MOV     A,R6
0253 C0E0              PUSH    ACC
0255 EF                MOV     A,R7
0256 C0E0              PUSH    ACC
0258 7800        R     MOV     R0,#LOW rasx2
025A 120000      E     LCALL   ?C?LLDIDATA
025D D0E0              POP     ACC
025F FB                MOV     R3,A
0260 D0E0              POP     ACC
0262 FA                MOV     R2,A
0263 D0E0              POP     ACC
0265 F9                MOV     R1,A
0266 D0E0              POP     ACC
0268 F8                MOV     R0,A
0269 120000      E     LCALL   ?C?ULDIV
026C 7801              MOV     R0,#01H
026E 120000      E     LCALL   ?C?LSHL
0271 EF                MOV     A,R7
0272 2500        R     ADD     A,H2+03H
0274 FF                MOV     R7,A
0275 EE                MOV     A,R6
0276 3500        R     ADDC    A,H2+02H
0278 FE                MOV     R6,A
0279 ED                MOV     A,R5
027A 3500        R     ADDC    A,H2+01H
027C FD                MOV     R5,A
027D EC                MOV     A,R4
027E 3500        R     ADDC    A,H2
0280 FC                MOV     R4,A
0281 7800        R     MOV     R0,#LOW rasx2_t
0283 120000      E     LCALL   ?C?LLDIDATA0
0286 D3                SETB    C
0287 120000      E     LCALL   ?C?ULCMP
028A 400A              JC      ?C0021
                                           ; SOURCE LINE # 412
                                           ; SOURCE LINE # 413
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 62  

028C 7800        R     MOV     R0,#LOW rasx2_t
028E 120000      E     LCALL   ?C?LLDIDATA
0291 7800        R     MOV     R0,#LOW rasx2
0293 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 414
0296         ?C0021:
                                           ; SOURCE LINE # 416
0296 7F80              MOV     R7,#080H
0298 7E38              MOV     R6,#038H
029A 7D01              MOV     R5,#01H
029C 7C00              MOV     R4,#00H
029E 7800        R     MOV     R0,#LOW rasx2_t
02A0 120000      E     LCALL   ?C?LLDIDATA0
02A3 C3                CLR     C
02A4 120000      E     LCALL   ?C?ULCMP
02A7 4020              JC      ?C0009
                                           ; SOURCE LINE # 417
                                           ; SOURCE LINE # 418
02A9 750000      R     MOV     cop_imp2,#00H
02AC 750000      R     MOV     cop_imp2+01H,#00H
                                           ; SOURCE LINE # 419
02AF 750000      R     MOV     bufcht1,#00H
02B2 750000      R     MOV     bufcht1+01H,#00H
                                           ; SOURCE LINE # 420
02B5 7800        R     MOV     R0,#LOW rasx2
02B7 120000      E     LCALL   ?C?LSTKIDATA
02BA 00                DB      00H
02BB 00                DB      00H
02BC 00                DB      00H
02BD 00                DB      00H
                                           ; SOURCE LINE # 421
02BE 7800        R     MOV     R0,#LOW rasx2_t
02C0 120000      E     LCALL   ?C?LSTKIDATA
02C3 00                DB      00H
02C4 00                DB      00H
02C5 00                DB      00H
02C6 00                DB      00H
                                           ; SOURCE LINE # 422
02C7 C200        R     CLR     fl_m2
                                           ; SOURCE LINE # 423
02C9         ?C0022:
                                           ; SOURCE LINE # 424
02C9         ?C0009:
                                           ; SOURCE LINE # 427
02C9 7800        R     MOV     R0,#LOW MM+01H
02CB E6                MOV     A,@R0
02CC FF                MOV     R7,A
02CD EF                MOV     A,R7
02CE 7003              JNZ     $ + 5H
02D0 020000      R     LJMP    ?C0023
                                           ; SOURCE LINE # 428
                                           ; SOURCE LINE # 429
02D3 7800        R     MOV     R0,#LOW MM+01H
02D5 E6                MOV     A,@R0
02D6 FF                MOV     R7,A
02D7 7E00              MOV     R6,#00H
02D9 EE                MOV     A,R6
02DA 5500        R     ANL     A,copy_p
02DC FE                MOV     R6,A
02DD EF                MOV     A,R7
02DE 5500        R     ANL     A,copy_p+01H
02E0 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 63  

02E1 7800        R     MOV     R0,#LOW MM+01H
02E3 E6                MOV     A,@R0
02E4 FD                MOV     R5,A
02E5 7C00              MOV     R4,#00H
02E7 EF                MOV     A,R7
02E8 6D                XRL     A,R5
02E9 7002              JNZ     ?C0720
02EB EE                MOV     A,R6
02EC 6C                XRL     A,R4
02ED         ?C0720:
02ED 7004              JNZ     ?C0025
02EF 7F01              MOV     R7,#01H
02F1 8002              SJMP    ?C0026
02F3         ?C0025:
02F3 7F00              MOV     R7,#00H
02F5         ?C0026:
02F5 7800        R     MOV     R0,#LOW MM+01H
02F7 E6                MOV     A,@R0
02F8 FE                MOV     R6,A
02F9 EE                MOV     A,R6
02FA FD                MOV     R5,A
02FB 7C00              MOV     R4,#00H
02FD EC                MOV     A,R4
02FE 5500        R     ANL     A,copy_p1
0300 FC                MOV     R4,A
0301 ED                MOV     A,R5
0302 5500        R     ANL     A,copy_p1+01H
0304 FD                MOV     R5,A
0305 7800        R     MOV     R0,#LOW MM+01H
0307 E6                MOV     A,@R0
0308 FE                MOV     R6,A
0309 EE                MOV     A,R6
030A FB                MOV     R3,A
030B 7A00              MOV     R2,#00H
030D ED                MOV     A,R5
030E 6B                XRL     A,R3
030F 7002              JNZ     ?C0721
0311 EC                MOV     A,R4
0312 6A                XRL     A,R2
0313         ?C0721:
0313 6004              JZ      ?C0027
0315 7E01              MOV     R6,#01H
0317 8002              SJMP    ?C0028
0319         ?C0027:
0319 7E00              MOV     R6,#00H
031B         ?C0028:
031B EE                MOV     A,R6
031C 5F                ANL     A,R7
031D FF                MOV     R7,A
031E EF                MOV     A,R7
031F 7003              JNZ     $ + 5H
0321 020000      R     LJMP    ?C0024
                                           ; SOURCE LINE # 430
                                           ; SOURCE LINE # 431
0324 0500        R     INC     bufcht1+03H
0326 E500        R     MOV     A,bufcht1+03H
0328 7002              JNZ     ?C0722
032A 0500        R     INC     bufcht1+02H
032C         ?C0722:
                                           ; SOURCE LINE # 432
032C 20001C      R     JB      fl_m1,?C0029
                                           ; SOURCE LINE # 433
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 64  

                                           ; SOURCE LINE # 434
032F D200        R     SETB    fl_m1
                                           ; SOURCE LINE # 435
0331 750000      R     MOV     bufcht1+02H,#00H
0334 750000      R     MOV     bufcht1+03H,#00H
0337 C200        R     CLR     fl_r11
0339 7800        R     MOV     R0,#LOW rasx1_t
033B 120000      E     LCALL   ?C?LSTKIDATA
033E 00                DB      00H
033F 00                DB      00H
0340 00                DB      00H
0341 00                DB      00H
0342 7800        R     MOV     R0,#LOW rasx1
0344 120000      E     LCALL   ?C?LSTKIDATA
0347 00                DB      00H
0348 00                DB      00H
0349 00                DB      00H
034A 00                DB      00H
                                           ; SOURCE LINE # 436
034B         ?C0029:
                                           ; SOURCE LINE # 438
034B 7F00              MOV     R7,#00H
034D 7E00              MOV     R6,#00H
034F 7D00              MOV     R5,#00H
0351 7C00              MOV     R4,#00H
0353 AB00        R     MOV     R3,H1+03H
0355 AA00        R     MOV     R2,H1+02H
0357 A900        R     MOV     R1,H1+01H
0359 A800        R     MOV     R0,H1
035B C3                CLR     C
035C 120000      E     LCALL   ?C?ULCMP
035F 604B              JZ      ?C0030
                                           ; SOURCE LINE # 439
                                           ; SOURCE LINE # 440
0361 AF00        R     MOV     R7,H1+03H
0363 AE00        R     MOV     R6,H1+02H
0365 AD00        R     MOV     R5,H1+01H
0367 AC00        R     MOV     R4,H1
0369 7800        R     MOV     R0,#LOW rasx1_t
036B 120000      E     LCALL   ?C?LLDIDATA0
036E D3                SETB    C
036F 120000      E     LCALL   ?C?ULCMP
0372 4023              JC      ?C0031
                                           ; SOURCE LINE # 441
                                           ; SOURCE LINE # 442
0374 D200        R     SETB    fl_r11
                                           ; SOURCE LINE # 443
0376 850000      R     MOV     cop_imp1,bufcht1+02H
0379 850000      R     MOV     cop_imp1+01H,bufcht1+03H
                                           ; SOURCE LINE # 444
037C 7800        R     MOV     R0,#LOW rasx1_t
037E 120000      E     LCALL   ?C?LLDIDATA
0381 7800        R     MOV     R0,#LOW rasx1
0383 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 445
0386 7800        R     MOV     R0,#LOW rasx1_t
0388 120000      E     LCALL   ?C?LSTKIDATA
038B 00                DB      00H
038C 00                DB      00H
038D 00                DB      00H
038E 00                DB      00H
                                           ; SOURCE LINE # 446
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 65  

038F 750000      R     MOV     bufcht1+02H,#00H
0392 750000      R     MOV     bufcht1+03H,#00H
                                           ; SOURCE LINE # 447
0395 8034              SJMP    ?C0024
0397         ?C0031:
                                           ; SOURCE LINE # 449
0397 200031      R     JB      fl_r11,?C0024
                                           ; SOURCE LINE # 450
039A 850000      R     MOV     cop_imp1,bufcht1+02H
039D 850000      R     MOV     cop_imp1+01H,bufcht1+03H
                                           ; SOURCE LINE # 451
03A0 7800        R     MOV     R0,#LOW rasx1_t
03A2 120000      E     LCALL   ?C?LLDIDATA
03A5 7800        R     MOV     R0,#LOW rasx1
03A7 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 452
03AA         ?C0033:
03AA         ?C0032:
                                           ; SOURCE LINE # 453
03AA 801F              SJMP    ?C0024
03AC         ?C0030:
                                           ; SOURCE LINE # 455
                                           ; SOURCE LINE # 456
03AC 850000      R     MOV     cop_imp1,bufcht1+02H
03AF 850000      R     MOV     cop_imp1+01H,bufcht1+03H
                                           ; SOURCE LINE # 457
03B2 7800        R     MOV     R0,#LOW rasx1_t
03B4 120000      E     LCALL   ?C?LLDIDATA
03B7 7800        R     MOV     R0,#LOW rasx1
03B9 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 458
03BC 7800        R     MOV     R0,#LOW rasx1_t
03BE 120000      E     LCALL   ?C?LSTKIDATA
03C1 00                DB      00H
03C2 00                DB      00H
03C3 00                DB      00H
03C4 00                DB      00H
                                           ; SOURCE LINE # 459
03C5 750000      R     MOV     bufcht1+02H,#00H
03C8 750000      R     MOV     bufcht1+03H,#00H
                                           ; SOURCE LINE # 460
03CB         ?C0034:
                                           ; SOURCE LINE # 461
03CB         ?C0024:
                                           ; SOURCE LINE # 462
03CB AE00        R     MOV     R6,cop_imp1
03CD AF00        R     MOV     R7,cop_imp1+01H
03CF E4                CLR     A
03D0 FC                MOV     R4,A
03D1 FD                MOV     R5,A
03D2 EC                MOV     A,R4
03D3 C0E0              PUSH    ACC
03D5 ED                MOV     A,R5
03D6 C0E0              PUSH    ACC
03D8 EE                MOV     A,R6
03D9 C0E0              PUSH    ACC
03DB EF                MOV     A,R7
03DC C0E0              PUSH    ACC
03DE 7800        R     MOV     R0,#LOW rasx1
03E0 120000      E     LCALL   ?C?LLDIDATA
03E3 D0E0              POP     ACC
03E5 FB                MOV     R3,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 66  

03E6 D0E0              POP     ACC
03E8 FA                MOV     R2,A
03E9 D0E0              POP     ACC
03EB F9                MOV     R1,A
03EC D0E0              POP     ACC
03EE F8                MOV     R0,A
03EF 120000      E     LCALL   ?C?ULDIV
03F2 7801              MOV     R0,#01H
03F4 120000      E     LCALL   ?C?LSHL
03F7 EF                MOV     A,R7
03F8 2500        R     ADD     A,H1+03H
03FA FF                MOV     R7,A
03FB EE                MOV     A,R6
03FC 3500        R     ADDC    A,H1+02H
03FE FE                MOV     R6,A
03FF ED                MOV     A,R5
0400 3500        R     ADDC    A,H1+01H
0402 FD                MOV     R5,A
0403 EC                MOV     A,R4
0404 3500        R     ADDC    A,H1
0406 FC                MOV     R4,A
0407 7800        R     MOV     R0,#LOW rasx1_t
0409 120000      E     LCALL   ?C?LLDIDATA0
040C D3                SETB    C
040D 120000      E     LCALL   ?C?ULCMP
0410 400A              JC      ?C0035
                                           ; SOURCE LINE # 463
                                           ; SOURCE LINE # 464
0412 7800        R     MOV     R0,#LOW rasx1_t
0414 120000      E     LCALL   ?C?LLDIDATA
0417 7800        R     MOV     R0,#LOW rasx1
0419 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 465
041C         ?C0035:
                                           ; SOURCE LINE # 467
041C 7F80              MOV     R7,#080H
041E 7E38              MOV     R6,#038H
0420 7D01              MOV     R5,#01H
0422 7C00              MOV     R4,#00H
0424 7800        R     MOV     R0,#LOW rasx1_t
0426 120000      E     LCALL   ?C?LLDIDATA0
0429 C3                CLR     C
042A 120000      E     LCALL   ?C?ULCMP
042D 4020              JC      ?C0023
                                           ; SOURCE LINE # 468
                                           ; SOURCE LINE # 469
042F 750000      R     MOV     cop_imp1,#00H
0432 750000      R     MOV     cop_imp1+01H,#00H
                                           ; SOURCE LINE # 470
0435 750000      R     MOV     bufcht1+02H,#00H
0438 750000      R     MOV     bufcht1+03H,#00H
                                           ; SOURCE LINE # 471
043B 7800        R     MOV     R0,#LOW rasx1
043D 120000      E     LCALL   ?C?LSTKIDATA
0440 00                DB      00H
0441 00                DB      00H
0442 00                DB      00H
0443 00                DB      00H
                                           ; SOURCE LINE # 472
0444 7800        R     MOV     R0,#LOW rasx1_t
0446 120000      E     LCALL   ?C?LSTKIDATA
0449 00                DB      00H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 67  

044A 00                DB      00H
044B 00                DB      00H
044C 00                DB      00H
                                           ; SOURCE LINE # 473
044D C200        R     CLR     fl_m1
                                           ; SOURCE LINE # 474
044F         ?C0036:
                                           ; SOURCE LINE # 476
044F         ?C0023:
                                           ; SOURCE LINE # 480
044F 7800        R     MOV     R0,#LOW MM
0451 E6                MOV     A,@R0
0452 FF                MOV     R7,A
0453 EF                MOV     A,R7
0454 7003              JNZ     $ + 5H
0456 020000      R     LJMP    ?C0037
                                           ; SOURCE LINE # 481
                                           ; SOURCE LINE # 483
0459 7800        R     MOV     R0,#LOW MM
045B E6                MOV     A,@R0
045C FF                MOV     R7,A
045D 7E00              MOV     R6,#00H
045F EE                MOV     A,R6
0460 5500        R     ANL     A,copy_p
0462 FE                MOV     R6,A
0463 EF                MOV     A,R7
0464 5500        R     ANL     A,copy_p+01H
0466 FF                MOV     R7,A
0467 7800        R     MOV     R0,#LOW MM
0469 E6                MOV     A,@R0
046A FD                MOV     R5,A
046B 7C00              MOV     R4,#00H
046D EF                MOV     A,R7
046E 6D                XRL     A,R5
046F 7002              JNZ     ?C0723
0471 EE                MOV     A,R6
0472 6C                XRL     A,R4
0473         ?C0723:
0473 7004              JNZ     ?C0038
0475 D200        R     SETB    d1
0477 8002              SJMP    ?C0039
0479         ?C0038:
0479 C200        R     CLR     d1
047B         ?C0039:
                                           ; SOURCE LINE # 484
047B 7800        R     MOV     R0,#LOW MM+06H
047D E6                MOV     A,@R0
047E FF                MOV     R7,A
047F 7E00              MOV     R6,#00H
0481 EE                MOV     A,R6
0482 5500        R     ANL     A,copy_p
0484 FE                MOV     R6,A
0485 EF                MOV     A,R7
0486 5500        R     ANL     A,copy_p+01H
0488 FF                MOV     R7,A
0489 7800        R     MOV     R0,#LOW MM+06H
048B E6                MOV     A,@R0
048C FD                MOV     R5,A
048D 7C00              MOV     R4,#00H
048F EF                MOV     A,R7
0490 6D                XRL     A,R5
0491 7002              JNZ     ?C0724
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 68  

0493 EE                MOV     A,R6
0494 6C                XRL     A,R4
0495         ?C0724:
0495 7004              JNZ     ?C0040
0497 D200        R     SETB    d2
0499 8002              SJMP    ?C0041
049B         ?C0040:
049B C200        R     CLR     d2
049D         ?C0041:
                                           ; SOURCE LINE # 486
049D 200004      R     JB      d11,?C0043
04A0 7F01              MOV     R7,#01H
04A2 8002              SJMP    ?C0044
04A4         ?C0043:
04A4 7F00              MOV     R7,#00H
04A6         ?C0044:
04A6 300004      R     JNB     d1,?C0045
04A9 7E01              MOV     R6,#01H
04AB 8002              SJMP    ?C0046
04AD         ?C0045:
04AD 7E00              MOV     R6,#00H
04AF         ?C0046:
04AF EE                MOV     A,R6
04B0 5F                ANL     A,R7
04B1 FF                MOV     R7,A
04B2 EF                MOV     A,R7
04B3 7003              JNZ     $ + 5H
04B5 020000      R     LJMP    ?C0042
                                           ; SOURCE LINE # 487
04B8 30003F      R     JNB     d2,?C0047
04BB 30001A      R     JNB     napr,?C0048
04BE 7800        R     MOV     R0,#LOW cnt_dol
04C0 E6                MOV     A,@R0
04C1 FE                MOV     R6,A
04C2 08                INC     R0
04C3 E6                MOV     A,@R0
04C4 FF                MOV     R7,A
04C5 D3                SETB    C
04C6 EF                MOV     A,R7
04C7 9400              SUBB    A,#00H
04C9 EE                MOV     A,R6
04CA 9400              SUBB    A,#00H
04CC 4069              JC      ?C0042
04CE 7800        R     MOV     R0,#LOW cnt_dol+01H
04D0 E6                MOV     A,@R0
04D1 16                DEC     @R0
04D2 18                DEC     R0
04D3 7001              JNZ     ?C0725
04D5 16                DEC     @R0
04D6         ?C0725:
04D6         ?C0049:
04D6 805F              SJMP    ?C0042
04D8         ?C0048:
04D8 7800        R     MOV     R0,#LOW cnt_dol
04DA E6                MOV     A,@R0
04DB FE                MOV     R6,A
04DC 08                INC     R0
04DD E6                MOV     A,@R0
04DE FF                MOV     R7,A
04DF E4                CLR     A
04E0 FC                MOV     R4,A
04E1 FD                MOV     R5,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 69  

04E2 7BFF              MOV     R3,#0FFH
04E4 7AFF              MOV     R2,#0FFH
04E6 7900              MOV     R1,#00H
04E8 7800              MOV     R0,#00H
04EA D3                SETB    C
04EB 120000      E     LCALL   ?C?SLCMP
04EE 4047              JC      ?C0042
04F0 7800        R     MOV     R0,#LOW cnt_dol+01H
04F2 06                INC     @R0
04F3 E6                MOV     A,@R0
04F4 18                DEC     R0
04F5 7001              JNZ     ?C0726
04F7 06                INC     @R0
04F8         ?C0726:
04F8         ?C0051:
04F8         ?C0050:
04F8 803D              SJMP    ?C0042
04FA         ?C0047:
                                           ; SOURCE LINE # 488
04FA 300022      R     JNB     napr,?C0053
04FD 7800        R     MOV     R0,#LOW cnt_dol
04FF E6                MOV     A,@R0
0500 FE                MOV     R6,A
0501 08                INC     R0
0502 E6                MOV     A,@R0
0503 FF                MOV     R7,A
0504 E4                CLR     A
0505 FC                MOV     R4,A
0506 FD                MOV     R5,A
0507 7BFF              MOV     R3,#0FFH
0509 7AFF              MOV     R2,#0FFH
050B 7900              MOV     R1,#00H
050D 7800              MOV     R0,#00H
050F D3                SETB    C
0510 120000      E     LCALL   ?C?SLCMP
0513 4022              JC      ?C0042
0515 7800        R     MOV     R0,#LOW cnt_dol+01H
0517 06                INC     @R0
0518 E6                MOV     A,@R0
0519 18                DEC     R0
051A 7001              JNZ     ?C0727
051C 06                INC     @R0
051D         ?C0727:
051D         ?C0054:
051D 8018              SJMP    ?C0042
051F         ?C0053:
051F 7800        R     MOV     R0,#LOW cnt_dol
0521 E6                MOV     A,@R0
0522 FE                MOV     R6,A
0523 08                INC     R0
0524 E6                MOV     A,@R0
0525 FF                MOV     R7,A
0526 D3                SETB    C
0527 EF                MOV     A,R7
0528 9400              SUBB    A,#00H
052A EE                MOV     A,R6
052B 9400              SUBB    A,#00H
052D 4008              JC      ?C0042
052F 7800        R     MOV     R0,#LOW cnt_dol+01H
0531 E6                MOV     A,@R0
0532 16                DEC     @R0
0533 18                DEC     R0
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 70  

0534 7001              JNZ     ?C0728
0536 16                DEC     @R0
0537         ?C0728:
0537         ?C0056:
0537         ?C0055:
0537         ?C0052:
0537         ?C0042:
                                           ; SOURCE LINE # 490
0537 300004      R     JNB     d11,?C0058
053A 7F01              MOV     R7,#01H
053C 8002              SJMP    ?C0059
053E         ?C0058:
053E 7F00              MOV     R7,#00H
0540         ?C0059:
0540 200004      R     JB      d1,?C0060
0543 7E01              MOV     R6,#01H
0545 8002              SJMP    ?C0061
0547         ?C0060:
0547 7E00              MOV     R6,#00H
0549         ?C0061:
0549 EE                MOV     A,R6
054A 5F                ANL     A,R7
054B FF                MOV     R7,A
054C EF                MOV     A,R7
054D 7003              JNZ     $ + 5H
054F 020000      R     LJMP    ?C0057
                                           ; SOURCE LINE # 491
0552 30003F      R     JNB     d2,?C0062
0555 300022      R     JNB     napr,?C0063
0558 7800        R     MOV     R0,#LOW cnt_dol
055A E6                MOV     A,@R0
055B FE                MOV     R6,A
055C 08                INC     R0
055D E6                MOV     A,@R0
055E FF                MOV     R7,A
055F E4                CLR     A
0560 FC                MOV     R4,A
0561 FD                MOV     R5,A
0562 7BFF              MOV     R3,#0FFH
0564 7AFF              MOV     R2,#0FFH
0566 7900              MOV     R1,#00H
0568 7800              MOV     R0,#00H
056A D3                SETB    C
056B 120000      E     LCALL   ?C?SLCMP
056E 4071              JC      ?C0057
0570 7800        R     MOV     R0,#LOW cnt_dol+01H
0572 06                INC     @R0
0573 E6                MOV     A,@R0
0574 18                DEC     R0
0575 7001              JNZ     ?C0729
0577 06                INC     @R0
0578         ?C0729:
0578         ?C0064:
0578 8067              SJMP    ?C0057
057A         ?C0063:
057A 7800        R     MOV     R0,#LOW cnt_dol
057C E6                MOV     A,@R0
057D FE                MOV     R6,A
057E 08                INC     R0
057F E6                MOV     A,@R0
0580 FF                MOV     R7,A
0581 D3                SETB    C
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 71  

0582 EF                MOV     A,R7
0583 9400              SUBB    A,#00H
0585 EE                MOV     A,R6
0586 9400              SUBB    A,#00H
0588 4057              JC      ?C0057
058A 7800        R     MOV     R0,#LOW cnt_dol+01H
058C E6                MOV     A,@R0
058D 16                DEC     @R0
058E 18                DEC     R0
058F 7001              JNZ     ?C0730
0591 16                DEC     @R0
0592         ?C0730:
0592         ?C0066:
0592         ?C0065:
0592 804D              SJMP    ?C0057
0594         ?C0062:
                                           ; SOURCE LINE # 492
0594 30002A      R     JNB     napr,?C0068
0597 7800        R     MOV     R0,#LOW cnt_dol
0599 E6                MOV     A,@R0
059A FE                MOV     R6,A
059B 08                INC     R0
059C E6                MOV     A,@R0
059D FF                MOV     R7,A
059E D3                SETB    C
059F EF                MOV     A,R7
05A0 9400              SUBB    A,#00H
05A2 EE                MOV     A,R6
05A3 9400              SUBB    A,#00H
05A5 403A              JC      ?C0057
05A7 7800        R     MOV     R0,#LOW cnt_dol
05A9 E6                MOV     A,@R0
05AA FE                MOV     R6,A
05AB 08                INC     R0
05AC E6                MOV     A,@R0
05AD FF                MOV     R7,A
05AE D3                SETB    C
05AF EF                MOV     A,R7
05B0 9400              SUBB    A,#00H
05B2 EE                MOV     A,R6
05B3 9400              SUBB    A,#00H
05B5 402A              JC      ?C0057
05B7 7800        R     MOV     R0,#LOW cnt_dol+01H
05B9 E6                MOV     A,@R0
05BA 16                DEC     @R0
05BB 18                DEC     R0
05BC 7001              JNZ     ?C0731
05BE 16                DEC     @R0
05BF         ?C0731:
05BF         ?C0070:
05BF         ?C0069:
05BF 8020              SJMP    ?C0057
05C1         ?C0068:
05C1 7800        R     MOV     R0,#LOW cnt_dol
05C3 E6                MOV     A,@R0
05C4 FE                MOV     R6,A
05C5 08                INC     R0
05C6 E6                MOV     A,@R0
05C7 FF                MOV     R7,A
05C8 E4                CLR     A
05C9 FC                MOV     R4,A
05CA FD                MOV     R5,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 72  

05CB 7BFF              MOV     R3,#0FFH
05CD 7AFF              MOV     R2,#0FFH
05CF 7900              MOV     R1,#00H
05D1 7800              MOV     R0,#00H
05D3 D3                SETB    C
05D4 120000      E     LCALL   ?C?SLCMP
05D7 4008              JC      ?C0057
05D9 7800        R     MOV     R0,#LOW cnt_dol+01H
05DB 06                INC     @R0
05DC E6                MOV     A,@R0
05DD 18                DEC     R0
05DE 7001              JNZ     ?C0732
05E0 06                INC     @R0
05E1         ?C0732:
05E1         ?C0072:
05E1         ?C0071:
05E1         ?C0067:
05E1         ?C0057:
                                           ; SOURCE LINE # 496
05E1 200004      R     JB      d22,?C0074
05E4 7F01              MOV     R7,#01H
05E6 8002              SJMP    ?C0075
05E8         ?C0074:
05E8 7F00              MOV     R7,#00H
05EA         ?C0075:
05EA 300004      R     JNB     d2,?C0076
05ED 7E01              MOV     R6,#01H
05EF 8002              SJMP    ?C0077
05F1         ?C0076:
05F1 7E00              MOV     R6,#00H
05F3         ?C0077:
05F3 EE                MOV     A,R6
05F4 5F                ANL     A,R7
05F5 FF                MOV     R7,A
05F6 EF                MOV     A,R7
05F7 7003              JNZ     $ + 5H
05F9 020000      R     LJMP    ?C0073
                                           ; SOURCE LINE # 497
05FC 30003F      R     JNB     d1,?C0078
05FF 300022      R     JNB     napr,?C0079
0602 7800        R     MOV     R0,#LOW cnt_dol
0604 E6                MOV     A,@R0
0605 FE                MOV     R6,A
0606 08                INC     R0
0607 E6                MOV     A,@R0
0608 FF                MOV     R7,A
0609 E4                CLR     A
060A FC                MOV     R4,A
060B FD                MOV     R5,A
060C 7BFF              MOV     R3,#0FFH
060E 7AFF              MOV     R2,#0FFH
0610 7900              MOV     R1,#00H
0612 7800              MOV     R0,#00H
0614 D3                SETB    C
0615 120000      E     LCALL   ?C?SLCMP
0618 4061              JC      ?C0073
061A 7800        R     MOV     R0,#LOW cnt_dol+01H
061C 06                INC     @R0
061D E6                MOV     A,@R0
061E 18                DEC     R0
061F 7001              JNZ     ?C0733
0621 06                INC     @R0
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 73  

0622         ?C0733:
0622         ?C0080:
0622 8057              SJMP    ?C0073
0624         ?C0079:
0624 7800        R     MOV     R0,#LOW cnt_dol
0626 E6                MOV     A,@R0
0627 FE                MOV     R6,A
0628 08                INC     R0
0629 E6                MOV     A,@R0
062A FF                MOV     R7,A
062B D3                SETB    C
062C EF                MOV     A,R7
062D 9400              SUBB    A,#00H
062F EE                MOV     A,R6
0630 9400              SUBB    A,#00H
0632 4047              JC      ?C0073
0634 7800        R     MOV     R0,#LOW cnt_dol+01H
0636 E6                MOV     A,@R0
0637 16                DEC     @R0
0638 18                DEC     R0
0639 7001              JNZ     ?C0734
063B 16                DEC     @R0
063C         ?C0734:
063C         ?C0082:
063C         ?C0081:
063C 803D              SJMP    ?C0073
063E         ?C0078:
                                           ; SOURCE LINE # 498
063E 30001A      R     JNB     napr,?C0084
0641 7800        R     MOV     R0,#LOW cnt_dol
0643 E6                MOV     A,@R0
0644 FE                MOV     R6,A
0645 08                INC     R0
0646 E6                MOV     A,@R0
0647 FF                MOV     R7,A
0648 D3                SETB    C
0649 EF                MOV     A,R7
064A 9400              SUBB    A,#00H
064C EE                MOV     A,R6
064D 9400              SUBB    A,#00H
064F 402A              JC      ?C0073
0651 7800        R     MOV     R0,#LOW cnt_dol+01H
0653 E6                MOV     A,@R0
0654 16                DEC     @R0
0655 18                DEC     R0
0656 7001              JNZ     ?C0735
0658 16                DEC     @R0
0659         ?C0735:
0659         ?C0085:
0659 8020              SJMP    ?C0073
065B         ?C0084:
065B 7800        R     MOV     R0,#LOW cnt_dol
065D E6                MOV     A,@R0
065E FE                MOV     R6,A
065F 08                INC     R0
0660 E6                MOV     A,@R0
0661 FF                MOV     R7,A
0662 E4                CLR     A
0663 FC                MOV     R4,A
0664 FD                MOV     R5,A
0665 7BFF              MOV     R3,#0FFH
0667 7AFF              MOV     R2,#0FFH
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 74  

0669 7900              MOV     R1,#00H
066B 7800              MOV     R0,#00H
066D D3                SETB    C
066E 120000      E     LCALL   ?C?SLCMP
0671 4008              JC      ?C0073
0673 7800        R     MOV     R0,#LOW cnt_dol+01H
0675 06                INC     @R0
0676 E6                MOV     A,@R0
0677 18                DEC     R0
0678 7001              JNZ     ?C0736
067A 06                INC     @R0
067B         ?C0736:
067B         ?C0087:
067B         ?C0086:
067B         ?C0083:
067B         ?C0073:
                                           ; SOURCE LINE # 500
067B 300004      R     JNB     d22,?C0089
067E 7F01              MOV     R7,#01H
0680 8002              SJMP    ?C0090
0682         ?C0089:
0682 7F00              MOV     R7,#00H
0684         ?C0090:
0684 200004      R     JB      d2,?C0091
0687 7E01              MOV     R6,#01H
0689 8002              SJMP    ?C0092
068B         ?C0091:
068B 7E00              MOV     R6,#00H
068D         ?C0092:
068D EE                MOV     A,R6
068E 5F                ANL     A,R7
068F FF                MOV     R7,A
0690 EF                MOV     A,R7
0691 7003              JNZ     $ + 5H
0693 020000      R     LJMP    ?C0088
                                           ; SOURCE LINE # 501
0696 30003F      R     JNB     d1,?C0093
0699 30001A      R     JNB     napr,?C0094
069C 7800        R     MOV     R0,#LOW cnt_dol
069E E6                MOV     A,@R0
069F FE                MOV     R6,A
06A0 08                INC     R0
06A1 E6                MOV     A,@R0
06A2 FF                MOV     R7,A
06A3 D3                SETB    C
06A4 EF                MOV     A,R7
06A5 9400              SUBB    A,#00H
06A7 EE                MOV     A,R6
06A8 9400              SUBB    A,#00H
06AA 4069              JC      ?C0088
06AC 7800        R     MOV     R0,#LOW cnt_dol+01H
06AE E6                MOV     A,@R0
06AF 16                DEC     @R0
06B0 18                DEC     R0
06B1 7001              JNZ     ?C0737
06B3 16                DEC     @R0
06B4         ?C0737:
06B4         ?C0095:
06B4 805F              SJMP    ?C0088
06B6         ?C0094:
06B6 7800        R     MOV     R0,#LOW cnt_dol
06B8 E6                MOV     A,@R0
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 75  

06B9 FE                MOV     R6,A
06BA 08                INC     R0
06BB E6                MOV     A,@R0
06BC FF                MOV     R7,A
06BD E4                CLR     A
06BE FC                MOV     R4,A
06BF FD                MOV     R5,A
06C0 7BFF              MOV     R3,#0FFH
06C2 7AFF              MOV     R2,#0FFH
06C4 7900              MOV     R1,#00H
06C6 7800              MOV     R0,#00H
06C8 D3                SETB    C
06C9 120000      E     LCALL   ?C?SLCMP
06CC 4047              JC      ?C0088
06CE 7800        R     MOV     R0,#LOW cnt_dol+01H
06D0 06                INC     @R0
06D1 E6                MOV     A,@R0
06D2 18                DEC     R0
06D3 7001              JNZ     ?C0738
06D5 06                INC     @R0
06D6         ?C0738:
06D6         ?C0097:
06D6         ?C0096:
06D6 803D              SJMP    ?C0088
06D8         ?C0093:
                                           ; SOURCE LINE # 502
06D8 300022      R     JNB     napr,?C0099
06DB 7800        R     MOV     R0,#LOW cnt_dol
06DD E6                MOV     A,@R0
06DE FE                MOV     R6,A
06DF 08                INC     R0
06E0 E6                MOV     A,@R0
06E1 FF                MOV     R7,A
06E2 E4                CLR     A
06E3 FC                MOV     R4,A
06E4 FD                MOV     R5,A
06E5 7BFF              MOV     R3,#0FFH
06E7 7AFF              MOV     R2,#0FFH
06E9 7900              MOV     R1,#00H
06EB 7800              MOV     R0,#00H
06ED D3                SETB    C
06EE 120000      E     LCALL   ?C?SLCMP
06F1 4022              JC      ?C0088
06F3 7800        R     MOV     R0,#LOW cnt_dol+01H
06F5 06                INC     @R0
06F6 E6                MOV     A,@R0
06F7 18                DEC     R0
06F8 7001              JNZ     ?C0739
06FA 06                INC     @R0
06FB         ?C0739:
06FB         ?C0100:
06FB 8018              SJMP    ?C0088
06FD         ?C0099:
06FD 7800        R     MOV     R0,#LOW cnt_dol
06FF E6                MOV     A,@R0
0700 FE                MOV     R6,A
0701 08                INC     R0
0702 E6                MOV     A,@R0
0703 FF                MOV     R7,A
0704 D3                SETB    C
0705 EF                MOV     A,R7
0706 9400              SUBB    A,#00H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 76  

0708 EE                MOV     A,R6
0709 9400              SUBB    A,#00H
070B 4008              JC      ?C0088
070D 7800        R     MOV     R0,#LOW cnt_dol+01H
070F E6                MOV     A,@R0
0710 16                DEC     @R0
0711 18                DEC     R0
0712 7001              JNZ     ?C0740
0714 16                DEC     @R0
0715         ?C0740:
0715         ?C0102:
0715         ?C0101:
0715         ?C0098:
0715         ?C0088:
                                           ; SOURCE LINE # 504
0715 A200        R     MOV     C,d1
0717 9200        R     MOV     d11,C
                                           ; SOURCE LINE # 505
0719 A200        R     MOV     C,d2
071B 9200        R     MOV     d22,C
                                           ; SOURCE LINE # 506
071D         ?C0037:
                                           ; SOURCE LINE # 509
071D 7800        R     MOV     R0,#LOW CNT_SEC+01H
071F 06                INC     @R0
0720 E6                MOV     A,@R0
0721 18                DEC     R0
0722 7001              JNZ     ?C0741
0724 06                INC     @R0
0725         ?C0741:
                                           ; SOURCE LINE # 510
0725 30003B      R     JNB     fl_rgr,?C0103
                                           ; SOURCE LINE # 511
0728 7800        R     MOV     R0,#LOW CNT_SEC
072A E6                MOV     A,@R0
072B FE                MOV     R6,A
072C 08                INC     R0
072D E6                MOV     A,@R0
072E FF                MOV     R7,A
072F EF                MOV     A,R7
0730 6490              XRL     A,#090H
0732 7003              JNZ     ?C0742
0734 EE                MOV     A,R6
0735 6401              XRL     A,#01H
0737         ?C0742:
0737 7043              JNZ     ?C0105
                                           ; SOURCE LINE # 512
                                           ; SOURCE LINE # 513
0739 7800        E     MOV     R0,#LOW cmr
073B 120000      E     LCALL   ?C?LLDIDATA0
073E 900000      R     MOV     DPTR,#BUF_FP_100_0
0741 E0                MOVX    A,@DPTR
0742 FE                MOV     R6,A
0743 A3                INC     DPTR
0744 E0                MOVX    A,@DPTR
0745 FF                MOV     R7,A
0746 E4                CLR     A
0747 FC                MOV     R4,A
0748 FD                MOV     R5,A
0749 EB                MOV     A,R3
074A 2F                ADD     A,R7
074B FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 77  

074C EA                MOV     A,R2
074D 3E                ADDC    A,R6
074E FE                MOV     R6,A
074F E9                MOV     A,R1
0750 3D                ADDC    A,R5
0751 FD                MOV     R5,A
0752 E8                MOV     A,R0
0753 3C                ADDC    A,R4
0754 FC                MOV     R4,A
0755 7800        E     MOV     R0,#LOW cmr
0757 120000      E     LCALL   ?C?LSTIDATA
                                           ; SOURCE LINE # 515
075A 7800        R     MOV     R0,#LOW CNT_SEC
075C 7600              MOV     @R0,#00H
075E 08                INC     R0
075F 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 516
0761         ?C0104:
                                           ; SOURCE LINE # 517
0761 8019              SJMP    ?C0105
0763         ?C0103:
                                           ; SOURCE LINE # 519
0763 7800        R     MOV     R0,#LOW CNT_SEC
0765 E6                MOV     A,@R0
0766 FE                MOV     R6,A
0767 08                INC     R0
0768 E6                MOV     A,@R0
0769 FF                MOV     R7,A
076A D3                SETB    C
076B EF                MOV     A,R7
076C 94A0              SUBB    A,#0A0H
076E EE                MOV     A,R6
076F 940F              SUBB    A,#0FH
0771 4009              JC      ?C0105
                                           ; SOURCE LINE # 520
0773 7800        R     MOV     R0,#LOW CNT_SEC
0775 7600              MOV     @R0,#00H
0777 08                INC     R0
0778 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 521
077A D200        R     SETB    fcnt
                                           ; SOURCE LINE # 522
077C         ?C0106:
077C         ?C0105:
                                           ; SOURCE LINE # 526
077C E500        R     MOV     A,zad
077E 6004              JZ      ?C0107
                                           ; SOURCE LINE # 527
0780 1500        R     DEC     zad
0782 8006              SJMP    ?C0108
0784         ?C0107:
                                           ; SOURCE LINE # 529
0784 900000      R     MOV     DPTR,#stat_byte
0787 7466              MOV     A,#066H
0789 F0                MOVX    @DPTR,A
078A         ?C0108:
                                           ; SOURCE LINE # 533
078A 0500        R     INC     priem
                                           ; SOURCE LINE # 535
078C E500        R     MOV     A,st_ser
078E B40A04            CJNE    A,#0AH,?C0110
0791 7F01              MOV     R7,#01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 78  

0793 8002              SJMP    ?C0111
0795         ?C0110:
0795 7F00              MOV     R7,#00H
0797         ?C0111:
0797 E500        R     MOV     A,st_ser
0799 B40504            CJNE    A,#05H,?C0112
079C 7E01              MOV     R6,#01H
079E 8002              SJMP    ?C0113
07A0         ?C0112:
07A0 7E00              MOV     R6,#00H
07A2         ?C0113:
07A2 EE                MOV     A,R6
07A3 4F                ORL     A,R7
07A4 FF                MOV     R7,A
07A5 E500        R     MOV     A,priem
07A7 D3                SETB    C
07A8 9402              SUBB    A,#02H
07AA 4004              JC      ?C0114
07AC 7E01              MOV     R6,#01H
07AE 8002              SJMP    ?C0115
07B0         ?C0114:
07B0 7E00              MOV     R6,#00H
07B2         ?C0115:
07B2 EE                MOV     A,R6
07B3 5F                ANL     A,R7
07B4 FF                MOV     R7,A
07B5 EF                MOV     A,R7
07B6 600A              JZ      ?C0109
                                           ; SOURCE LINE # 536
                                           ; SOURCE LINE # 537
07B8 C2B6              CLR     WR
07BA 750005      R     MOV     st_ser,#05H
07BD 7500FF      R     MOV     nr,#0FFH
07C0 D2AC              SETB    ES
                                           ; SOURCE LINE # 538
07C2         ?C0109:
                                           ; SOURCE LINE # 541
07C2 7800        R     MOV     R0,#LOW tmo
07C4 E6                MOV     A,@R0
07C5 FF                MOV     R7,A
07C6 EF                MOV     A,R7
07C7 C3                CLR     C
07C8 9401              SUBB    A,#01H
07CA 5011              JNC     ?C0116
                                           ; SOURCE LINE # 542
                                           ; SOURCE LINE # 543
07CC E500        R     MOV     A,st_ser
07CE B41414            CJNE    A,#014H,?C0120
                                           ; SOURCE LINE # 544
                                           ; SOURCE LINE # 546
07D1 750028      R     MOV     st_ser,#028H
                                           ; SOURCE LINE # 547
07D4 7800        R     MOV     R0,#LOW nro
07D6 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 548
07D8 75997E            MOV     SBUF,#07EH
                                           ; SOURCE LINE # 549
07DB         ?C0117:
                                           ; SOURCE LINE # 550
07DB 8008              SJMP    ?C0120
07DD         ?C0116:
                                           ; SOURCE LINE # 552
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 79  

                                           ; SOURCE LINE # 553
07DD E500        R     MOV     A,st_ser
07DF B41403            CJNE    A,#014H,?C0120
                                           ; SOURCE LINE # 554
07E2 7800        R     MOV     R0,#LOW tmo
07E4 16                DEC     @R0
07E5         ?C0119:
                                           ; SOURCE LINE # 555
07E5         ?C0118:
                                           ; SOURCE LINE # 558
07E5         ?C0120:
07E5 D0D0              POP     PSW
07E7 D082              POP     DPL
07E9 D083              POP     DPH
07EB D0F0              POP     B
07ED D0E0              POP     ACC
07EF 32                RETI    
             ; FUNCTION timer1int (END)

             ; FUNCTION int_adc (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A E8                MOV     A,R0
000B C0E0              PUSH    ACC
000D E9                MOV     A,R1
000E C0E0              PUSH    ACC
0010 EA                MOV     A,R2
0011 C0E0              PUSH    ACC
0013 EB                MOV     A,R3
0014 C0E0              PUSH    ACC
0016 EC                MOV     A,R4
0017 C0E0              PUSH    ACC
0019 ED                MOV     A,R5
001A C0E0              PUSH    ACC
001C EE                MOV     A,R6
001D C0E0              PUSH    ACC
001F EF                MOV     A,R7
0020 C0E0              PUSH    ACC
                                           ; SOURCE LINE # 561
                                           ; SOURCE LINE # 565
0022 0500        R     INC     mi+01H
0024 E500        R     MOV     A,mi+01H
0026 7002              JNZ     ?C0743
0028 0500        R     INC     mi
002A         ?C0743:
                                           ; SOURCE LINE # 567
002A D3                SETB    C
002B E500        R     MOV     A,mi+01H
002D 949A              SUBB    A,#09AH
002F E500        R     MOV     A,mi
0031 9402              SUBB    A,#02H
0033 4017              JC      ?C0121
                                           ; SOURCE LINE # 568
                                           ; SOURCE LINE # 569
0035 750000      R     MOV     mi,#00H
0038 750000      R     MOV     mi+01H,#00H
                                           ; SOURCE LINE # 570
003B A200        R     MOV     C,ep2
003D B3                CPL     C
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 80  

003E 9200        R     MOV     ep2,C
                                           ; SOURCE LINE # 571
0040 300009      R     JNB     fl_sv,?C0121
                                           ; SOURCE LINE # 572
0043 300004      R     JNB     ep2,?C0123
                                           ; SOURCE LINE # 573
0046 D2A4              SETB    svet
0048 8002              SJMP    ?C0121
004A         ?C0123:
                                           ; SOURCE LINE # 575
004A C2A4              CLR     svet
004C         ?C0124:
004C         ?C0122:
                                           ; SOURCE LINE # 576
004C         ?C0121:
                                           ; SOURCE LINE # 592
004C 20DF03            JB      RDY0,$ + 6H
004F 020000      R     LJMP    ?C0135
                                           ; SOURCE LINE # 593
                                           ; SOURCE LINE # 594
0052 C2DF              CLR     RDY0
                                           ; SOURCE LINE # 596
0054 AF00        R     MOV     R7,N_K
0056 EF                MOV     A,R7
0057 C4                SWAP    A
0058 54F0              ANL     A,#0F0H
005A 2400        E     ADD     A,#LOW Str_CH_A+09H
005C F582              MOV     DPL,A
005E E4                CLR     A
005F 3400        E     ADDC    A,#HIGH Str_CH_A+09H
0061 F583              MOV     DPH,A
0063 E0                MOVX    A,@DPTR
0064 FF                MOV     R7,A
0065 EF                MOV     A,R7
0066 B4FF08            CJNE    A,#0FFH,?C0126
                                           ; SOURCE LINE # 597
0069 750000      R     MOV     tmadc,#00H
006C 750000      R     MOV     tmadc+01H,#00H
006F 8014              SJMP    ?C0127
0071         ?C0126:
                                           ; SOURCE LINE # 599
0071 AFDB              MOV     R7,ADC0H
0073 7E00              MOV     R6,#00H
0075 EF                MOV     A,R7
0076 7F00              MOV     R7,#00H
0078 FE                MOV     R6,A
0079 ADDA              MOV     R5,ADC0M
007B 7C00              MOV     R4,#00H
007D EE                MOV     A,R6
007E 4C                ORL     A,R4
007F F500        R     MOV     tmadc,A
0081 EF                MOV     A,R7
0082 4D                ORL     A,R5
0083 F500        R     MOV     tmadc+01H,A
0085         ?C0127:
                                           ; SOURCE LINE # 601
0085 75DB00            MOV     ADC0H,#00H
                                           ; SOURCE LINE # 602
0088 75DA00            MOV     ADC0M,#00H
                                           ; SOURCE LINE # 604
008B AF00        R     MOV     R7,N_K
008D EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 81  

008E 25E0              ADD     A,ACC
0090 25E0              ADD     A,ACC
0092 24DC              ADD     A,#LOW BUF_MN
0094 F582              MOV     DPL,A
0096 E4                CLR     A
0097 3400              ADDC    A,#HIGH BUF_MN
0099 F583              MOV     DPH,A
009B C083              PUSH    DPH
009D C082              PUSH    DPL
009F E0                MOVX    A,@DPTR
00A0 F8                MOV     R0,A
00A1 A3                INC     DPTR
00A2 E0                MOVX    A,@DPTR
00A3 F9                MOV     R1,A
00A4 A3                INC     DPTR
00A5 E0                MOVX    A,@DPTR
00A6 FA                MOV     R2,A
00A7 A3                INC     DPTR
00A8 E0                MOVX    A,@DPTR
00A9 FB                MOV     R3,A
00AA AE00        R     MOV     R6,tmadc
00AC AF00        R     MOV     R7,tmadc+01H
00AE E4                CLR     A
00AF FC                MOV     R4,A
00B0 FD                MOV     R5,A
00B1 EB                MOV     A,R3
00B2 2F                ADD     A,R7
00B3 FF                MOV     R7,A
00B4 EA                MOV     A,R2
00B5 3E                ADDC    A,R6
00B6 FE                MOV     R6,A
00B7 E9                MOV     A,R1
00B8 3D                ADDC    A,R5
00B9 FD                MOV     R5,A
00BA E8                MOV     A,R0
00BB 3C                ADDC    A,R4
00BC FC                MOV     R4,A
00BD D082              POP     DPL
00BF D083              POP     DPH
00C1 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 606
00C4 E500        R     MOV     A,KOL
00C6 B40445            CJNE    A,#04H,?C0128
                                           ; SOURCE LINE # 607
                                           ; SOURCE LINE # 608
00C9 AF00        R     MOV     R7,N_K
00CB EF                MOV     A,R7
00CC 25E0              ADD     A,ACC
00CE 25E0              ADD     A,ACC
00D0 24DC              ADD     A,#LOW BUF_MN
00D2 F582              MOV     DPL,A
00D4 E4                CLR     A
00D5 3400              ADDC    A,#HIGH BUF_MN
00D7 F583              MOV     DPH,A
00D9 E0                MOVX    A,@DPTR
00DA FC                MOV     R4,A
00DB A3                INC     DPTR
00DC E0                MOVX    A,@DPTR
00DD FD                MOV     R5,A
00DE A3                INC     DPTR
00DF E0                MOVX    A,@DPTR
00E0 FE                MOV     R6,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 82  

00E1 A3                INC     DPTR
00E2 E0                MOVX    A,@DPTR
00E3 FF                MOV     R7,A
00E4 AB00        R     MOV     R3,N_K
00E6 EB                MOV     A,R3
00E7 25E0              ADD     A,ACC
00E9 25E0              ADD     A,ACC
00EB 2400        R     ADD     A,#LOW BUF_vr
00ED F582              MOV     DPL,A
00EF E4                CLR     A
00F0 3400        R     ADDC    A,#HIGH BUF_vr
00F2 F583              MOV     DPH,A
00F4 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 609
00F7 AF00        R     MOV     R7,N_K
00F9 EF                MOV     A,R7
00FA 25E0              ADD     A,ACC
00FC 25E0              ADD     A,ACC
00FE 24DC              ADD     A,#LOW BUF_MN
0100 F582              MOV     DPL,A
0102 E4                CLR     A
0103 3400              ADDC    A,#HIGH BUF_MN
0105 F583              MOV     DPH,A
0107 120000      E     LCALL   ?C?LSTKXDATA
010A 00                DB      00H
010B 00                DB      00H
010C 00                DB      00H
010D 00                DB      00H
                                           ; SOURCE LINE # 610
010E         ?C0128:
                                           ; SOURCE LINE # 612
010E 0500        R     INC     N_K
                                           ; SOURCE LINE # 613
0110 E500        R     MOV     A,N_K
0112 6407              XRL     A,#07H
0114 7076              JNZ     ?C0129
                                           ; SOURCE LINE # 614
                                           ; SOURCE LINE # 615
0116 750000      R     MOV     N_K,#00H
                                           ; SOURCE LINE # 616
0119 E500        R     MOV     A,KOL
011B 6404              XRL     A,#04H
011D 706B              JNZ     ?C0130
                                           ; SOURCE LINE # 617
                                           ; SOURCE LINE # 618
011F 750000      R     MOV     KOL,#00H
                                           ; SOURCE LINE # 620
0122 900000      R     MOV     DPTR,#WK_1
0125 E4                CLR     A
0126 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 621
0127 750001      R     MOV     kn,#01H
012A         ?C0131:
012A E500        R     MOV     A,kn
012C C3                CLR     C
012D 9409              SUBB    A,#09H
012F 504C              JNC     ?C0132
                                           ; SOURCE LINE # 622
                                           ; SOURCE LINE # 623
0131 900000      R     MOV     DPTR,#WK_1
0134 E0                MOVX    A,@DPTR
0135 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 83  

0136 EF                MOV     A,R7
0137 C3                CLR     C
0138 13                RRC     A
0139 FF                MOV     R7,A
013A 900000      R     MOV     DPTR,#WK_1
013D EF                MOV     A,R7
013E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 624
013F AF00        R     MOV     R7,kn
0141 EF                MOV     A,R7
0142 25E0              ADD     A,ACC
0144 2400        E     ADD     A,#LOW TAB_ADC+024H
0146 F582              MOV     DPL,A
0148 E4                CLR     A
0149 3400        E     ADDC    A,#HIGH TAB_ADC+024H
014B F583              MOV     DPH,A
014D E4                CLR     A
014E 93                MOVC    A,@A+DPTR
014F FE                MOV     R6,A
0150 7401              MOV     A,#01H
0152 93                MOVC    A,@A+DPTR
0153 FF                MOV     R7,A
0154 EF                MOV     A,R7
0155 54A8              ANL     A,#0A8H
0157 FF                MOV     R7,A
0158 E5A0              MOV     A,P2
015A 5457              ANL     A,#057H
015C FE                MOV     R6,A
015D EE                MOV     A,R6
015E 4F                ORL     A,R7
015F F5A0              MOV     P2,A
                                           ; SOURCE LINE # 625
0161 E580              MOV     A,P0
0163 5404              ANL     A,#04H
0165 FF                MOV     R7,A
0166 EF                MOV     A,R7
0167 C4                SWAP    A
0168 33                RLC     A
0169 54E0              ANL     A,#0E0H
016B FF                MOV     R7,A
016C 900000      R     MOV     DPTR,#WK_1
016F E0                MOVX    A,@DPTR
0170 FE                MOV     R6,A
0171 EF                MOV     A,R7
0172 4E                ORL     A,R6
0173 FF                MOV     R7,A
0174 900000      R     MOV     DPTR,#WK_1
0177 EF                MOV     A,R7
0178 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 626
0179         ?C0133:
0179 0500        R     INC     kn
017B 80AD              SJMP    ?C0131
017D         ?C0132:
                                           ; SOURCE LINE # 627
017D 900000      R     MOV     DPTR,#WK_1
0180 E0                MOVX    A,@DPTR
0181 FF                MOV     R7,A
0182 EF                MOV     A,R7
0183 F4                CPL     A
0184 FF                MOV     R7,A
0185 900000      R     MOV     DPTR,#WK_1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 84  

0188 EF                MOV     A,R7
0189 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 628
018A         ?C0130:
                                           ; SOURCE LINE # 629
018A 0500        R     INC     KOL
                                           ; SOURCE LINE # 630
018C         ?C0129:
                                           ; SOURCE LINE # 632
018C AF00        R     MOV     R7,N_K
018E EF                MOV     A,R7
018F C4                SWAP    A
0190 54F0              ANL     A,#0F0H
0192 2400        E     ADD     A,#LOW Str_CH_A+09H
0194 F582              MOV     DPL,A
0196 E4                CLR     A
0197 3400        E     ADDC    A,#HIGH Str_CH_A+09H
0199 F583              MOV     DPH,A
019B E0                MOVX    A,@DPTR
019C FF                MOV     R7,A
019D 900000      R     MOV     DPTR,#tm_kan
01A0 EF                MOV     A,R7
01A1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 633
01A2 900000      R     MOV     DPTR,#tm_kan
01A5 E0                MOVX    A,@DPTR
01A6 FF                MOV     R7,A
01A7 EF                MOV     A,R7
01A8 B4FF06            CJNE    A,#0FFH,?C0134
                                           ; SOURCE LINE # 634
01AB 900000      R     MOV     DPTR,#tm_kan
01AE 7405              MOV     A,#05H
01B0 F0                MOVX    @DPTR,A
01B1         ?C0134:
                                           ; SOURCE LINE # 657
01B1 900000      R     MOV     DPTR,#tm_kan
01B4 E0                MOVX    A,@DPTR
01B5 FF                MOV     R7,A
01B6 EF                MOV     A,R7
01B7 5403              ANL     A,#03H
01B9 FF                MOV     R7,A
01BA EF                MOV     A,R7
01BB 75F012            MOV     B,#012H
01BE A4                MUL     AB
01BF 2400        E     ADD     A,#LOW TAB_ADC
01C1 F582              MOV     DPL,A
01C3 E4                CLR     A
01C4 3400        E     ADDC    A,#HIGH TAB_ADC
01C6 F583              MOV     DPH,A
01C8 C083              PUSH    DPH
01CA C082              PUSH    DPL
01CC 900000      R     MOV     DPTR,#tm_kan
01CF E0                MOVX    A,@DPTR
01D0 FF                MOV     R7,A
01D1 EF                MOV     A,R7
01D2 13                RRC     A
01D3 13                RRC     A
01D4 543F              ANL     A,#03FH
01D6 FF                MOV     R7,A
01D7 D082              POP     DPL
01D9 D083              POP     DPH
01DB 75F002            MOV     B,#02H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 85  

01DE EF                MOV     A,R7
01DF 120000      E     LCALL   ?C?OFFXADD
01E2 E4                CLR     A
01E3 93                MOVC    A,@A+DPTR
01E4 F500        R     MOV     tmadc,A
01E6 7401              MOV     A,#01H
01E8 93                MOVC    A,@A+DPTR
01E9 F500        R     MOV     tmadc+01H,A
                                           ; SOURCE LINE # 658
01EB 75D403            MOV     SF,#03H
                                           ; SOURCE LINE # 659
01EE E500        R     MOV     A,tmadc
01F0 FF                MOV     R7,A
01F1 7E00              MOV     R6,#00H
01F3 EF                MOV     A,R7
01F4 4440              ORL     A,#040H
01F6 F5E6              MOV     ADC0CON2,A
                                           ; SOURCE LINE # 662
01F8 75D12A            MOV     ADCMODE,#02AH
                                           ; SOURCE LINE # 663
01FB         ?C0125:
                                           ; SOURCE LINE # 689
01FB         ?C0135:
01FB D0E0              POP     ACC
01FD FF                MOV     R7,A
01FE D0E0              POP     ACC
0200 FE                MOV     R6,A
0201 D0E0              POP     ACC
0203 FD                MOV     R5,A
0204 D0E0              POP     ACC
0206 FC                MOV     R4,A
0207 D0E0              POP     ACC
0209 FB                MOV     R3,A
020A D0E0              POP     ACC
020C FA                MOV     R2,A
020D D0E0              POP     ACC
020F F9                MOV     R1,A
0210 D0E0              POP     ACC
0212 F8                MOV     R0,A
0213 D0D0              POP     PSW
0215 D082              POP     DPL
0217 D083              POP     DPH
0219 D0F0              POP     B
021B D0E0              POP     ACC
021D 32                RETI    
             ; FUNCTION int_adc (END)

             ; FUNCTION ser_int (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D010            MOV     PSW,#010H
                                           ; SOURCE LINE # 692
                                           ; SOURCE LINE # 697
000D 209803            JB      RI,$ + 6H
0010 020000      R     LJMP    ?C0136
                                           ; SOURCE LINE # 698
                                           ; SOURCE LINE # 699
0013 7800        R     MOV     R0,#LOW tmp
0015 A699              MOV     @R0,SBUF
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 86  

                                           ; SOURCE LINE # 700
0017 C298              CLR     RI
                                           ; SOURCE LINE # 703
0019 30B603            JNB     WR,$ + 6H
001C 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 704
                                           ; SOURCE LINE # 705
                                           ; SOURCE LINE # 706
001F         ?C0137:
                                           ; SOURCE LINE # 708
001F 750000      R     MOV     priem,#00H
                                           ; SOURCE LINE # 710
0022 E500        R     MOV     A,st_ser
0024 6405              XRL     A,#05H
0026 6003              JZ      $ + 5H
0028 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 711
002B         ?C0139:
                                           ; SOURCE LINE # 713
002B 0500        R     INC     nr
                                           ; SOURCE LINE # 714
002D E500        R     MOV     A,nr
002F D3                SETB    C
0030 9422              SUBB    A,#022H
0032 4006              JC      ?C0140
                                           ; SOURCE LINE # 715
                                           ; SOURCE LINE # 716
0034 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 717
0037 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 718
003A         ?C0140:
                                           ; SOURCE LINE # 720
003A E500        R     MOV     A,nr
003C 6402              XRL     A,#02H
003E 7034              JNZ     ?C0141
                                           ; SOURCE LINE # 721
                                           ; SOURCE LINE # 722
0040 7800        R     MOV     R0,#LOW tmp
0042 E6                MOV     A,@R0
0043 FF                MOV     R7,A
0044 EF                MOV     A,R7
0045 D3                SETB    C
0046 9406              SUBB    A,#06H
0048 4004              JC      ?C0143
004A 7F01              MOV     R7,#01H
004C 8002              SJMP    ?C0144
004E         ?C0143:
004E 7F00              MOV     R7,#00H
0050         ?C0144:
0050 7800        R     MOV     R0,#LOW tmp
0052 E6                MOV     A,@R0
0053 FE                MOV     R6,A
0054 EE                MOV     A,R6
0055 C3                CLR     C
0056 9424              SUBB    A,#024H
0058 5004              JNC     ?C0145
005A 7E01              MOV     R6,#01H
005C 8002              SJMP    ?C0146
005E         ?C0145:
005E 7E00              MOV     R6,#00H
0060         ?C0146:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 87  

0060 EE                MOV     A,R6
0061 5F                ANL     A,R7
0062 FF                MOV     R7,A
0063 EF                MOV     A,R7
0064 6008              JZ      ?C0142
                                           ; SOURCE LINE # 723
                                           ; SOURCE LINE # 724
0066 7800        R     MOV     R0,#LOW tmp
0068 E6                MOV     A,@R0
0069 FF                MOV     R7,A
006A 8F00        R     MOV     Len_p,R7
                                           ; SOURCE LINE # 725
006C 8006              SJMP    ?C0141
006E         ?C0142:
                                           ; SOURCE LINE # 727
                                           ; SOURCE LINE # 728
006E 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 729
0071 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 730
0074         ?C0147:
                                           ; SOURCE LINE # 731
0074         ?C0141:
                                           ; SOURCE LINE # 734
0074 E500        R     MOV     A,nr
0076 700F              JNZ     ?C0148
                                           ; SOURCE LINE # 735
                                           ; SOURCE LINE # 736
0078 7800        R     MOV     R0,#LOW tmp
007A E6                MOV     A,@R0
007B FF                MOV     R7,A
007C EF                MOV     A,R7
007D 647E              XRL     A,#07EH
007F 6006              JZ      ?C0148
                                           ; SOURCE LINE # 737
                                           ; SOURCE LINE # 738
0081 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 739
0084 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 740
0087         ?C0149:
                                           ; SOURCE LINE # 741
0087         ?C0148:
                                           ; SOURCE LINE # 743
0087 E500        R     MOV     A,nr
0089 6401              XRL     A,#01H
008B 6003              JZ      $ + 5H
008D 020000      R     LJMP    ?C0150
                                           ; SOURCE LINE # 744
                                           ; SOURCE LINE # 745
0090 7800        R     MOV     R0,#LOW tmp
0092 E6                MOV     A,@R0
0093 FF                MOV     R7,A
0094 EF                MOV     A,R7
0095 6500        R     XRL     A,lineadd
0097 6004              JZ      ?C0152
0099 7F01              MOV     R7,#01H
009B 8002              SJMP    ?C0153
009D         ?C0152:
009D 7F00              MOV     R7,#00H
009F         ?C0153:
009F 7800        R     MOV     R0,#LOW tmp
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 88  

00A1 E6                MOV     A,@R0
00A2 FE                MOV     R6,A
00A3 EE                MOV     A,R6
00A4 643F              XRL     A,#03FH
00A6 6004              JZ      ?C0154
00A8 7E01              MOV     R6,#01H
00AA 8002              SJMP    ?C0155
00AC         ?C0154:
00AC 7E00              MOV     R6,#00H
00AE         ?C0155:
00AE EF                MOV     A,R7
00AF 5E                ANL     A,R6
00B0 FF                MOV     R7,A
00B1 7800        R     MOV     R0,#LOW lineadd_dop
00B3 E6                MOV     A,@R0
00B4 FE                MOV     R6,A
00B5 7800        R     MOV     R0,#LOW tmp
00B7 E6                MOV     A,@R0
00B8 FD                MOV     R5,A
00B9 ED                MOV     A,R5
00BA 6E                XRL     A,R6
00BB 6004              JZ      ?C0156
00BD 7E01              MOV     R6,#01H
00BF 8002              SJMP    ?C0157
00C1         ?C0156:
00C1 7E00              MOV     R6,#00H
00C3         ?C0157:
00C3 EE                MOV     A,R6
00C4 5F                ANL     A,R7
00C5 FF                MOV     R7,A
00C6 EF                MOV     A,R7
00C7 7003              JNZ     $ + 5H
00C9 020000      R     LJMP    ?C0150
                                           ; SOURCE LINE # 746
                                           ; SOURCE LINE # 747
00CC 7800        R     MOV     R0,#LOW tmp
00CE E6                MOV     A,@R0
00CF FF                MOV     R7,A
00D0 EF                MOV     A,R7
00D1 B4FF06            CJNE    A,#0FFH,?C0158
                                           ; SOURCE LINE # 748
                                           ; SOURCE LINE # 749
00D4 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 750
00D7 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 751
00DA         ?C0158:
                                           ; SOURCE LINE # 752
00DA 900000      R     MOV     DPTR,#rele_prin+06H
00DD E0                MOVX    A,@DPTR
00DE FF                MOV     R7,A
00DF 7800        R     MOV     R0,#LOW tmp
00E1 E6                MOV     A,@R0
00E2 FE                MOV     R6,A
00E3 EE                MOV     A,R6
00E4 6F                XRL     A,R7
00E5 6004              JZ      ?C0160
00E7 7F01              MOV     R7,#01H
00E9 8002              SJMP    ?C0161
00EB         ?C0160:
00EB 7F00              MOV     R7,#00H
00ED         ?C0161:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 89  

00ED 900000      R     MOV     DPTR,#rele_prin
00F0 E0                MOVX    A,@DPTR
00F1 FE                MOV     R6,A
00F2 7800        R     MOV     R0,#LOW tmp
00F4 E6                MOV     A,@R0
00F5 FD                MOV     R5,A
00F6 ED                MOV     A,R5
00F7 6E                XRL     A,R6
00F8 6004              JZ      ?C0162
00FA 7E01              MOV     R6,#01H
00FC 8002              SJMP    ?C0163
00FE         ?C0162:
00FE 7E00              MOV     R6,#00H
0100         ?C0163:
0100 EE                MOV     A,R6
0101 4F                ORL     A,R7
0102 FF                MOV     R7,A
0103 900000      R     MOV     DPTR,#rele_prin+0CH
0106 E0                MOVX    A,@DPTR
0107 FE                MOV     R6,A
0108 7800        R     MOV     R0,#LOW tmp
010A E6                MOV     A,@R0
010B FD                MOV     R5,A
010C ED                MOV     A,R5
010D 6E                XRL     A,R6
010E 6004              JZ      ?C0164
0110 7E01              MOV     R6,#01H
0112 8002              SJMP    ?C0165
0114         ?C0164:
0114 7E00              MOV     R6,#00H
0116         ?C0165:
0116 EE                MOV     A,R6
0117 4F                ORL     A,R7
0118 FF                MOV     R7,A
0119 900000      R     MOV     DPTR,#rele_prin+012H
011C E0                MOVX    A,@DPTR
011D FE                MOV     R6,A
011E 7800        R     MOV     R0,#LOW tmp
0120 E6                MOV     A,@R0
0121 FD                MOV     R5,A
0122 ED                MOV     A,R5
0123 6E                XRL     A,R6
0124 6004              JZ      ?C0166
0126 7E01              MOV     R6,#01H
0128 8002              SJMP    ?C0167
012A         ?C0166:
012A 7E00              MOV     R6,#00H
012C         ?C0167:
012C EE                MOV     A,R6
012D 4F                ORL     A,R7
012E FF                MOV     R7,A
012F 900000      R     MOV     DPTR,#rele_prin+018H
0132 E0                MOVX    A,@DPTR
0133 FE                MOV     R6,A
0134 7800        R     MOV     R0,#LOW tmp
0136 E6                MOV     A,@R0
0137 FD                MOV     R5,A
0138 ED                MOV     A,R5
0139 6E                XRL     A,R6
013A 6004              JZ      ?C0168
013C 7E01              MOV     R6,#01H
013E 8002              SJMP    ?C0169
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 90  

0140         ?C0168:
0140 7E00              MOV     R6,#00H
0142         ?C0169:
0142 EE                MOV     A,R6
0143 4F                ORL     A,R7
0144 FF                MOV     R7,A
0145 EF                MOV     A,R7
0146 6006              JZ      ?C0150
                                           ; SOURCE LINE # 753
                                           ; SOURCE LINE # 754
0148 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 755
014B 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 756
014E         ?C0159:
                                           ; SOURCE LINE # 757
014E         ?C0151:
                                           ; SOURCE LINE # 758
014E         ?C0150:
                                           ; SOURCE LINE # 760
014E 7800        R     MOV     R0,#LOW tmp
0150 E6                MOV     A,@R0
0151 FF                MOV     R7,A
0152 AE00        R     MOV     R6,nr
0154 7480              MOV     A,#LOW xbufin
0156 2E                ADD     A,R6
0157 F582              MOV     DPL,A
0159 E4                CLR     A
015A 3400              ADDC    A,#HIGH xbufin
015C F583              MOV     DPH,A
015E EF                MOV     A,R7
015F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 762
0160 E500        R     MOV     A,nr
0162 6500        R     XRL     A,Len_p
0164 7004              JNZ     ?C0171
0166 7F01              MOV     R7,#01H
0168 8002              SJMP    ?C0172
016A         ?C0171:
016A 7F00              MOV     R7,#00H
016C         ?C0172:
016C E500        R     MOV     A,nr
016E D3                SETB    C
016F 9406              SUBB    A,#06H
0171 4004              JC      ?C0173
0173 7E01              MOV     R6,#01H
0175 8002              SJMP    ?C0174
0177         ?C0173:
0177 7E00              MOV     R6,#00H
0179         ?C0174:
0179 EE                MOV     A,R6
017A 5F                ANL     A,R7
017B FF                MOV     R7,A
017C EF                MOV     A,R7
017D 7003              JNZ     $ + 5H
017F 020000      R     LJMP    ?C0136
                                           ; SOURCE LINE # 763
                                           ; SOURCE LINE # 764
0182 750032      R     MOV     st_ser,#032H
                                           ; SOURCE LINE # 769
0185 7500FF      R     MOV     crc,#0FFH
0188 7500FF      R     MOV     crc+01H,#0FFH
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 91  

                                           ; SOURCE LINE # 770
018B E500        R     MOV     A,r_crc
018D 64FF              XRL     A,#0FFH
018F 7038              JNZ     ?C0175
                                           ; SOURCE LINE # 771
                                           ; SOURCE LINE # 772
0191 750000      R     MOV     i,#00H
0194         ?C0176:
0194 E500        R     MOV     A,i
0196 C3                CLR     C
0197 9500        R     SUBB    A,Len_p
0199 4003              JC      $ + 5H
019B 020000      R     LJMP    ?C0180
                                           ; SOURCE LINE # 773
                                           ; SOURCE LINE # 774
019E E500        R     MOV     A,i
01A0 B40106            CJNE    A,#01H,?C0179
01A3 750000      R     MOV     crc,#00H
01A6 750000      R     MOV     crc+01H,#00H
01A9         ?C0179:
                                           ; SOURCE LINE # 775
01A9 AF00        R     MOV     R7,i
01AB 7480              MOV     A,#LOW xbufin
01AD 2F                ADD     A,R7
01AE F582              MOV     DPL,A
01B0 E4                CLR     A
01B1 3400              ADDC    A,#HIGH xbufin
01B3 F583              MOV     DPH,A
01B5 E0                MOVX    A,@DPTR
01B6 FF                MOV     R7,A
01B7 7E00              MOV     R6,#00H
01B9 EF                MOV     A,R7
01BA 2500        R     ADD     A,crc+01H
01BC F500        R     MOV     crc+01H,A
01BE EE                MOV     A,R6
01BF 3500        R     ADDC    A,crc
01C1 F500        R     MOV     crc,A
                                           ; SOURCE LINE # 776
01C3         ?C0178:
01C3 0500        R     INC     i
01C5 80CD              SJMP    ?C0176
01C7         ?C0177:
                                           ; SOURCE LINE # 777
01C7 8060              SJMP    ?C0180
01C9         ?C0175:
                                           ; SOURCE LINE # 779
01C9 750001      R     MOV     i,#01H
01CC         ?C0181:
01CC E500        R     MOV     A,Len_p
01CE 14                DEC     A
01CF FF                MOV     R7,A
01D0 E500        R     MOV     A,i
01D2 C3                CLR     C
01D3 9F                SUBB    A,R7
01D4 5053              JNC     ?C0180
                                           ; SOURCE LINE # 780
                                           ; SOURCE LINE # 781
01D6 AF00        R     MOV     R7,i
01D8 7480              MOV     A,#LOW xbufin
01DA 2F                ADD     A,R7
01DB F582              MOV     DPL,A
01DD E4                CLR     A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 92  

01DE 3400              ADDC    A,#HIGH xbufin
01E0 F583              MOV     DPH,A
01E2 E0                MOVX    A,@DPTR
01E3 FF                MOV     R7,A
01E4 7E00              MOV     R6,#00H
01E6 8E00        R     MOV     tmpbait,R6
01E8 8F00        R     MOV     tmpbait+01H,R7
                                           ; SOURCE LINE # 782
01EA 7E00              MOV     R6,#00H
01EC AF00        R     MOV     R7,crc+01H
01EE 0500        R     INC     tmpbait+01H
01F0 E500        R     MOV     A,tmpbait+01H
01F2 AC00        R     MOV     R4,tmpbait
01F4 7002              JNZ     ?C0744
01F6 0500        R     INC     tmpbait
01F8         ?C0744:
01F8 14                DEC     A
01F9 FD                MOV     R5,A
01FA EE                MOV     A,R6
01FB 6C                XRL     A,R4
01FC FE                MOV     R6,A
01FD EF                MOV     A,R7
01FE 6D                XRL     A,R5
01FF FF                MOV     R7,A
0200 EF                MOV     A,R7
0201 25E0              ADD     A,ACC
0203 FF                MOV     R7,A
0204 EE                MOV     A,R6
0205 33                RLC     A
0206 FE                MOV     R6,A
0207 7400        R     MOV     A,#LOW Crc16Table
0209 2F                ADD     A,R7
020A F582              MOV     DPL,A
020C 7400        R     MOV     A,#HIGH Crc16Table
020E 3E                ADDC    A,R6
020F F583              MOV     DPH,A
0211 E4                CLR     A
0212 93                MOVC    A,@A+DPTR
0213 FC                MOV     R4,A
0214 7401              MOV     A,#01H
0216 93                MOVC    A,@A+DPTR
0217 FD                MOV     R5,A
0218 E500        R     MOV     A,crc
021A FF                MOV     R7,A
021B 7E00              MOV     R6,#00H
021D EE                MOV     A,R6
021E 6C                XRL     A,R4
021F F500        R     MOV     crc,A
0221 EF                MOV     A,R7
0222 6D                XRL     A,R5
0223 F500        R     MOV     crc+01H,A
                                           ; SOURCE LINE # 784
0225         ?C0183:
0225 0500        R     INC     i
0227 80A3              SJMP    ?C0181
0229         ?C0182:
0229         ?C0180:
                                           ; SOURCE LINE # 786
0229 E500        R     MOV     A,crc
022B FF                MOV     R7,A
022C 7E00              MOV     R6,#00H
022E AD00        R     MOV     R5,nr
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 93  

0230 747F              MOV     A,#LOW xbufin+0FFFFH
0232 2D                ADD     A,R5
0233 F582              MOV     DPL,A
0235 E4                CLR     A
0236 3400              ADDC    A,#HIGH xbufin+0FFFFH
0238 F583              MOV     DPH,A
023A E0                MOVX    A,@DPTR
023B FD                MOV     R5,A
023C 7C00              MOV     R4,#00H
023E EF                MOV     A,R7
023F 6D                XRL     A,R5
0240 7002              JNZ     ?C0745
0242 EE                MOV     A,R6
0243 6C                XRL     A,R4
0244         ?C0745:
0244 7004              JNZ     ?C0185
0246 7F01              MOV     R7,#01H
0248 8002              SJMP    ?C0186
024A         ?C0185:
024A 7F00              MOV     R7,#00H
024C         ?C0186:
024C E500        R     MOV     A,r_crc
024E B4FF04            CJNE    A,#0FFH,?C0187
0251 7E01              MOV     R6,#01H
0253 8002              SJMP    ?C0188
0255         ?C0187:
0255 7E00              MOV     R6,#00H
0257         ?C0188:
0257 EE                MOV     A,R6
0258 4F                ORL     A,R7
0259 FF                MOV     R7,A
025A 7C00              MOV     R4,#00H
025C AD00        R     MOV     R5,crc+01H
025E 7800        R     MOV     R0,#LOW tmp
0260 E6                MOV     A,@R0
0261 FE                MOV     R6,A
0262 EE                MOV     A,R6
0263 FB                MOV     R3,A
0264 7A00              MOV     R2,#00H
0266 ED                MOV     A,R5
0267 6B                XRL     A,R3
0268 7002              JNZ     ?C0746
026A EC                MOV     A,R4
026B 6A                XRL     A,R2
026C         ?C0746:
026C 7004              JNZ     ?C0189
026E 7E01              MOV     R6,#01H
0270 8002              SJMP    ?C0190
0272         ?C0189:
0272 7E00              MOV     R6,#00H
0274         ?C0190:
0274 EE                MOV     A,R6
0275 5F                ANL     A,R7
0276 FF                MOV     R7,A
0277 EF                MOV     A,R7
0278 7003              JNZ     $ + 5H
027A 020000      R     LJMP    ?C0184
                                           ; SOURCE LINE # 787
                                           ; SOURCE LINE # 788
027D 900085            MOV     DPTR,#xbufin+05H
0280 E0                MOVX    A,@DPTR
0281 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 94  

0282 8F00        R     MOV     len_o,R7
                                           ; SOURCE LINE # 789
0284 E500        R     MOV     A,len_o
0286 D3                SETB    C
0287 941C              SUBB    A,#01CH
0289 4006              JC      ?C0191
                                           ; SOURCE LINE # 790
028B 75000A      R     MOV     st_ser,#0AH
028E 020000      R     LJMP    ?C0307
0291         ?C0191:
                                           ; SOURCE LINE # 795
0291 7800        R     MOV     R0,#LOW lineadd_dop
0293 E6                MOV     A,@R0
0294 FF                MOV     R7,A
0295 900081            MOV     DPTR,#xbufin+01H
0298 E0                MOVX    A,@DPTR
0299 FE                MOV     R6,A
029A EE                MOV     A,R6
029B 6F                XRL     A,R7
029C 7004              JNZ     ?C0193
029E 7F01              MOV     R7,#01H
02A0 8002              SJMP    ?C0194
02A2         ?C0193:
02A2 7F00              MOV     R7,#00H
02A4         ?C0194:
02A4 7800        R     MOV     R0,#LOW lineadd_dop
02A6 E6                MOV     A,@R0
02A7 FE                MOV     R6,A
02A8 EE                MOV     A,R6
02A9 64FF              XRL     A,#0FFH
02AB 6004              JZ      ?C0195
02AD 7E01              MOV     R6,#01H
02AF 8002              SJMP    ?C0196
02B1         ?C0195:
02B1 7E00              MOV     R6,#00H
02B3         ?C0196:
02B3 EE                MOV     A,R6
02B4 5F                ANL     A,R7
02B5 FF                MOV     R7,A
02B6 EF                MOV     A,R7
02B7 7003              JNZ     $ + 5H
02B9 020000      R     LJMP    ?C0192
                                           ; SOURCE LINE # 796
                                           ; SOURCE LINE # 799
                                           ; SOURCE LINE # 803
02BC 900000      R     MOV     DPTR,#paket_BO+03H
02BF E0                MOVX    A,@DPTR
02C0 FE                MOV     R6,A
02C1 A3                INC     DPTR
02C2 E0                MOVX    A,@DPTR
02C3 FF                MOV     R7,A
02C4 7480              MOV     A,#LOW xbufin
02C6 2F                ADD     A,R7
02C7 F582              MOV     DPL,A
02C9 E4                CLR     A
02CA 3400              ADDC    A,#HIGH xbufin
02CC F583              MOV     DPH,A
02CE E0                MOVX    A,@DPTR
02CF FF                MOV     R7,A
02D0 7E00              MOV     R6,#00H
02D2 8E00        E     MOV     DAC_PRIN,R6
02D4 8F00        E     MOV     DAC_PRIN+01H,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 95  

                                           ; SOURCE LINE # 804
02D6 E500        E     MOV     A,DAC_PRIN+01H
02D8 750000      E     MOV     DAC_PRIN+01H,#00H
02DB F500        E     MOV     DAC_PRIN,A
                                           ; SOURCE LINE # 805
02DD 900000      R     MOV     DPTR,#paket_BO+03H
02E0 E0                MOVX    A,@DPTR
02E1 FE                MOV     R6,A
02E2 A3                INC     DPTR
02E3 E0                MOVX    A,@DPTR
02E4 FF                MOV     R7,A
02E5 7481              MOV     A,#LOW xbufin+01H
02E7 2F                ADD     A,R7
02E8 F582              MOV     DPL,A
02EA E4                CLR     A
02EB 3400              ADDC    A,#HIGH xbufin+01H
02ED F583              MOV     DPH,A
02EF E0                MOVX    A,@DPTR
02F0 FF                MOV     R7,A
02F1 7E00              MOV     R6,#00H
02F3 EF                MOV     A,R7
02F4 2500        E     ADD     A,DAC_PRIN+01H
02F6 F500        E     MOV     DAC_PRIN+01H,A
02F8 EE                MOV     A,R6
02F9 3500        E     ADDC    A,DAC_PRIN
02FB F500        E     MOV     DAC_PRIN,A
                                           ; SOURCE LINE # 807
02FD 900000      R     MOV     DPTR,#paket_BO+01H
0300 E0                MOVX    A,@DPTR
0301 FF                MOV     R7,A
0302 7480              MOV     A,#LOW xbufin
0304 2F                ADD     A,R7
0305 F582              MOV     DPL,A
0307 E4                CLR     A
0308 3400              ADDC    A,#HIGH xbufin
030A F583              MOV     DPH,A
030C E0                MOVX    A,@DPTR
030D FF                MOV     R7,A
030E EF                MOV     A,R7
030F 13                RRC     A
0310 9200        R     MOV     bRELE,C
0312 A200        R     MOV     C,bRELE
0314 B3                CPL     C
0315 9283              MOV     RELE1,C
                                           ; SOURCE LINE # 809
0317 900000      R     MOV     DPTR,#paket_BO+02H
031A E0                MOVX    A,@DPTR
031B FF                MOV     R7,A
031C 7480              MOV     A,#LOW xbufin
031E 2F                ADD     A,R7
031F F582              MOV     DPL,A
0321 E4                CLR     A
0322 3400              ADDC    A,#HIGH xbufin
0324 F583              MOV     DPH,A
0326 E0                MOVX    A,@DPTR
0327 FF                MOV     R7,A
0328 EF                MOV     A,R7
0329 13                RRC     A
032A 9200        R     MOV     bRELE,C
032C A200        R     MOV     C,bRELE
032E B3                CPL     C
032F 92B7              MOV     RD,C
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 96  

                                           ; SOURCE LINE # 848
                                           ; SOURCE LINE # 850
0331 75000A      R     MOV     st_ser,#0AH
0334 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 851
0337 020000      R     LJMP    ?C0136
033A         ?C0192:
                                           ; SOURCE LINE # 853
                                           ; SOURCE LINE # 855
033A 900081            MOV     DPTR,#xbufin+01H
033D E0                MOVX    A,@DPTR
033E FF                MOV     R7,A
033F EF                MOV     A,R7
0340 6500        R     XRL     A,lineadd
0342 7004              JNZ     ?C0199
0344 7F01              MOV     R7,#01H
0346 8002              SJMP    ?C0200
0348         ?C0199:
0348 7F00              MOV     R7,#00H
034A         ?C0200:
034A 900081            MOV     DPTR,#xbufin+01H
034D E0                MOVX    A,@DPTR
034E FE                MOV     R6,A
034F EE                MOV     A,R6
0350 B43F04            CJNE    A,#03FH,?C0201
0353 7E01              MOV     R6,#01H
0355 8002              SJMP    ?C0202
0357         ?C0201:
0357 7E00              MOV     R6,#00H
0359         ?C0202:
0359 EF                MOV     A,R7
035A 4E                ORL     A,R6
035B FF                MOV     R7,A
035C EF                MOV     A,R7
035D 7003              JNZ     $ + 5H
035F 020000      R     LJMP    ?C0198
                                           ; SOURCE LINE # 856
                                           ; SOURCE LINE # 857
0362 750000      R     MOV     i,#00H
0365         ?C0203:
0365 E500        R     MOV     A,i
0367 C3                CLR     C
0368 9500        R     SUBB    A,Len_p
036A 5020              JNC     ?C0204
                                           ; SOURCE LINE # 858
036C AF00        R     MOV     R7,i
036E 7480              MOV     A,#LOW xbufin
0370 2F                ADD     A,R7
0371 F582              MOV     DPL,A
0373 E4                CLR     A
0374 3400              ADDC    A,#HIGH xbufin
0376 F583              MOV     DPH,A
0378 E0                MOVX    A,@DPTR
0379 FF                MOV     R7,A
037A AE00        R     MOV     R6,i
037C 7400        R     MOV     A,#LOW zbuf
037E 2E                ADD     A,R6
037F F582              MOV     DPL,A
0381 E4                CLR     A
0382 3400        R     ADDC    A,#HIGH zbuf
0384 F583              MOV     DPH,A
0386 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 97  

0387 F0                MOVX    @DPTR,A
0388         ?C0205:
0388 0500        R     INC     i
038A 80D9              SJMP    ?C0203
038C         ?C0204:
                                           ; SOURCE LINE # 860
038C 900081            MOV     DPTR,#xbufin+01H
038F E0                MOVX    A,@DPTR
0390 FF                MOV     R7,A
0391 EF                MOV     A,R7
0392 4480              ORL     A,#080H
0394 FF                MOV     R7,A
0395 900000      R     MOV     DPTR,#zbuf+01H
0398 EF                MOV     A,R7
0399 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 861
039A 900000      R     MOV     DPTR,#zbuf+03H
039D E0                MOVX    A,@DPTR
039E FF                MOV     R7,A
039F EF                MOV     A,R7
03A0 5403              ANL     A,#03H
03A2 F500        R     MOV     cmd,A
                                           ; SOURCE LINE # 863
03A4 900000      R     MOV     DPTR,#zbuf+03H
03A7 E0                MOVX    A,@DPTR
03A8 FF                MOV     R7,A
03A9 EF                MOV     A,R7
03AA 54E0              ANL     A,#0E0H
03AC FF                MOV     R7,A
03AD EF                MOV     A,R7
03AE 7003              JNZ     $ + 5H
03B0 020000      R     LJMP    ?C0206
                                           ; SOURCE LINE # 864
                                           ; SOURCE LINE # 865
03B3 E500        R     MOV     A,len_o
03B5 6418              XRL     A,#018H
03B7 600D              JZ      ?C0207
                                           ; SOURCE LINE # 866
03B9 E500        R     MOV     A,len_o
03BB D3                SETB    C
03BC 9416              SUBB    A,#016H
03BE 4006              JC      ?C0207
                                           ; SOURCE LINE # 867
03C0 75000A      R     MOV     st_ser,#0AH
03C3 020000      R     LJMP    ?C0307
03C6         ?C0208:
03C6         ?C0207:
                                           ; SOURCE LINE # 868
03C6 900083            MOV     DPTR,#xbufin+03H
03C9 E0                MOVX    A,@DPTR
03CA FF                MOV     R7,A
03CB EF                MOV     A,R7
03CC 541C              ANL     A,#01CH
03CE FF                MOV     R7,A
03CF EF                MOV     A,R7
03D0 6006              JZ      ?C0209
                                           ; SOURCE LINE # 869
03D2 75000A      R     MOV     st_ser,#0AH
03D5 020000      R     LJMP    ?C0307
03D8         ?C0209:
                                           ; SOURCE LINE # 870
03D8 900000      R     MOV     DPTR,#zbuf+03H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 98  

03DB E0                MOVX    A,@DPTR
03DC FF                MOV     R7,A
03DD EF                MOV     A,R7
03DE 541C              ANL     A,#01CH
03E0 FF                MOV     R7,A
03E1 EF                MOV     A,R7
03E2 6006              JZ      ?C0210
                                           ; SOURCE LINE # 871
03E4 75000A      R     MOV     st_ser,#0AH
03E7 020000      R     LJMP    ?C0307
03EA         ?C0210:
                                           ; SOURCE LINE # 873
03EA 900000      R     MOV     DPTR,#zbuf+03H
03ED E0                MOVX    A,@DPTR
03EE FF                MOV     R7,A
03EF EF                MOV     A,R7
03F0 54E0              ANL     A,#0E0H
03F2 FF                MOV     R7,A
03F3 7E00              MOV     R6,#00H
03F5 8E00        R     MOV     ED,R6
03F7 8F00        R     MOV     ED+01H,R7
                                           ; SOURCE LINE # 874
03F9 E500        R     MOV     A,ED+01H
03FB AE00        R     MOV     R6,ED
03FD 7803              MOV     R0,#03H
03FF         ?C0747:
03FF C3                CLR     C
0400 33                RLC     A
0401 CE                XCH     A,R6
0402 33                RLC     A
0403 CE                XCH     A,R6
0404 D8F9              DJNZ    R0,?C0747
0406 F500        R     MOV     ED+01H,A
0408 8E00        R     MOV     ED,R6
                                           ; SOURCE LINE # 875
040A 900000      R     MOV     DPTR,#zbuf+04H
040D E0                MOVX    A,@DPTR
040E FF                MOV     R7,A
040F 7E00              MOV     R6,#00H
0411 EF                MOV     A,R7
0412 2500        R     ADD     A,ED+01H
0414 FF                MOV     R7,A
0415 EE                MOV     A,R6
0416 3500        R     ADDC    A,ED
0418 FE                MOV     R6,A
0419 EF                MOV     A,R7
041A 2400              ADD     A,#00H
041C F500        R     MOV     ED+01H,A
041E EE                MOV     A,R6
041F 34FF              ADDC    A,#0FFH
0421 F500        R     MOV     ED,A
                                           ; SOURCE LINE # 878
0423 E500        R     MOV     A,cmd
0425 B40304            CJNE    A,#03H,?C0212
0428 7F01              MOV     R7,#01H
042A 8002              SJMP    ?C0213
042C         ?C0212:
042C 7F00              MOV     R7,#00H
042E         ?C0213:
042E E500        R     MOV     A,cmd
0430 B40104            CJNE    A,#01H,?C0214
0433 7E01              MOV     R6,#01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 99  

0435 8002              SJMP    ?C0215
0437         ?C0214:
0437 7E00              MOV     R6,#00H
0439         ?C0215:
0439 EE                MOV     A,R6
043A 4F                ORL     A,R7
043B FF                MOV     R7,A
043C EF                MOV     A,R7
043D 6027              JZ      ?C0211
                                           ; SOURCE LINE # 879
                                           ; SOURCE LINE # 880
043F E500        R     MOV     A,Len_p
0441 24F9              ADD     A,#0F9H
0443 FF                MOV     R7,A
0444 EF                MOV     A,R7
0445 6500        R     XRL     A,len_o
0447 6004              JZ      ?C0217
0449 7F01              MOV     R7,#01H
044B 8002              SJMP    ?C0218
044D         ?C0217:
044D 7F00              MOV     R7,#00H
044F         ?C0218:
044F 200004      R     JB      FL_BLOK_EPROM,?C0219
0452 7E01              MOV     R6,#01H
0454 8002              SJMP    ?C0220
0456         ?C0219:
0456 7E00              MOV     R6,#00H
0458         ?C0220:
0458 EF                MOV     A,R7
0459 4E                ORL     A,R6
045A FF                MOV     R7,A
045B EF                MOV     A,R7
045C 6006              JZ      ?C0216
                                           ; SOURCE LINE # 881
045E 75000A      R     MOV     st_ser,#0AH
0461 020000      R     LJMP    ?C0307
0464         ?C0216:
                                           ; SOURCE LINE # 882
0464 D200        R     SETB    Eprom_zap
                                           ; SOURCE LINE # 883
0466         ?C0211:
                                           ; SOURCE LINE # 886
0466 E500        R     MOV     A,cmd
0468 B40202            CJNE    A,#02H,?C0206
                                           ; SOURCE LINE # 887
                                           ; SOURCE LINE # 888
046B D200        R     SETB    Eprom_ch
                                           ; SOURCE LINE # 889
046D         ?C0221:
                                           ; SOURCE LINE # 891
046D         ?C0206:
                                           ; SOURCE LINE # 894
046D 900000      R     MOV     DPTR,#zbuf+03H
0470 E0                MOVX    A,@DPTR
0471 FF                MOV     R7,A
0472 EF                MOV     A,R7
0473 54E0              ANL     A,#0E0H
0475 FF                MOV     R7,A
0476 EF                MOV     A,R7
0477 6003              JZ      $ + 5H
0479 020000      R     LJMP    ?C0222
                                           ; SOURCE LINE # 895
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 100 

                                           ; SOURCE LINE # 896
047C 900000      R     MOV     DPTR,#zbuf+04H
047F E0                MOVX    A,@DPTR
0480 FF                MOV     R7,A
0481 EF                MOV     A,R7
0482 7063              JNZ     ?C0223
                                           ; SOURCE LINE # 897
                                           ; SOURCE LINE # 898
0484 A200        R     MOV     C,fl_buf
0486 E4                CLR     A
0487 33                RLC     A
0488 FF                MOV     R7,A
0489 E500        R     MOV     A,cmd
048B B40204            CJNE    A,#02H,?C0225
048E 7E01              MOV     R6,#01H
0490 8002              SJMP    ?C0226
0492         ?C0225:
0492 7E00              MOV     R6,#00H
0494         ?C0226:
0494 EE                MOV     A,R6
0495 5F                ANL     A,R7
0496 FF                MOV     R7,A
0497 EF                MOV     A,R7
0498 604D              JZ      ?C0223
                                           ; SOURCE LINE # 899
                                           ; SOURCE LINE # 900
049A 750000      R     MOV     i,#00H
049D         ?C0227:
049D E500        R     MOV     A,i
049F C3                CLR     C
04A0 9500        R     SUBB    A,len_o
04A2 5020              JNC     ?C0228
                                           ; SOURCE LINE # 901
                                           ; SOURCE LINE # 902
04A4 AF00        R     MOV     R7,i
04A6 74C0              MOV     A,#LOW lbuf_dn
04A8 2F                ADD     A,R7
04A9 F582              MOV     DPL,A
04AB E4                CLR     A
04AC 3400              ADDC    A,#HIGH lbuf_dn
04AE F583              MOV     DPH,A
04B0 E0                MOVX    A,@DPTR
04B1 FF                MOV     R7,A
04B2 AE00        R     MOV     R6,i
04B4 7446              MOV     A,#LOW bufout+06H
04B6 2E                ADD     A,R6
04B7 F582              MOV     DPL,A
04B9 E4                CLR     A
04BA 3400              ADDC    A,#HIGH bufout+06H
04BC F583              MOV     DPH,A
04BE EF                MOV     A,R7
04BF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 903
04C0         ?C0229:
04C0 0500        R     INC     i
04C2 80D9              SJMP    ?C0227
04C4         ?C0228:
                                           ; SOURCE LINE # 904
04C4 D2B6              SETB    WR
04C6 7406              MOV     A,#06H
04C8 2500        R     ADD     A,len_o
04CA F500        R     MOV     len_o,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 101 

                                           ; SOURCE LINE # 905
04CC 7800        R     MOV     R0,#LOW TM_LINE
04CE E6                MOV     A,@R0
04CF FF                MOV     R7,A
04D0 7800        R     MOV     R0,#LOW TM_LINE
04D2 E6                MOV     A,@R0
04D3 FE                MOV     R6,A
04D4 EE                MOV     A,R6
04D5 2F                ADD     A,R7
04D6 FF                MOV     R7,A
04D7 7800        R     MOV     R0,#LOW tmo
04D9 EF                MOV     A,R7
04DA F6                MOV     @R0,A
                                           ; SOURCE LINE # 906
04DB 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 907
04DE E500        R     MOV     A,len_o
04E0 04                INC     A
04E1 FF                MOV     R7,A
04E2 900042            MOV     DPTR,#bufout+02H
04E5 EF                MOV     A,R7
04E6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 908
04E7         ?C0224:
                                           ; SOURCE LINE # 909
04E7         ?C0223:
                                           ; SOURCE LINE # 911
04E7 900000      R     MOV     DPTR,#zbuf+03H
04EA E0                MOVX    A,@DPTR
04EB FF                MOV     R7,A
04EC EF                MOV     A,R7
04ED B40304            CJNE    A,#03H,?C0231
04F0 7F01              MOV     R7,#01H
04F2 8002              SJMP    ?C0232
04F4         ?C0231:
04F4 7F00              MOV     R7,#00H
04F6         ?C0232:
04F6 900000      R     MOV     DPTR,#zbuf+03H
04F9 E0                MOVX    A,@DPTR
04FA FE                MOV     R6,A
04FB EE                MOV     A,R6
04FC B40104            CJNE    A,#01H,?C0233
04FF 7E01              MOV     R6,#01H
0501 8002              SJMP    ?C0234
0503         ?C0233:
0503 7E00              MOV     R6,#00H
0505         ?C0234:
0505 EE                MOV     A,R6
0506 4F                ORL     A,R7
0507 FF                MOV     R7,A
0508 900000      R     MOV     DPTR,#zbuf+03H
050B E0                MOVX    A,@DPTR
050C FE                MOV     R6,A
050D EE                MOV     A,R6
050E B40204            CJNE    A,#02H,?C0235
0511 7E01              MOV     R6,#01H
0513 8002              SJMP    ?C0236
0515         ?C0235:
0515 7E00              MOV     R6,#00H
0517         ?C0236:
0517 EE                MOV     A,R6
0518 4F                ORL     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 102 

0519 FF                MOV     R7,A
051A 900000      R     MOV     DPTR,#zbuf+04H
051D E0                MOVX    A,@DPTR
051E FE                MOV     R6,A
051F EE                MOV     A,R6
0520 B42004            CJNE    A,#020H,?C0237
0523 7E01              MOV     R6,#01H
0525 8002              SJMP    ?C0238
0527         ?C0237:
0527 7E00              MOV     R6,#00H
0529         ?C0238:
0529 EE                MOV     A,R6
052A 5F                ANL     A,R7
052B FF                MOV     R7,A
052C EF                MOV     A,R7
052D 600D              JZ      ?C0222
                                           ; SOURCE LINE # 912
                                           ; SOURCE LINE # 913
052F E500        R     MOV     A,Len_p
0531 24F9              ADD     A,#0F9H
0533 FF                MOV     R7,A
0534 EF                MOV     A,R7
0535 6500        R     XRL     A,len_o
0537 7003              JNZ     ?C0222
                                           ; SOURCE LINE # 914
0539 120000      R     LCALL   kmd
053C         ?C0239:
                                           ; SOURCE LINE # 915
053C         ?C0230:
                                           ; SOURCE LINE # 916
053C         ?C0222:
                                           ; SOURCE LINE # 918
053C 900000      R     MOV     DPTR,#zbuf+03H
053F E0                MOVX    A,@DPTR
0540 FF                MOV     R7,A
0541 EF                MOV     A,R7
0542 B40504            CJNE    A,#05H,?C0241
0545 7F01              MOV     R7,#01H
0547 8002              SJMP    ?C0242
0549         ?C0241:
0549 7F00              MOV     R7,#00H
054B         ?C0242:
054B E500        R     MOV     A,cmd
054D 6004              JZ      ?C0243
054F 7E01              MOV     R6,#01H
0551 8002              SJMP    ?C0244
0553         ?C0243:
0553 7E00              MOV     R6,#00H
0555         ?C0244:
0555 EE                MOV     A,R6
0556 5F                ANL     A,R7
0557 FF                MOV     R7,A
0558 900000      R     MOV     DPTR,#zbuf+04H
055B E0                MOVX    A,@DPTR
055C FE                MOV     R6,A
055D EE                MOV     A,R6
055E B41004            CJNE    A,#010H,?C0245
0561 7E01              MOV     R6,#01H
0563 8002              SJMP    ?C0246
0565         ?C0245:
0565 7E00              MOV     R6,#00H
0567         ?C0246:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 103 

0567 EE                MOV     A,R6
0568 5F                ANL     A,R7
0569 FF                MOV     R7,A
056A 900000      R     MOV     DPTR,#zbuf+05H
056D E0                MOVX    A,@DPTR
056E FE                MOV     R6,A
056F EE                MOV     A,R6
0570 B40104            CJNE    A,#01H,?C0247
0573 7E01              MOV     R6,#01H
0575 8002              SJMP    ?C0248
0577         ?C0247:
0577 7E00              MOV     R6,#00H
0579         ?C0248:
0579 EE                MOV     A,R6
057A 5F                ANL     A,R7
057B FF                MOV     R7,A
057C EF                MOV     A,R7
057D 600B              JZ      ?C0240
                                           ; SOURCE LINE # 919
                                           ; SOURCE LINE # 920
057F D200        R     SETB    fl_rest
                                           ; SOURCE LINE # 921
0581 C2AF              CLR     EA
                                           ; SOURCE LINE # 922
0583 D2C0              SETB    WDWR
0585 75C002            MOV     WDCON,#02H
                                           ; SOURCE LINE # 923
0588 D2AF              SETB    EA
                                           ; SOURCE LINE # 924
058A         ?C0240:
                                           ; SOURCE LINE # 926
058A E500        R     MOV     A,st_ser
058C B43204            CJNE    A,#032H,?C0250
058F 7F01              MOV     R7,#01H
0591 8002              SJMP    ?C0251
0593         ?C0250:
0593 7F00              MOV     R7,#00H
0595         ?C0251:
0595 200004      R     JB      Eprom_zap,?C0252
0598 7E01              MOV     R6,#01H
059A 8002              SJMP    ?C0253
059C         ?C0252:
059C 7E00              MOV     R6,#00H
059E         ?C0253:
059E EE                MOV     A,R6
059F 5F                ANL     A,R7
05A0 FF                MOV     R7,A
05A1 EF                MOV     A,R7
05A2 7003              JNZ     $ + 5H
05A4 020000      R     LJMP    ?C0136
                                           ; SOURCE LINE # 927
05A7 75000A      R     MOV     st_ser,#0AH
05AA 020000      R     LJMP    ?C0307
05AD         ?C0249:
                                           ; SOURCE LINE # 929
05AD 020000      R     LJMP    ?C0136
05B0         ?C0198:
                                           ; SOURCE LINE # 931
                                           ; SOURCE LINE # 933
05B0 900000      R     MOV     DPTR,#rele_prin
05B3 E0                MOVX    A,@DPTR
05B4 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 104 

05B5 900081            MOV     DPTR,#xbufin+01H
05B8 E0                MOVX    A,@DPTR
05B9 FE                MOV     R6,A
05BA EE                MOV     A,R6
05BB 6F                XRL     A,R7
05BC 6003              JZ      $ + 5H
05BE 020000      R     LJMP    ?C0255
                                           ; SOURCE LINE # 934
                                           ; SOURCE LINE # 935
05C1 900000      R     MOV     DPTR,#temp_pr_rel
05C4 E4                CLR     A
05C5 F0                MOVX    @DPTR,A
05C6 A3                INC     DPTR
05C7 E4                CLR     A
05C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 936
05C9 900000      R     MOV     DPTR,#rele_prin+01H
05CC E0                MOVX    A,@DPTR
05CD FF                MOV     R7,A
05CE 7480              MOV     A,#LOW xbufin
05D0 2F                ADD     A,R7
05D1 F582              MOV     DPL,A
05D3 E4                CLR     A
05D4 3400              ADDC    A,#HIGH xbufin
05D6 F583              MOV     DPH,A
05D8 E0                MOVX    A,@DPTR
05D9 FF                MOV     R7,A
05DA 7E00              MOV     R6,#00H
05DC 900000      R     MOV     DPTR,#temp_pr_rel
05DF EE                MOV     A,R6
05E0 F0                MOVX    @DPTR,A
05E1 A3                INC     DPTR
05E2 EF                MOV     A,R7
05E3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 937
05E4 900000      R     MOV     DPTR,#temp_pr_rel
05E7 E0                MOVX    A,@DPTR
05E8 FE                MOV     R6,A
05E9 A3                INC     DPTR
05EA E0                MOVX    A,@DPTR
05EB FF                MOV     R7,A
05EC EF                MOV     A,R7
05ED 7F00              MOV     R7,#00H
05EF FE                MOV     R6,A
05F0 900000      R     MOV     DPTR,#temp_pr_rel
05F3 EE                MOV     A,R6
05F4 F0                MOVX    @DPTR,A
05F5 A3                INC     DPTR
05F6 EF                MOV     A,R7
05F7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 938
05F8 900000      R     MOV     DPTR,#rele_prin+01H
05FB E0                MOVX    A,@DPTR
05FC FF                MOV     R7,A
05FD 7481              MOV     A,#LOW xbufin+01H
05FF 2F                ADD     A,R7
0600 F582              MOV     DPL,A
0602 E4                CLR     A
0603 3400              ADDC    A,#HIGH xbufin+01H
0605 F583              MOV     DPH,A
0607 E0                MOVX    A,@DPTR
0608 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 105 

0609 7E00              MOV     R6,#00H
060B 900000      R     MOV     DPTR,#temp_pr_rel+01H
060E E0                MOVX    A,@DPTR
060F 2F                ADD     A,R7
0610 F0                MOVX    @DPTR,A
0611 900000      R     MOV     DPTR,#temp_pr_rel
0614 E0                MOVX    A,@DPTR
0615 3E                ADDC    A,R6
0616 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 940
0617 900000      R     MOV     DPTR,#rele_prin+02H
061A E0                MOVX    A,@DPTR
061B FE                MOV     R6,A
061C A3                INC     DPTR
061D E0                MOVX    A,@DPTR
061E FF                MOV     R7,A
061F 900000      R     MOV     DPTR,#temp_pr_rel
0622 E0                MOVX    A,@DPTR
0623 FC                MOV     R4,A
0624 A3                INC     DPTR
0625 E0                MOVX    A,@DPTR
0626 FD                MOV     R5,A
0627 D3                SETB    C
0628 ED                MOV     A,R5
0629 9F                SUBB    A,R7
062A EC                MOV     A,R4
062B 9E                SUBB    A,R6
062C 4010              JC      ?C0256
                                           ; SOURCE LINE # 941
062E 900000      E     MOV     DPTR,#REL1_ON+01H
0631 E0                MOVX    A,@DPTR
0632 04                INC     A
0633 F0                MOVX    @DPTR,A
0634 7006              JNZ     ?C0748
0636 900000      E     MOV     DPTR,#REL1_ON
0639 E0                MOVX    A,@DPTR
063A 04                INC     A
063B F0                MOVX    @DPTR,A
063C         ?C0748:
063C 800E              SJMP    ?C0257
063E         ?C0256:
                                           ; SOURCE LINE # 943
063E 900000      E     MOV     DPTR,#REL1_OFF+01H
0641 E0                MOVX    A,@DPTR
0642 04                INC     A
0643 F0                MOVX    @DPTR,A
0644 7006              JNZ     ?C0749
0646 900000      E     MOV     DPTR,#REL1_OFF
0649 E0                MOVX    A,@DPTR
064A 04                INC     A
064B F0                MOVX    @DPTR,A
064C         ?C0749:
064C         ?C0257:
                                           ; SOURCE LINE # 945
064C 900000      R     MOV     DPTR,#rele_prin+04H
064F E0                MOVX    A,@DPTR
0650 FE                MOV     R6,A
0651 A3                INC     DPTR
0652 E0                MOVX    A,@DPTR
0653 FF                MOV     R7,A
0654 900000      R     MOV     DPTR,#temp_pr_rel
0657 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 106 

0658 FC                MOV     R4,A
0659 A3                INC     DPTR
065A E0                MOVX    A,@DPTR
065B FD                MOV     R5,A
065C D3                SETB    C
065D ED                MOV     A,R5
065E 9F                SUBB    A,R7
065F EC                MOV     A,R4
0660 9E                SUBB    A,R6
0661 4010              JC      ?C0258
                                           ; SOURCE LINE # 946
0663 900000      E     MOV     DPTR,#REL2_ON+01H
0666 E0                MOVX    A,@DPTR
0667 04                INC     A
0668 F0                MOVX    @DPTR,A
0669 7006              JNZ     ?C0750
066B 900000      E     MOV     DPTR,#REL2_ON
066E E0                MOVX    A,@DPTR
066F 04                INC     A
0670 F0                MOVX    @DPTR,A
0671         ?C0750:
0671 800E              SJMP    ?C0255
0673         ?C0258:
                                           ; SOURCE LINE # 948
0673 900000      E     MOV     DPTR,#REL2_OFF+01H
0676 E0                MOVX    A,@DPTR
0677 04                INC     A
0678 F0                MOVX    @DPTR,A
0679 7006              JNZ     ?C0751
067B 900000      E     MOV     DPTR,#REL2_OFF
067E E0                MOVX    A,@DPTR
067F 04                INC     A
0680 F0                MOVX    @DPTR,A
0681         ?C0751:
0681         ?C0259:
                                           ; SOURCE LINE # 949
0681         ?C0255:
                                           ; SOURCE LINE # 951
0681 900000      R     MOV     DPTR,#rele_prin+06H
0684 E0                MOVX    A,@DPTR
0685 FF                MOV     R7,A
0686 900081            MOV     DPTR,#xbufin+01H
0689 E0                MOVX    A,@DPTR
068A FE                MOV     R6,A
068B EE                MOV     A,R6
068C 6F                XRL     A,R7
068D 6003              JZ      $ + 5H
068F 020000      R     LJMP    ?C0260
                                           ; SOURCE LINE # 952
                                           ; SOURCE LINE # 953
0692 900000      R     MOV     DPTR,#temp_pr_rel
0695 E4                CLR     A
0696 F0                MOVX    @DPTR,A
0697 A3                INC     DPTR
0698 E4                CLR     A
0699 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 954
069A 900000      R     MOV     DPTR,#rele_prin+07H
069D E0                MOVX    A,@DPTR
069E FF                MOV     R7,A
069F 7480              MOV     A,#LOW xbufin
06A1 2F                ADD     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 107 

06A2 F582              MOV     DPL,A
06A4 E4                CLR     A
06A5 3400              ADDC    A,#HIGH xbufin
06A7 F583              MOV     DPH,A
06A9 E0                MOVX    A,@DPTR
06AA FF                MOV     R7,A
06AB 7E00              MOV     R6,#00H
06AD 900000      R     MOV     DPTR,#temp_pr_rel
06B0 EE                MOV     A,R6
06B1 F0                MOVX    @DPTR,A
06B2 A3                INC     DPTR
06B3 EF                MOV     A,R7
06B4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 955
06B5 900000      R     MOV     DPTR,#temp_pr_rel
06B8 E0                MOVX    A,@DPTR
06B9 FE                MOV     R6,A
06BA A3                INC     DPTR
06BB E0                MOVX    A,@DPTR
06BC FF                MOV     R7,A
06BD EF                MOV     A,R7
06BE 7F00              MOV     R7,#00H
06C0 FE                MOV     R6,A
06C1 900000      R     MOV     DPTR,#temp_pr_rel
06C4 EE                MOV     A,R6
06C5 F0                MOVX    @DPTR,A
06C6 A3                INC     DPTR
06C7 EF                MOV     A,R7
06C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 956
06C9 900000      R     MOV     DPTR,#rele_prin+07H
06CC E0                MOVX    A,@DPTR
06CD FF                MOV     R7,A
06CE 7481              MOV     A,#LOW xbufin+01H
06D0 2F                ADD     A,R7
06D1 F582              MOV     DPL,A
06D3 E4                CLR     A
06D4 3400              ADDC    A,#HIGH xbufin+01H
06D6 F583              MOV     DPH,A
06D8 E0                MOVX    A,@DPTR
06D9 FF                MOV     R7,A
06DA 7E00              MOV     R6,#00H
06DC 900000      R     MOV     DPTR,#temp_pr_rel+01H
06DF E0                MOVX    A,@DPTR
06E0 2F                ADD     A,R7
06E1 F0                MOVX    @DPTR,A
06E2 900000      R     MOV     DPTR,#temp_pr_rel
06E5 E0                MOVX    A,@DPTR
06E6 3E                ADDC    A,R6
06E7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 958
06E8 900000      R     MOV     DPTR,#rele_prin+08H
06EB E0                MOVX    A,@DPTR
06EC FE                MOV     R6,A
06ED A3                INC     DPTR
06EE E0                MOVX    A,@DPTR
06EF FF                MOV     R7,A
06F0 900000      R     MOV     DPTR,#temp_pr_rel
06F3 E0                MOVX    A,@DPTR
06F4 FC                MOV     R4,A
06F5 A3                INC     DPTR
06F6 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 108 

06F7 FD                MOV     R5,A
06F8 D3                SETB    C
06F9 ED                MOV     A,R5
06FA 9F                SUBB    A,R7
06FB EC                MOV     A,R4
06FC 9E                SUBB    A,R6
06FD 4010              JC      ?C0261
                                           ; SOURCE LINE # 959
06FF 900000      E     MOV     DPTR,#REL1_ON+01H
0702 E0                MOVX    A,@DPTR
0703 04                INC     A
0704 F0                MOVX    @DPTR,A
0705 7006              JNZ     ?C0752
0707 900000      E     MOV     DPTR,#REL1_ON
070A E0                MOVX    A,@DPTR
070B 04                INC     A
070C F0                MOVX    @DPTR,A
070D         ?C0752:
070D 800E              SJMP    ?C0262
070F         ?C0261:
                                           ; SOURCE LINE # 961
070F 900000      E     MOV     DPTR,#REL1_OFF+01H
0712 E0                MOVX    A,@DPTR
0713 04                INC     A
0714 F0                MOVX    @DPTR,A
0715 7006              JNZ     ?C0753
0717 900000      E     MOV     DPTR,#REL1_OFF
071A E0                MOVX    A,@DPTR
071B 04                INC     A
071C F0                MOVX    @DPTR,A
071D         ?C0753:
071D         ?C0262:
                                           ; SOURCE LINE # 963
071D 900000      R     MOV     DPTR,#rele_prin+0AH
0720 E0                MOVX    A,@DPTR
0721 FE                MOV     R6,A
0722 A3                INC     DPTR
0723 E0                MOVX    A,@DPTR
0724 FF                MOV     R7,A
0725 900000      R     MOV     DPTR,#temp_pr_rel
0728 E0                MOVX    A,@DPTR
0729 FC                MOV     R4,A
072A A3                INC     DPTR
072B E0                MOVX    A,@DPTR
072C FD                MOV     R5,A
072D D3                SETB    C
072E ED                MOV     A,R5
072F 9F                SUBB    A,R7
0730 EC                MOV     A,R4
0731 9E                SUBB    A,R6
0732 4010              JC      ?C0263
                                           ; SOURCE LINE # 964
0734 900000      E     MOV     DPTR,#REL2_ON+01H
0737 E0                MOVX    A,@DPTR
0738 04                INC     A
0739 F0                MOVX    @DPTR,A
073A 7006              JNZ     ?C0754
073C 900000      E     MOV     DPTR,#REL2_ON
073F E0                MOVX    A,@DPTR
0740 04                INC     A
0741 F0                MOVX    @DPTR,A
0742         ?C0754:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 109 

0742 800E              SJMP    ?C0260
0744         ?C0263:
                                           ; SOURCE LINE # 966
0744 900000      E     MOV     DPTR,#REL2_OFF+01H
0747 E0                MOVX    A,@DPTR
0748 04                INC     A
0749 F0                MOVX    @DPTR,A
074A 7006              JNZ     ?C0755
074C 900000      E     MOV     DPTR,#REL2_OFF
074F E0                MOVX    A,@DPTR
0750 04                INC     A
0751 F0                MOVX    @DPTR,A
0752         ?C0755:
0752         ?C0264:
                                           ; SOURCE LINE # 967
0752         ?C0260:
                                           ; SOURCE LINE # 969
0752 900000      R     MOV     DPTR,#rele_prin+0CH
0755 E0                MOVX    A,@DPTR
0756 FF                MOV     R7,A
0757 900081            MOV     DPTR,#xbufin+01H
075A E0                MOVX    A,@DPTR
075B FE                MOV     R6,A
075C EE                MOV     A,R6
075D 6F                XRL     A,R7
075E 6003              JZ      $ + 5H
0760 020000      R     LJMP    ?C0265
                                           ; SOURCE LINE # 970
                                           ; SOURCE LINE # 971
0763 900000      R     MOV     DPTR,#temp_pr_rel
0766 E4                CLR     A
0767 F0                MOVX    @DPTR,A
0768 A3                INC     DPTR
0769 E4                CLR     A
076A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 972
076B 900000      R     MOV     DPTR,#rele_prin+0DH
076E E0                MOVX    A,@DPTR
076F FF                MOV     R7,A
0770 7480              MOV     A,#LOW xbufin
0772 2F                ADD     A,R7
0773 F582              MOV     DPL,A
0775 E4                CLR     A
0776 3400              ADDC    A,#HIGH xbufin
0778 F583              MOV     DPH,A
077A E0                MOVX    A,@DPTR
077B FF                MOV     R7,A
077C 7E00              MOV     R6,#00H
077E 900000      R     MOV     DPTR,#temp_pr_rel
0781 EE                MOV     A,R6
0782 F0                MOVX    @DPTR,A
0783 A3                INC     DPTR
0784 EF                MOV     A,R7
0785 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 973
0786 900000      R     MOV     DPTR,#temp_pr_rel
0789 E0                MOVX    A,@DPTR
078A FE                MOV     R6,A
078B A3                INC     DPTR
078C E0                MOVX    A,@DPTR
078D FF                MOV     R7,A
078E EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 110 

078F 7F00              MOV     R7,#00H
0791 FE                MOV     R6,A
0792 900000      R     MOV     DPTR,#temp_pr_rel
0795 EE                MOV     A,R6
0796 F0                MOVX    @DPTR,A
0797 A3                INC     DPTR
0798 EF                MOV     A,R7
0799 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 974
079A 900000      R     MOV     DPTR,#rele_prin+0DH
079D E0                MOVX    A,@DPTR
079E FF                MOV     R7,A
079F 7481              MOV     A,#LOW xbufin+01H
07A1 2F                ADD     A,R7
07A2 F582              MOV     DPL,A
07A4 E4                CLR     A
07A5 3400              ADDC    A,#HIGH xbufin+01H
07A7 F583              MOV     DPH,A
07A9 E0                MOVX    A,@DPTR
07AA FF                MOV     R7,A
07AB 7E00              MOV     R6,#00H
07AD 900000      R     MOV     DPTR,#temp_pr_rel+01H
07B0 E0                MOVX    A,@DPTR
07B1 2F                ADD     A,R7
07B2 F0                MOVX    @DPTR,A
07B3 900000      R     MOV     DPTR,#temp_pr_rel
07B6 E0                MOVX    A,@DPTR
07B7 3E                ADDC    A,R6
07B8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 976
07B9 900000      R     MOV     DPTR,#rele_prin+0EH
07BC E0                MOVX    A,@DPTR
07BD FE                MOV     R6,A
07BE A3                INC     DPTR
07BF E0                MOVX    A,@DPTR
07C0 FF                MOV     R7,A
07C1 900000      R     MOV     DPTR,#temp_pr_rel
07C4 E0                MOVX    A,@DPTR
07C5 FC                MOV     R4,A
07C6 A3                INC     DPTR
07C7 E0                MOVX    A,@DPTR
07C8 FD                MOV     R5,A
07C9 D3                SETB    C
07CA ED                MOV     A,R5
07CB 9F                SUBB    A,R7
07CC EC                MOV     A,R4
07CD 9E                SUBB    A,R6
07CE 4010              JC      ?C0266
                                           ; SOURCE LINE # 977
07D0 900000      E     MOV     DPTR,#REL1_ON+01H
07D3 E0                MOVX    A,@DPTR
07D4 04                INC     A
07D5 F0                MOVX    @DPTR,A
07D6 7006              JNZ     ?C0756
07D8 900000      E     MOV     DPTR,#REL1_ON
07DB E0                MOVX    A,@DPTR
07DC 04                INC     A
07DD F0                MOVX    @DPTR,A
07DE         ?C0756:
07DE 800E              SJMP    ?C0267
07E0         ?C0266:
                                           ; SOURCE LINE # 979
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 111 

07E0 900000      E     MOV     DPTR,#REL1_OFF+01H
07E3 E0                MOVX    A,@DPTR
07E4 04                INC     A
07E5 F0                MOVX    @DPTR,A
07E6 7006              JNZ     ?C0757
07E8 900000      E     MOV     DPTR,#REL1_OFF
07EB E0                MOVX    A,@DPTR
07EC 04                INC     A
07ED F0                MOVX    @DPTR,A
07EE         ?C0757:
07EE         ?C0267:
                                           ; SOURCE LINE # 981
07EE 900000      R     MOV     DPTR,#rele_prin+010H
07F1 E0                MOVX    A,@DPTR
07F2 FE                MOV     R6,A
07F3 A3                INC     DPTR
07F4 E0                MOVX    A,@DPTR
07F5 FF                MOV     R7,A
07F6 900000      R     MOV     DPTR,#temp_pr_rel
07F9 E0                MOVX    A,@DPTR
07FA FC                MOV     R4,A
07FB A3                INC     DPTR
07FC E0                MOVX    A,@DPTR
07FD FD                MOV     R5,A
07FE D3                SETB    C
07FF ED                MOV     A,R5
0800 9F                SUBB    A,R7
0801 EC                MOV     A,R4
0802 9E                SUBB    A,R6
0803 4010              JC      ?C0268
                                           ; SOURCE LINE # 982
0805 900000      E     MOV     DPTR,#REL2_ON+01H
0808 E0                MOVX    A,@DPTR
0809 04                INC     A
080A F0                MOVX    @DPTR,A
080B 7006              JNZ     ?C0758
080D 900000      E     MOV     DPTR,#REL2_ON
0810 E0                MOVX    A,@DPTR
0811 04                INC     A
0812 F0                MOVX    @DPTR,A
0813         ?C0758:
0813 800E              SJMP    ?C0265
0815         ?C0268:
                                           ; SOURCE LINE # 984
0815 900000      E     MOV     DPTR,#REL2_OFF+01H
0818 E0                MOVX    A,@DPTR
0819 04                INC     A
081A F0                MOVX    @DPTR,A
081B 7006              JNZ     ?C0759
081D 900000      E     MOV     DPTR,#REL2_OFF
0820 E0                MOVX    A,@DPTR
0821 04                INC     A
0822 F0                MOVX    @DPTR,A
0823         ?C0759:
0823         ?C0269:
                                           ; SOURCE LINE # 985
0823         ?C0265:
                                           ; SOURCE LINE # 987
0823 900000      R     MOV     DPTR,#rele_prin+012H
0826 E0                MOVX    A,@DPTR
0827 FF                MOV     R7,A
0828 900081            MOV     DPTR,#xbufin+01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 112 

082B E0                MOVX    A,@DPTR
082C FE                MOV     R6,A
082D EE                MOV     A,R6
082E 6F                XRL     A,R7
082F 6003              JZ      $ + 5H
0831 020000      R     LJMP    ?C0270
                                           ; SOURCE LINE # 988
                                           ; SOURCE LINE # 989
0834 900000      R     MOV     DPTR,#temp_pr_rel
0837 E4                CLR     A
0838 F0                MOVX    @DPTR,A
0839 A3                INC     DPTR
083A E4                CLR     A
083B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 990
083C 900000      R     MOV     DPTR,#rele_prin+013H
083F E0                MOVX    A,@DPTR
0840 FF                MOV     R7,A
0841 7480              MOV     A,#LOW xbufin
0843 2F                ADD     A,R7
0844 F582              MOV     DPL,A
0846 E4                CLR     A
0847 3400              ADDC    A,#HIGH xbufin
0849 F583              MOV     DPH,A
084B E0                MOVX    A,@DPTR
084C FF                MOV     R7,A
084D 7E00              MOV     R6,#00H
084F 900000      R     MOV     DPTR,#temp_pr_rel
0852 EE                MOV     A,R6
0853 F0                MOVX    @DPTR,A
0854 A3                INC     DPTR
0855 EF                MOV     A,R7
0856 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 991
0857 900000      R     MOV     DPTR,#temp_pr_rel
085A E0                MOVX    A,@DPTR
085B FE                MOV     R6,A
085C A3                INC     DPTR
085D E0                MOVX    A,@DPTR
085E FF                MOV     R7,A
085F EF                MOV     A,R7
0860 7F00              MOV     R7,#00H
0862 FE                MOV     R6,A
0863 900000      R     MOV     DPTR,#temp_pr_rel
0866 EE                MOV     A,R6
0867 F0                MOVX    @DPTR,A
0868 A3                INC     DPTR
0869 EF                MOV     A,R7
086A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 992
086B 900000      R     MOV     DPTR,#rele_prin+013H
086E E0                MOVX    A,@DPTR
086F FF                MOV     R7,A
0870 7481              MOV     A,#LOW xbufin+01H
0872 2F                ADD     A,R7
0873 F582              MOV     DPL,A
0875 E4                CLR     A
0876 3400              ADDC    A,#HIGH xbufin+01H
0878 F583              MOV     DPH,A
087A E0                MOVX    A,@DPTR
087B FF                MOV     R7,A
087C 7E00              MOV     R6,#00H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 113 

087E 900000      R     MOV     DPTR,#temp_pr_rel+01H
0881 E0                MOVX    A,@DPTR
0882 2F                ADD     A,R7
0883 F0                MOVX    @DPTR,A
0884 900000      R     MOV     DPTR,#temp_pr_rel
0887 E0                MOVX    A,@DPTR
0888 3E                ADDC    A,R6
0889 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 994
088A 900000      R     MOV     DPTR,#rele_prin+014H
088D E0                MOVX    A,@DPTR
088E FE                MOV     R6,A
088F A3                INC     DPTR
0890 E0                MOVX    A,@DPTR
0891 FF                MOV     R7,A
0892 900000      R     MOV     DPTR,#temp_pr_rel
0895 E0                MOVX    A,@DPTR
0896 FC                MOV     R4,A
0897 A3                INC     DPTR
0898 E0                MOVX    A,@DPTR
0899 FD                MOV     R5,A
089A D3                SETB    C
089B ED                MOV     A,R5
089C 9F                SUBB    A,R7
089D EC                MOV     A,R4
089E 9E                SUBB    A,R6
089F 4010              JC      ?C0271
                                           ; SOURCE LINE # 995
08A1 900000      E     MOV     DPTR,#REL1_ON+01H
08A4 E0                MOVX    A,@DPTR
08A5 04                INC     A
08A6 F0                MOVX    @DPTR,A
08A7 7006              JNZ     ?C0760
08A9 900000      E     MOV     DPTR,#REL1_ON
08AC E0                MOVX    A,@DPTR
08AD 04                INC     A
08AE F0                MOVX    @DPTR,A
08AF         ?C0760:
08AF 800E              SJMP    ?C0272
08B1         ?C0271:
                                           ; SOURCE LINE # 997
08B1 900000      E     MOV     DPTR,#REL1_OFF+01H
08B4 E0                MOVX    A,@DPTR
08B5 04                INC     A
08B6 F0                MOVX    @DPTR,A
08B7 7006              JNZ     ?C0761
08B9 900000      E     MOV     DPTR,#REL1_OFF
08BC E0                MOVX    A,@DPTR
08BD 04                INC     A
08BE F0                MOVX    @DPTR,A
08BF         ?C0761:
08BF         ?C0272:
                                           ; SOURCE LINE # 999
08BF 900000      R     MOV     DPTR,#rele_prin+016H
08C2 E0                MOVX    A,@DPTR
08C3 FE                MOV     R6,A
08C4 A3                INC     DPTR
08C5 E0                MOVX    A,@DPTR
08C6 FF                MOV     R7,A
08C7 900000      R     MOV     DPTR,#temp_pr_rel
08CA E0                MOVX    A,@DPTR
08CB FC                MOV     R4,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 114 

08CC A3                INC     DPTR
08CD E0                MOVX    A,@DPTR
08CE FD                MOV     R5,A
08CF D3                SETB    C
08D0 ED                MOV     A,R5
08D1 9F                SUBB    A,R7
08D2 EC                MOV     A,R4
08D3 9E                SUBB    A,R6
08D4 4010              JC      ?C0273
                                           ; SOURCE LINE # 1000
08D6 900000      E     MOV     DPTR,#REL2_ON+01H
08D9 E0                MOVX    A,@DPTR
08DA 04                INC     A
08DB F0                MOVX    @DPTR,A
08DC 7006              JNZ     ?C0762
08DE 900000      E     MOV     DPTR,#REL2_ON
08E1 E0                MOVX    A,@DPTR
08E2 04                INC     A
08E3 F0                MOVX    @DPTR,A
08E4         ?C0762:
08E4 800E              SJMP    ?C0270
08E6         ?C0273:
                                           ; SOURCE LINE # 1002
08E6 900000      E     MOV     DPTR,#REL2_OFF+01H
08E9 E0                MOVX    A,@DPTR
08EA 04                INC     A
08EB F0                MOVX    @DPTR,A
08EC 7006              JNZ     ?C0763
08EE 900000      E     MOV     DPTR,#REL2_OFF
08F1 E0                MOVX    A,@DPTR
08F2 04                INC     A
08F3 F0                MOVX    @DPTR,A
08F4         ?C0763:
08F4         ?C0274:
                                           ; SOURCE LINE # 1003
08F4         ?C0270:
                                           ; SOURCE LINE # 1005
08F4 900000      R     MOV     DPTR,#rele_prin+018H
08F7 E0                MOVX    A,@DPTR
08F8 FF                MOV     R7,A
08F9 900081            MOV     DPTR,#xbufin+01H
08FC E0                MOVX    A,@DPTR
08FD FE                MOV     R6,A
08FE EE                MOV     A,R6
08FF 6F                XRL     A,R7
0900 6003              JZ      $ + 5H
0902 020000      R     LJMP    ?C0275
                                           ; SOURCE LINE # 1006
                                           ; SOURCE LINE # 1007
0905 900000      R     MOV     DPTR,#temp_pr_rel
0908 E4                CLR     A
0909 F0                MOVX    @DPTR,A
090A A3                INC     DPTR
090B E4                CLR     A
090C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1008
090D 900000      R     MOV     DPTR,#rele_prin+019H
0910 E0                MOVX    A,@DPTR
0911 FF                MOV     R7,A
0912 7480              MOV     A,#LOW xbufin
0914 2F                ADD     A,R7
0915 F582              MOV     DPL,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 115 

0917 E4                CLR     A
0918 3400              ADDC    A,#HIGH xbufin
091A F583              MOV     DPH,A
091C E0                MOVX    A,@DPTR
091D FF                MOV     R7,A
091E 7E00              MOV     R6,#00H
0920 900000      R     MOV     DPTR,#temp_pr_rel
0923 EE                MOV     A,R6
0924 F0                MOVX    @DPTR,A
0925 A3                INC     DPTR
0926 EF                MOV     A,R7
0927 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1009
0928 900000      R     MOV     DPTR,#temp_pr_rel
092B E0                MOVX    A,@DPTR
092C FE                MOV     R6,A
092D A3                INC     DPTR
092E E0                MOVX    A,@DPTR
092F FF                MOV     R7,A
0930 EF                MOV     A,R7
0931 7F00              MOV     R7,#00H
0933 FE                MOV     R6,A
0934 900000      R     MOV     DPTR,#temp_pr_rel
0937 EE                MOV     A,R6
0938 F0                MOVX    @DPTR,A
0939 A3                INC     DPTR
093A EF                MOV     A,R7
093B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1010
093C 900000      R     MOV     DPTR,#rele_prin+019H
093F E0                MOVX    A,@DPTR
0940 FF                MOV     R7,A
0941 7481              MOV     A,#LOW xbufin+01H
0943 2F                ADD     A,R7
0944 F582              MOV     DPL,A
0946 E4                CLR     A
0947 3400              ADDC    A,#HIGH xbufin+01H
0949 F583              MOV     DPH,A
094B E0                MOVX    A,@DPTR
094C FF                MOV     R7,A
094D 7E00              MOV     R6,#00H
094F 900000      R     MOV     DPTR,#temp_pr_rel+01H
0952 E0                MOVX    A,@DPTR
0953 2F                ADD     A,R7
0954 F0                MOVX    @DPTR,A
0955 900000      R     MOV     DPTR,#temp_pr_rel
0958 E0                MOVX    A,@DPTR
0959 3E                ADDC    A,R6
095A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1012
095B 900000      R     MOV     DPTR,#rele_prin+01AH
095E E0                MOVX    A,@DPTR
095F FE                MOV     R6,A
0960 A3                INC     DPTR
0961 E0                MOVX    A,@DPTR
0962 FF                MOV     R7,A
0963 900000      R     MOV     DPTR,#temp_pr_rel
0966 E0                MOVX    A,@DPTR
0967 FC                MOV     R4,A
0968 A3                INC     DPTR
0969 E0                MOVX    A,@DPTR
096A FD                MOV     R5,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 116 

096B D3                SETB    C
096C ED                MOV     A,R5
096D 9F                SUBB    A,R7
096E EC                MOV     A,R4
096F 9E                SUBB    A,R6
0970 4010              JC      ?C0276
                                           ; SOURCE LINE # 1013
0972 900000      E     MOV     DPTR,#REL1_ON+01H
0975 E0                MOVX    A,@DPTR
0976 04                INC     A
0977 F0                MOVX    @DPTR,A
0978 7006              JNZ     ?C0764
097A 900000      E     MOV     DPTR,#REL1_ON
097D E0                MOVX    A,@DPTR
097E 04                INC     A
097F F0                MOVX    @DPTR,A
0980         ?C0764:
0980 800E              SJMP    ?C0277
0982         ?C0276:
                                           ; SOURCE LINE # 1015
0982 900000      E     MOV     DPTR,#REL1_OFF+01H
0985 E0                MOVX    A,@DPTR
0986 04                INC     A
0987 F0                MOVX    @DPTR,A
0988 7006              JNZ     ?C0765
098A 900000      E     MOV     DPTR,#REL1_OFF
098D E0                MOVX    A,@DPTR
098E 04                INC     A
098F F0                MOVX    @DPTR,A
0990         ?C0765:
0990         ?C0277:
                                           ; SOURCE LINE # 1017
0990 900000      R     MOV     DPTR,#rele_prin+01CH
0993 E0                MOVX    A,@DPTR
0994 FE                MOV     R6,A
0995 A3                INC     DPTR
0996 E0                MOVX    A,@DPTR
0997 FF                MOV     R7,A
0998 900000      R     MOV     DPTR,#temp_pr_rel
099B E0                MOVX    A,@DPTR
099C FC                MOV     R4,A
099D A3                INC     DPTR
099E E0                MOVX    A,@DPTR
099F FD                MOV     R5,A
09A0 D3                SETB    C
09A1 ED                MOV     A,R5
09A2 9F                SUBB    A,R7
09A3 EC                MOV     A,R4
09A4 9E                SUBB    A,R6
09A5 4010              JC      ?C0278
                                           ; SOURCE LINE # 1018
09A7 900000      E     MOV     DPTR,#REL2_ON+01H
09AA E0                MOVX    A,@DPTR
09AB 04                INC     A
09AC F0                MOVX    @DPTR,A
09AD 7006              JNZ     ?C0766
09AF 900000      E     MOV     DPTR,#REL2_ON
09B2 E0                MOVX    A,@DPTR
09B3 04                INC     A
09B4 F0                MOVX    @DPTR,A
09B5         ?C0766:
09B5 800E              SJMP    ?C0275
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 117 

09B7         ?C0278:
                                           ; SOURCE LINE # 1020
09B7 900000      E     MOV     DPTR,#REL2_OFF+01H
09BA E0                MOVX    A,@DPTR
09BB 04                INC     A
09BC F0                MOVX    @DPTR,A
09BD 7006              JNZ     ?C0767
09BF 900000      E     MOV     DPTR,#REL2_OFF
09C2 E0                MOVX    A,@DPTR
09C3 04                INC     A
09C4 F0                MOVX    @DPTR,A
09C5         ?C0767:
09C5         ?C0279:
                                           ; SOURCE LINE # 1021
09C5         ?C0275:
                                           ; SOURCE LINE # 1024
09C5 900000      R     MOV     DPTR,#POR_R1_ON
09C8 E0                MOVX    A,@DPTR
09C9 FF                MOV     R7,A
09CA 7E00              MOV     R6,#00H
09CC 900000      E     MOV     DPTR,#REL1_ON
09CF E0                MOVX    A,@DPTR
09D0 FC                MOV     R4,A
09D1 A3                INC     DPTR
09D2 E0                MOVX    A,@DPTR
09D3 FD                MOV     R5,A
09D4 D3                SETB    C
09D5 ED                MOV     A,R5
09D6 9F                SUBB    A,R7
09D7 EC                MOV     A,R4
09D8 9E                SUBB    A,R6
09D9 4012              JC      ?C0280
                                           ; SOURCE LINE # 1025
09DB C283              CLR     RELE1
09DD 900000      E     MOV     DPTR,#REL1_ON
09E0 E4                CLR     A
09E1 F0                MOVX    @DPTR,A
09E2 A3                INC     DPTR
09E3 E4                CLR     A
09E4 F0                MOVX    @DPTR,A
09E5 900000      E     MOV     DPTR,#REL1_OFF
09E8 E4                CLR     A
09E9 F0                MOVX    @DPTR,A
09EA A3                INC     DPTR
09EB E4                CLR     A
09EC F0                MOVX    @DPTR,A
09ED         ?C0280:
                                           ; SOURCE LINE # 1027
09ED 900000      R     MOV     DPTR,#POR_R1_OFF
09F0 E0                MOVX    A,@DPTR
09F1 FF                MOV     R7,A
09F2 7E00              MOV     R6,#00H
09F4 900000      E     MOV     DPTR,#REL1_OFF
09F7 E0                MOVX    A,@DPTR
09F8 FC                MOV     R4,A
09F9 A3                INC     DPTR
09FA E0                MOVX    A,@DPTR
09FB FD                MOV     R5,A
09FC D3                SETB    C
09FD ED                MOV     A,R5
09FE 9F                SUBB    A,R7
09FF EC                MOV     A,R4
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 118 

0A00 9E                SUBB    A,R6
0A01 4012              JC      ?C0281
                                           ; SOURCE LINE # 1028
0A03 D283              SETB    RELE1
0A05 900000      E     MOV     DPTR,#REL1_ON
0A08 E4                CLR     A
0A09 F0                MOVX    @DPTR,A
0A0A A3                INC     DPTR
0A0B E4                CLR     A
0A0C F0                MOVX    @DPTR,A
0A0D 900000      E     MOV     DPTR,#REL1_OFF
0A10 E4                CLR     A
0A11 F0                MOVX    @DPTR,A
0A12 A3                INC     DPTR
0A13 E4                CLR     A
0A14 F0                MOVX    @DPTR,A
0A15         ?C0281:
                                           ; SOURCE LINE # 1030
0A15 900000      R     MOV     DPTR,#POR_R2_ON
0A18 E0                MOVX    A,@DPTR
0A19 FF                MOV     R7,A
0A1A 7E00              MOV     R6,#00H
0A1C 900000      E     MOV     DPTR,#REL2_ON
0A1F E0                MOVX    A,@DPTR
0A20 FC                MOV     R4,A
0A21 A3                INC     DPTR
0A22 E0                MOVX    A,@DPTR
0A23 FD                MOV     R5,A
0A24 D3                SETB    C
0A25 ED                MOV     A,R5
0A26 9F                SUBB    A,R7
0A27 EC                MOV     A,R4
0A28 9E                SUBB    A,R6
0A29 4012              JC      ?C0282
                                           ; SOURCE LINE # 1031
0A2B C2B7              CLR     RD
0A2D 900000      E     MOV     DPTR,#REL2_ON
0A30 E4                CLR     A
0A31 F0                MOVX    @DPTR,A
0A32 A3                INC     DPTR
0A33 E4                CLR     A
0A34 F0                MOVX    @DPTR,A
0A35 900000      E     MOV     DPTR,#REL2_OFF
0A38 E4                CLR     A
0A39 F0                MOVX    @DPTR,A
0A3A A3                INC     DPTR
0A3B E4                CLR     A
0A3C F0                MOVX    @DPTR,A
0A3D         ?C0282:
                                           ; SOURCE LINE # 1033
0A3D 900000      R     MOV     DPTR,#POR_R2_OFF
0A40 E0                MOVX    A,@DPTR
0A41 FF                MOV     R7,A
0A42 7E00              MOV     R6,#00H
0A44 900000      E     MOV     DPTR,#REL2_OFF
0A47 E0                MOVX    A,@DPTR
0A48 FC                MOV     R4,A
0A49 A3                INC     DPTR
0A4A E0                MOVX    A,@DPTR
0A4B FD                MOV     R5,A
0A4C D3                SETB    C
0A4D ED                MOV     A,R5
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 119 

0A4E 9F                SUBB    A,R7
0A4F EC                MOV     A,R4
0A50 9E                SUBB    A,R6
0A51 4012              JC      ?C0283
                                           ; SOURCE LINE # 1034
0A53 D2B7              SETB    RD
0A55 900000      E     MOV     DPTR,#REL2_ON
0A58 E4                CLR     A
0A59 F0                MOVX    @DPTR,A
0A5A A3                INC     DPTR
0A5B E4                CLR     A
0A5C F0                MOVX    @DPTR,A
0A5D 900000      E     MOV     DPTR,#REL2_OFF
0A60 E4                CLR     A
0A61 F0                MOVX    @DPTR,A
0A62 A3                INC     DPTR
0A63 E4                CLR     A
0A64 F0                MOVX    @DPTR,A
0A65         ?C0283:
                                           ; SOURCE LINE # 1035
0A65 75000A      R     MOV     st_ser,#0AH
0A68 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 1036
0A6B         ?C0254:
                                           ; SOURCE LINE # 1037
0A6B         ?C0197:
                                           ; SOURCE LINE # 1038
0A6B 8006              SJMP    ?C0136
0A6D         ?C0184:
                                           ; SOURCE LINE # 1040
                                           ; SOURCE LINE # 1041
0A6D 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 1042
0A70 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 1043
0A73         ?C0284:
                                           ; SOURCE LINE # 1052
0A73         ?C0170:
                                           ; SOURCE LINE # 1053
0A73         ?C0136:
                                           ; SOURCE LINE # 1056
0A73 209903            JB      TI,$ + 6H
0A76 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 1057
                                           ; SOURCE LINE # 1058
0A79 C299              CLR     TI
                                           ; SOURCE LINE # 1059
0A7B 20B606            JB      WR,?C0286
                                           ; SOURCE LINE # 1060
0A7E 75000A      R     MOV     st_ser,#0AH
0A81 020000      R     LJMP    ?C0307
0A84         ?C0286:
                                           ; SOURCE LINE # 1062
0A84 E500        R     MOV     A,st_ser
0A86 6428              XRL     A,#028H
0A88 6003              JZ      $ + 5H
0A8A 020000      R     LJMP    ?C0287
                                           ; SOURCE LINE # 1063
                                           ; SOURCE LINE # 1064
0A8D 7800        R     MOV     R0,#LOW nro
0A8F E6                MOV     A,@R0
0A90 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 120 

0A91 EF                MOV     A,R7
0A92 D3                SETB    C
0A93 9405              SUBB    A,#05H
0A95 5056              JNC     ?C0288
                                           ; SOURCE LINE # 1065
                                           ; SOURCE LINE # 1066
0A97 7800        R     MOV     R0,#LOW nro
0A99 E6                MOV     A,@R0
0A9A FF                MOV     R7,A
0A9B EF                MOV     A,R7
0A9C B4020C            CJNE    A,#02H,?C0289
                                           ; SOURCE LINE # 1067
0A9F 900042            MOV     DPTR,#bufout+02H
0AA2 E0                MOVX    A,@DPTR
0AA3 FF                MOV     R7,A
0AA4 7800        R     MOV     R0,#LOW tmp
0AA6 EF                MOV     A,R7
0AA7 F6                MOV     @R0,A
0AA8 020000      R     LJMP    ?C0294
0AAB         ?C0289:
                                           ; SOURCE LINE # 1069
0AAB 7800        R     MOV     R0,#LOW nro
0AAD E6                MOV     A,@R0
0AAE FF                MOV     R7,A
0AAF EF                MOV     A,R7
0AB0 B40123            CJNE    A,#01H,?C0291
                                           ; SOURCE LINE # 1070
                                           ; SOURCE LINE # 1071
0AB3 E500        R     MOV     A,lineadd
0AB5 4480              ORL     A,#080H
0AB7 FF                MOV     R7,A
0AB8 7800        R     MOV     R0,#LOW tmp
0ABA EF                MOV     A,R7
0ABB F6                MOV     @R0,A
                                           ; SOURCE LINE # 1072
0ABC 7800        R     MOV     R0,#LOW crco
0ABE 7600              MOV     @R0,#00H
0AC0 08                INC     R0
0AC1 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1073
0AC3 E500        R     MOV     A,r_crc
0AC5 64FF              XRL     A,#0FFH
0AC7 7003              JNZ     $ + 5H
0AC9 020000      R     LJMP    ?C0294
                                           ; SOURCE LINE # 1074
0ACC 7800        R     MOV     R0,#LOW crco
0ACE 76FF              MOV     @R0,#0FFH
0AD0 08                INC     R0
0AD1 76FF              MOV     @R0,#0FFH
0AD3         ?C0292:
                                           ; SOURCE LINE # 1075
0AD3 020000      R     LJMP    ?C0294
0AD6         ?C0291:
                                           ; SOURCE LINE # 1077
0AD6 7800        R     MOV     R0,#LOW nro
0AD8 E6                MOV     A,@R0
0AD9 FF                MOV     R7,A
0ADA 7400        R     MOV     A,#LOW zbuf
0ADC 2F                ADD     A,R7
0ADD F582              MOV     DPL,A
0ADF E4                CLR     A
0AE0 3400        R     ADDC    A,#HIGH zbuf
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 121 

0AE2 F583              MOV     DPH,A
0AE4 E0                MOVX    A,@DPTR
0AE5 FF                MOV     R7,A
0AE6 7800        R     MOV     R0,#LOW tmp
0AE8 EF                MOV     A,R7
0AE9 F6                MOV     @R0,A
0AEA         ?C0293:
0AEA         ?C0290:
                                           ; SOURCE LINE # 1078
0AEA 020000      R     LJMP    ?C0294
0AED         ?C0288:
                                           ; SOURCE LINE # 1080
0AED 7800        R     MOV     R0,#LOW nro
0AEF E6                MOV     A,@R0
0AF0 FF                MOV     R7,A
0AF1 EF                MOV     A,R7
0AF2 6500        R     XRL     A,len_o
0AF4 701C              JNZ     ?C0295
                                           ; SOURCE LINE # 1081
                                           ; SOURCE LINE # 1082
0AF6 E500        R     MOV     A,r_crc
0AF8 B4FF06            CJNE    A,#0FFH,?C0296
                                           ; SOURCE LINE # 1083
0AFB 7800        R     MOV     R0,#LOW tmp
0AFD A600        R     MOV     @R0,status
0AFF 807A              SJMP    ?C0294
0B01         ?C0296:
                                           ; SOURCE LINE # 1085
0B01 7800        R     MOV     R0,#LOW crco
0B03 E6                MOV     A,@R0
0B04 FE                MOV     R6,A
0B05 08                INC     R0
0B06 E6                MOV     A,@R0
0B07 FF                MOV     R7,A
0B08 EE                MOV     A,R6
0B09 FF                MOV     R7,A
0B0A 7E00              MOV     R6,#00H
0B0C 7800        R     MOV     R0,#LOW tmp
0B0E EF                MOV     A,R7
0B0F F6                MOV     @R0,A
0B10         ?C0297:
                                           ; SOURCE LINE # 1086
0B10 8069              SJMP    ?C0294
0B12         ?C0295:
                                           ; SOURCE LINE # 1088
0B12 AF00        R     MOV     R7,len_o
0B14 7E00              MOV     R6,#00H
0B16 EF                MOV     A,R7
0B17 2401              ADD     A,#01H
0B19 FF                MOV     R7,A
0B1A EE                MOV     A,R6
0B1B 3400              ADDC    A,#00H
0B1D FE                MOV     R6,A
0B1E 7800        R     MOV     R0,#LOW nro
0B20 E6                MOV     A,@R0
0B21 FD                MOV     R5,A
0B22 7C00              MOV     R4,#00H
0B24 ED                MOV     A,R5
0B25 6F                XRL     A,R7
0B26 7002              JNZ     ?C0768
0B28 EC                MOV     A,R4
0B29 6E                XRL     A,R6
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 122 

0B2A         ?C0768:
0B2A 700D              JNZ     ?C0299
                                           ; SOURCE LINE # 1089
0B2C 7800        R     MOV     R0,#LOW crco
0B2E E6                MOV     A,@R0
0B2F FE                MOV     R6,A
0B30 08                INC     R0
0B31 E6                MOV     A,@R0
0B32 FF                MOV     R7,A
0B33 7800        R     MOV     R0,#LOW tmp
0B35 EF                MOV     A,R7
0B36 F6                MOV     @R0,A
0B37 8042              SJMP    ?C0294
0B39         ?C0299:
                                           ; SOURCE LINE # 1091
0B39 AF00        R     MOV     R7,len_o
0B3B 7E00              MOV     R6,#00H
0B3D EF                MOV     A,R7
0B3E 2401              ADD     A,#01H
0B40 FF                MOV     R7,A
0B41 EE                MOV     A,R6
0B42 3400              ADDC    A,#00H
0B44 FE                MOV     R6,A
0B45 7800        R     MOV     R0,#LOW nro
0B47 E6                MOV     A,@R0
0B48 FD                MOV     R5,A
0B49 7C00              MOV     R4,#00H
0B4B D3                SETB    C
0B4C ED                MOV     A,R5
0B4D 9F                SUBB    A,R7
0B4E EE                MOV     A,R6
0B4F 6480              XRL     A,#080H
0B51 F8                MOV     R0,A
0B52 EC                MOV     A,R4
0B53 6480              XRL     A,#080H
0B55 98                SUBB    A,R0
0B56 400F              JC      ?C0301
                                           ; SOURCE LINE # 1092
                                           ; SOURCE LINE # 1093
0B58 7800        R     MOV     R0,#LOW crco
0B5A 7600              MOV     @R0,#00H
0B5C 08                INC     R0
0B5D 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1094
0B5F 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 1095
0B62 020000      R     LJMP    ?C0307
                                           ; SOURCE LINE # 1096
0B65 8014              SJMP    ?C0294
0B67         ?C0301:
                                           ; SOURCE LINE # 1098
0B67 7800        R     MOV     R0,#LOW nro
0B69 E6                MOV     A,@R0
0B6A FF                MOV     R7,A
0B6B 7440              MOV     A,#LOW bufout
0B6D 2F                ADD     A,R7
0B6E F582              MOV     DPL,A
0B70 E4                CLR     A
0B71 3400              ADDC    A,#HIGH bufout
0B73 F583              MOV     DPH,A
0B75 E0                MOVX    A,@DPTR
0B76 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 123 

0B77 7800        R     MOV     R0,#LOW tmp
0B79 EF                MOV     A,R7
0B7A F6                MOV     @R0,A
0B7B         ?C0302:
0B7B         ?C0300:
0B7B         ?C0298:
0B7B         ?C0294:
                                           ; SOURCE LINE # 1099
0B7B 7800        R     MOV     R0,#LOW tmp
0B7D E6                MOV     A,@R0
0B7E FF                MOV     R7,A
0B7F 8F99              MOV     SBUF,R7
                                           ; SOURCE LINE # 1100
0B81 E500        R     MOV     A,r_crc
0B83 B4FF11            CJNE    A,#0FFH,?C0303
                                           ; SOURCE LINE # 1101
0B86 7800        R     MOV     R0,#LOW tmp
0B88 E6                MOV     A,@R0
0B89 FF                MOV     R7,A
0B8A 7E00              MOV     R6,#00H
0B8C 7800        R     MOV     R0,#LOW crco+01H
0B8E EF                MOV     A,R7
0B8F 26                ADD     A,@R0
0B90 F6                MOV     @R0,A
0B91 18                DEC     R0
0B92 EE                MOV     A,R6
0B93 36                ADDC    A,@R0
0B94 F6                MOV     @R0,A
0B95 804F              SJMP    ?C0304
0B97         ?C0303:
                                           ; SOURCE LINE # 1103
0B97 7800        R     MOV     R0,#LOW nro
0B99 E6                MOV     A,@R0
0B9A FF                MOV     R7,A
0B9B EF                MOV     A,R7
0B9C 6500        R     XRL     A,len_o
0B9E 6046              JZ      ?C0304
                                           ; SOURCE LINE # 1104
0BA0 7800        R     MOV     R0,#LOW crco
0BA2 E6                MOV     A,@R0
0BA3 FE                MOV     R6,A
0BA4 08                INC     R0
0BA5 E6                MOV     A,@R0
0BA6 FF                MOV     R7,A
0BA7 7E00              MOV     R6,#00H
0BA9 7800        R     MOV     R0,#LOW tmp
0BAB E6                MOV     A,@R0
0BAC 06                INC     @R0
0BAD FD                MOV     R5,A
0BAE 7C00              MOV     R4,#00H
0BB0 EE                MOV     A,R6
0BB1 6C                XRL     A,R4
0BB2 FE                MOV     R6,A
0BB3 EF                MOV     A,R7
0BB4 6D                XRL     A,R5
0BB5 FF                MOV     R7,A
0BB6 EF                MOV     A,R7
0BB7 25E0              ADD     A,ACC
0BB9 FF                MOV     R7,A
0BBA EE                MOV     A,R6
0BBB 33                RLC     A
0BBC FE                MOV     R6,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 124 

0BBD 7400        R     MOV     A,#LOW Crc16Table
0BBF 2F                ADD     A,R7
0BC0 F582              MOV     DPL,A
0BC2 7400        R     MOV     A,#HIGH Crc16Table
0BC4 3E                ADDC    A,R6
0BC5 F583              MOV     DPH,A
0BC7 E4                CLR     A
0BC8 93                MOVC    A,@A+DPTR
0BC9 FC                MOV     R4,A
0BCA 7401              MOV     A,#01H
0BCC 93                MOVC    A,@A+DPTR
0BCD FD                MOV     R5,A
0BCE 7800        R     MOV     R0,#LOW crco
0BD0 E6                MOV     A,@R0
0BD1 FE                MOV     R6,A
0BD2 08                INC     R0
0BD3 E6                MOV     A,@R0
0BD4 FF                MOV     R7,A
0BD5 EE                MOV     A,R6
0BD6 FF                MOV     R7,A
0BD7 7E00              MOV     R6,#00H
0BD9 EE                MOV     A,R6
0BDA 6C                XRL     A,R4
0BDB FE                MOV     R6,A
0BDC EF                MOV     A,R7
0BDD 6D                XRL     A,R5
0BDE FF                MOV     R7,A
0BDF 7800        R     MOV     R0,#LOW crco
0BE1 EE                MOV     A,R6
0BE2 F6                MOV     @R0,A
0BE3 08                INC     R0
0BE4 EF                MOV     A,R7
0BE5 F6                MOV     @R0,A
0BE6         ?C0305:
0BE6         ?C0304:
                                           ; SOURCE LINE # 1106
0BE6 7800        R     MOV     R0,#LOW nro
0BE8 06                INC     @R0
                                           ; SOURCE LINE # 1107
0BE9 8003              SJMP    ?C0307
0BEB         ?C0287:
                                           ; SOURCE LINE # 1109
0BEB 75000A      R     MOV     st_ser,#0AH
0BEE         ?C0306:
                                           ; SOURCE LINE # 1110
0BEE         ?C0285:
                                           ; SOURCE LINE # 1113
0BEE         kon:
                                           ; SOURCE LINE # 1115
0BEE         ?C0307:
0BEE D0D0              POP     PSW
0BF0 D082              POP     DPL
0BF2 D083              POP     DPH
0BF4 D0F0              POP     B
0BF6 D0E0              POP     ACC
0BF8 32                RETI    
             ; FUNCTION ser_int (END)

             ; FUNCTION kmd (BEGIN)
                                           ; SOURCE LINE # 1119
                                           ; SOURCE LINE # 1120
                                           ; SOURCE LINE # 1124
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 125 

0000 900000      R     MOV     DPTR,#zbuf+05H
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 EF                MOV     A,R7
0006 B40204            CJNE    A,#02H,?C0309
0009 7F01              MOV     R7,#01H
000B 8002              SJMP    ?C0310
000D         ?C0309:
000D 7F00              MOV     R7,#00H
000F         ?C0310:
000F 900000      R     MOV     DPTR,#zbuf+02H
0012 E0                MOVX    A,@DPTR
0013 FE                MOV     R6,A
0014 EE                MOV     A,R6
0015 B40904            CJNE    A,#09H,?C0311
0018 7E01              MOV     R6,#01H
001A 8002              SJMP    ?C0312
001C         ?C0311:
001C 7E00              MOV     R6,#00H
001E         ?C0312:
001E EE                MOV     A,R6
001F 5F                ANL     A,R7
0020 FF                MOV     R7,A
0021 900000      R     MOV     DPTR,#zbuf+06H
0024 E0                MOVX    A,@DPTR
0025 FE                MOV     R6,A
0026 EE                MOV     A,R6
0027 B4A004            CJNE    A,#0A0H,?C0313
002A 7E01              MOV     R6,#01H
002C 8002              SJMP    ?C0314
002E         ?C0313:
002E 7E00              MOV     R6,#00H
0030         ?C0314:
0030 EE                MOV     A,R6
0031 5F                ANL     A,R7
0032 FF                MOV     R7,A
0033 900000      R     MOV     DPTR,#zbuf+07H
0036 E0                MOVX    A,@DPTR
0037 FE                MOV     R6,A
0038 EE                MOV     A,R6
0039 B40104            CJNE    A,#01H,?C0315
003C 7E01              MOV     R6,#01H
003E 8002              SJMP    ?C0316
0040         ?C0315:
0040 7E00              MOV     R6,#00H
0042         ?C0316:
0042 EE                MOV     A,R6
0043 5F                ANL     A,R7
0044 FF                MOV     R7,A
0045 EF                MOV     A,R7
0046 602A              JZ      ?C0308
                                           ; SOURCE LINE # 1125
                                           ; SOURCE LINE # 1126
0048 D200        R     SETB    FL_BLOK_EPROM
                                           ; SOURCE LINE # 1127
004A 900000      R     MOV     DPTR,#zbuf+06H
004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
004F 900046            MOV     DPTR,#bufout+06H
0052 EF                MOV     A,R7
0053 F0                MOVX    @DPTR,A
0054 900000      R     MOV     DPTR,#zbuf+07H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 126 

0057 E0                MOVX    A,@DPTR
0058 FF                MOV     R7,A
0059 900047            MOV     DPTR,#bufout+07H
005C EF                MOV     A,R7
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1128
005E D2B6              SETB    WR
                                           ; SOURCE LINE # 1129
0060 7800        R     MOV     R0,#LOW TM_LINE
0062 E6                MOV     A,@R0
0063 FF                MOV     R7,A
0064 7800        R     MOV     R0,#LOW TM_LINE
0066 E6                MOV     A,@R0
0067 FE                MOV     R6,A
0068 EE                MOV     A,R6
0069 2F                ADD     A,R7
006A FF                MOV     R7,A
006B 7800        R     MOV     R0,#LOW tmo
006D EF                MOV     A,R7
006E F6                MOV     @R0,A
                                           ; SOURCE LINE # 1130
006F 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 1131
0072         ?C0308:
                                           ; SOURCE LINE # 1134
0072 900000      R     MOV     DPTR,#zbuf+05H
0075 E0                MOVX    A,@DPTR
0076 FF                MOV     R7,A
0077 EF                MOV     A,R7
0078 B40404            CJNE    A,#04H,?C0318
007B 7F01              MOV     R7,#01H
007D 8002              SJMP    ?C0319
007F         ?C0318:
007F 7F00              MOV     R7,#00H
0081         ?C0319:
0081 900000      R     MOV     DPTR,#zbuf+02H
0084 E0                MOVX    A,@DPTR
0085 FE                MOV     R6,A
0086 EE                MOV     A,R6
0087 B40B04            CJNE    A,#0BH,?C0320
008A 7E01              MOV     R6,#01H
008C 8002              SJMP    ?C0321
008E         ?C0320:
008E 7E00              MOV     R6,#00H
0090         ?C0321:
0090 EE                MOV     A,R6
0091 5F                ANL     A,R7
0092 FF                MOV     R7,A
0093 900000      R     MOV     DPTR,#zbuf+06H
0096 E0                MOVX    A,@DPTR
0097 FE                MOV     R6,A
0098 EE                MOV     A,R6
0099 B4C104            CJNE    A,#0C1H,?C0322
009C 7E01              MOV     R6,#01H
009E 8002              SJMP    ?C0323
00A0         ?C0322:
00A0 7E00              MOV     R6,#00H
00A2         ?C0323:
00A2 EE                MOV     A,R6
00A3 5F                ANL     A,R7
00A4 FF                MOV     R7,A
00A5 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 127 

00A6 7003              JNZ     $ + 5H
00A8 020000      R     LJMP    ?C0317
                                           ; SOURCE LINE # 1135
                                           ; SOURCE LINE # 1137
00AB 750000      R     MOV     t,#00H
                                           ; SOURCE LINE # 1139
00AE 900000      R     MOV     DPTR,#zbuf+07H
00B1 E0                MOVX    A,@DPTR
00B2 FF                MOV     R7,A
00B3 8F00        R     MOV     t,R7
                                           ; SOURCE LINE # 1211
00B5 E500        R     MOV     A,t
00B7 6440              XRL     A,#040H
00B9 7040              JNZ     ?C0324
                                           ; SOURCE LINE # 1212
                                           ; SOURCE LINE # 1213
00BB 900000      R     MOV     DPTR,#ob_par
00BE E0                MOVX    A,@DPTR
00BF FE                MOV     R6,A
00C0 A3                INC     DPTR
00C1 E0                MOVX    A,@DPTR
00C2 FF                MOV     R7,A
00C3 7F00              MOV     R7,#00H
00C5 EF                MOV     A,R7
00C6 4E                ORL     A,R6
00C7 7032              JNZ     ?C0324
                                           ; SOURCE LINE # 1214
                                           ; SOURCE LINE # 1215
00C9 900000      R     MOV     DPTR,#ob_par
00CC E0                MOVX    A,@DPTR
00CD FE                MOV     R6,A
00CE A3                INC     DPTR
00CF E0                MOVX    A,@DPTR
00D0 FF                MOV     R7,A
00D1 EE                MOV     A,R6
00D2 4408              ORL     A,#08H
00D4 FE                MOV     R6,A
00D5 900000      R     MOV     DPTR,#ob_par
00D8 EE                MOV     A,R6
00D9 F0                MOVX    @DPTR,A
00DA A3                INC     DPTR
00DB EF                MOV     A,R7
00DC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1216
00DD 900000      R     MOV     DPTR,#zbuf+08H
00E0 E0                MOVX    A,@DPTR
00E1 FF                MOV     R7,A
00E2 7E00              MOV     R6,#00H
00E4 EF                MOV     A,R7
00E5 750000      E     MOV     new_zn+01H,#00H
00E8 F500        E     MOV     new_zn,A
                                           ; SOURCE LINE # 1217
00EA 900000      R     MOV     DPTR,#zbuf+09H
00ED E0                MOVX    A,@DPTR
00EE FF                MOV     R7,A
00EF 7E00              MOV     R6,#00H
00F1 EF                MOV     A,R7
00F2 2500        E     ADD     A,new_zn+01H
00F4 F500        E     MOV     new_zn+01H,A
00F6 EE                MOV     A,R6
00F7 3500        E     ADDC    A,new_zn
00F9 F500        E     MOV     new_zn,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 128 

                                           ; SOURCE LINE # 1218
00FB         ?C0325:
                                           ; SOURCE LINE # 1219
00FB         ?C0324:
                                           ; SOURCE LINE # 1221
00FB E500        R     MOV     A,t
00FD 6450              XRL     A,#050H
00FF 7040              JNZ     ?C0317
                                           ; SOURCE LINE # 1222
                                           ; SOURCE LINE # 1223
0101 900000      R     MOV     DPTR,#ob_par
0104 E0                MOVX    A,@DPTR
0105 FE                MOV     R6,A
0106 A3                INC     DPTR
0107 E0                MOVX    A,@DPTR
0108 FF                MOV     R7,A
0109 7F00              MOV     R7,#00H
010B EF                MOV     A,R7
010C 4E                ORL     A,R6
010D 7032              JNZ     ?C0317
                                           ; SOURCE LINE # 1224
                                           ; SOURCE LINE # 1225
010F 900000      R     MOV     DPTR,#ob_par
0112 E0                MOVX    A,@DPTR
0113 FE                MOV     R6,A
0114 A3                INC     DPTR
0115 E0                MOVX    A,@DPTR
0116 FF                MOV     R7,A
0117 EE                MOV     A,R6
0118 4410              ORL     A,#010H
011A FE                MOV     R6,A
011B 900000      R     MOV     DPTR,#ob_par
011E EE                MOV     A,R6
011F F0                MOVX    @DPTR,A
0120 A3                INC     DPTR
0121 EF                MOV     A,R7
0122 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1226
0123 900000      R     MOV     DPTR,#zbuf+08H
0126 E0                MOVX    A,@DPTR
0127 FF                MOV     R7,A
0128 7E00              MOV     R6,#00H
012A EF                MOV     A,R7
012B 750000      E     MOV     new_zn+01H,#00H
012E F500        E     MOV     new_zn,A
                                           ; SOURCE LINE # 1227
0130 900000      R     MOV     DPTR,#zbuf+09H
0133 E0                MOVX    A,@DPTR
0134 FF                MOV     R7,A
0135 7E00              MOV     R6,#00H
0137 EF                MOV     A,R7
0138 2500        E     ADD     A,new_zn+01H
013A F500        E     MOV     new_zn+01H,A
013C EE                MOV     A,R6
013D 3500        E     ADDC    A,new_zn
013F F500        E     MOV     new_zn,A
                                           ; SOURCE LINE # 1228
0141         ?C0327:
                                           ; SOURCE LINE # 1229
0141         ?C0326:
                                           ; SOURCE LINE # 1265
0141         ?C0317:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 129 

                                           ; SOURCE LINE # 1281
0141 900000      R     MOV     DPTR,#zbuf+07H
0144 E0                MOVX    A,@DPTR
0145 FF                MOV     R7,A
0146 EF                MOV     A,R7
0147 B43404            CJNE    A,#034H,?C0329
014A 7F01              MOV     R7,#01H
014C 8002              SJMP    ?C0330
014E         ?C0329:
014E 7F00              MOV     R7,#00H
0150         ?C0330:
0150 900000      R     MOV     DPTR,#zbuf+06H
0153 E0                MOVX    A,@DPTR
0154 FE                MOV     R6,A
0155 EE                MOV     A,R6
0156 B4B204            CJNE    A,#0B2H,?C0331
0159 7E01              MOV     R6,#01H
015B 8002              SJMP    ?C0332
015D         ?C0331:
015D 7E00              MOV     R6,#00H
015F         ?C0332:
015F EE                MOV     A,R6
0160 5F                ANL     A,R7
0161 FF                MOV     R7,A
0162 EF                MOV     A,R7
0163 6062              JZ      ?C0328
                                           ; SOURCE LINE # 1282
                                           ; SOURCE LINE # 1284
0165 900000      R     MOV     DPTR,#zbuf+06H
0168 E0                MOVX    A,@DPTR
0169 FF                MOV     R7,A
016A 900046            MOV     DPTR,#bufout+06H
016D EF                MOV     A,R7
016E F0                MOVX    @DPTR,A
016F 900000      R     MOV     DPTR,#zbuf+07H
0172 E0                MOVX    A,@DPTR
0173 FF                MOV     R7,A
0174 900047            MOV     DPTR,#bufout+07H
0177 EF                MOV     A,R7
0178 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1285
0179 900000      R     MOV     DPTR,#VER_PR
017C E4                CLR     A
017D 93                MOVC    A,@A+DPTR
017E FE                MOV     R6,A
017F 7401              MOV     A,#01H
0181 93                MOVC    A,@A+DPTR
0182 FF                MOV     R7,A
0183 EE                MOV     A,R6
0184 FF                MOV     R7,A
0185 7E00              MOV     R6,#00H
0187 900048            MOV     DPTR,#bufout+08H
018A EF                MOV     A,R7
018B F0                MOVX    @DPTR,A
018C 900000      R     MOV     DPTR,#VER_PR
018F E4                CLR     A
0190 93                MOVC    A,@A+DPTR
0191 FE                MOV     R6,A
0192 7401              MOV     A,#01H
0194 93                MOVC    A,@A+DPTR
0195 FF                MOV     R7,A
0196 900049            MOV     DPTR,#bufout+09H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 130 

0199 EF                MOV     A,R7
019A F0                MOVX    @DPTR,A
019B 90004A            MOV     DPTR,#bufout+0AH
019E E500        R     MOV     A,st_ser
01A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1286
01A1 90004B            MOV     DPTR,#bufout+0BH
01A4 E5B7              MOV     A,SPH
01A6 F0                MOVX    @DPTR,A
01A7 90004C            MOV     DPTR,#bufout+0CH
01AA E581              MOV     A,SP
01AC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1287
01AD D2B6              SETB    WR
01AF 7800        R     MOV     R0,#LOW TM_LINE
01B1 E6                MOV     A,@R0
01B2 FF                MOV     R7,A
01B3 7800        R     MOV     R0,#LOW TM_LINE
01B5 E6                MOV     A,@R0
01B6 FE                MOV     R6,A
01B7 EE                MOV     A,R6
01B8 2F                ADD     A,R7
01B9 FF                MOV     R7,A
01BA 7800        R     MOV     R0,#LOW tmo
01BC EF                MOV     A,R7
01BD F6                MOV     @R0,A
                                           ; SOURCE LINE # 1288
01BE 900000      R     MOV     DPTR,#zbuf+05H
01C1 7407              MOV     A,#07H
01C3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1289
01C4 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 1290
01C7         ?C0328:
                                           ; SOURCE LINE # 1293
01C7 900000      R     MOV     DPTR,#zbuf+06H
01CA E0                MOVX    A,@DPTR
01CB FF                MOV     R7,A
01CC EF                MOV     A,R7
01CD B4B004            CJNE    A,#0B0H,?C0334
01D0 7F01              MOV     R7,#01H
01D2 8002              SJMP    ?C0335
01D4         ?C0334:
01D4 7F00              MOV     R7,#00H
01D6         ?C0335:
01D6 900000      R     MOV     DPTR,#zbuf+05H
01D9 E0                MOVX    A,@DPTR
01DA FE                MOV     R6,A
01DB EE                MOV     A,R6
01DC B40204            CJNE    A,#02H,?C0336
01DF 7E01              MOV     R6,#01H
01E1 8002              SJMP    ?C0337
01E3         ?C0336:
01E3 7E00              MOV     R6,#00H
01E5         ?C0337:
01E5 EE                MOV     A,R6
01E6 5F                ANL     A,R7
01E7 FF                MOV     R7,A
01E8 900000      R     MOV     DPTR,#zbuf+07H
01EB E0                MOVX    A,@DPTR
01EC FE                MOV     R6,A
01ED EE                MOV     A,R6
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 131 

01EE 64FF              XRL     A,#0FFH
01F0 6004              JZ      ?C0338
01F2 7E01              MOV     R6,#01H
01F4 8002              SJMP    ?C0339
01F6         ?C0338:
01F6 7E00              MOV     R6,#00H
01F8         ?C0339:
01F8 EE                MOV     A,R6
01F9 5F                ANL     A,R7
01FA FF                MOV     R7,A
01FB EF                MOV     A,R7
01FC 605C              JZ      ?C0333
                                           ; SOURCE LINE # 1294
                                           ; SOURCE LINE # 1295
01FE 900000      R     MOV     DPTR,#zbuf+07H
0201 E0                MOVX    A,@DPTR
0202 FF                MOV     R7,A
0203 EF                MOV     A,R7
0204 B4010E            CJNE    A,#01H,?C0340
                                           ; SOURCE LINE # 1296
0207 900000      R     MOV     DPTR,#ob_par+01H
020A E0                MOVX    A,@DPTR
020B FF                MOV     R7,A
020C EF                MOV     A,R7
020D 4401              ORL     A,#01H
020F FF                MOV     R7,A
0210 900000      R     MOV     DPTR,#ob_par+01H
0213 EF                MOV     A,R7
0214 F0                MOVX    @DPTR,A
0215         ?C0340:
                                           ; SOURCE LINE # 1298
0215 900000      R     MOV     DPTR,#zbuf+07H
0218 E0                MOVX    A,@DPTR
0219 FF                MOV     R7,A
021A EF                MOV     A,R7
021B B4020E            CJNE    A,#02H,?C0341
                                           ; SOURCE LINE # 1299
021E 900000      R     MOV     DPTR,#ob_par+01H
0221 E0                MOVX    A,@DPTR
0222 FF                MOV     R7,A
0223 EF                MOV     A,R7
0224 4402              ORL     A,#02H
0226 FF                MOV     R7,A
0227 900000      R     MOV     DPTR,#ob_par+01H
022A EF                MOV     A,R7
022B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1300
022C         ?C0341:
                                           ; SOURCE LINE # 1302
022C 900000      R     MOV     DPTR,#zbuf+07H
022F E0                MOVX    A,@DPTR
0230 FF                MOV     R7,A
0231 EF                MOV     A,R7
0232 B4030E            CJNE    A,#03H,?C0342
                                           ; SOURCE LINE # 1303
0235 900000      R     MOV     DPTR,#ob_par+01H
0238 E0                MOVX    A,@DPTR
0239 FF                MOV     R7,A
023A EF                MOV     A,R7
023B 4404              ORL     A,#04H
023D FF                MOV     R7,A
023E 900000      R     MOV     DPTR,#ob_par+01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 132 

0241 EF                MOV     A,R7
0242 F0                MOVX    @DPTR,A
0243         ?C0342:
                                           ; SOURCE LINE # 1305
0243 900000      R     MOV     DPTR,#zbuf+07H
0246 E0                MOVX    A,@DPTR
0247 FF                MOV     R7,A
0248 EF                MOV     A,R7
0249 B4200E            CJNE    A,#020H,?C0333
                                           ; SOURCE LINE # 1306
024C 900000      R     MOV     DPTR,#ob_par+01H
024F E0                MOVX    A,@DPTR
0250 FF                MOV     R7,A
0251 EF                MOV     A,R7
0252 4420              ORL     A,#020H
0254 FF                MOV     R7,A
0255 900000      R     MOV     DPTR,#ob_par+01H
0258 EF                MOV     A,R7
0259 F0                MOVX    @DPTR,A
025A         ?C0343:
                                           ; SOURCE LINE # 1325
025A         ?C0333:
                                           ; SOURCE LINE # 1343
025A 900000      R     MOV     DPTR,#zbuf+06H
025D E0                MOVX    A,@DPTR
025E FF                MOV     R7,A
025F EF                MOV     A,R7
0260 64B5              XRL     A,#0B5H
0262 6003              JZ      $ + 5H
0264 020000      R     LJMP    ?C0344
                                           ; SOURCE LINE # 1344
                                           ; SOURCE LINE # 1345
0267 900000      R     MOV     DPTR,#zbuf+05H
026A E0                MOVX    A,@DPTR
026B FF                MOV     R7,A
026C EF                MOV     A,R7
026D B40A04            CJNE    A,#0AH,?C0346
0270 7F01              MOV     R7,#01H
0272 8002              SJMP    ?C0347
0274         ?C0346:
0274 7F00              MOV     R7,#00H
0276         ?C0347:
0276 E500        R     MOV     A,cmd
0278 B40104            CJNE    A,#01H,?C0348
027B 7E01              MOV     R6,#01H
027D 8002              SJMP    ?C0349
027F         ?C0348:
027F 7E00              MOV     R6,#00H
0281         ?C0349:
0281 EE                MOV     A,R6
0282 5F                ANL     A,R7
0283 FF                MOV     R7,A
0284 900000      R     MOV     DPTR,#zbuf+02H
0287 E0                MOVX    A,@DPTR
0288 FE                MOV     R6,A
0289 EE                MOV     A,R6
028A B41104            CJNE    A,#011H,?C0350
028D 7E01              MOV     R6,#01H
028F 8002              SJMP    ?C0351
0291         ?C0350:
0291 7E00              MOV     R6,#00H
0293         ?C0351:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 133 

0293 EE                MOV     A,R6
0294 5F                ANL     A,R7
0295 FF                MOV     R7,A
0296 EF                MOV     A,R7
0297 7003              JNZ     $ + 5H
0299 020000      R     LJMP    ?C0345
                                           ; SOURCE LINE # 1346
                                           ; SOURCE LINE # 1361
029C 900000      R     MOV     DPTR,#zbuf+09H
029F E0                MOVX    A,@DPTR
02A0 FF                MOV     R7,A
02A1 8FA3              MOV     SEC,R7
                                           ; SOURCE LINE # 1362
02A3 900000      R     MOV     DPTR,#zbuf+0AH
02A6 E0                MOVX    A,@DPTR
02A7 FF                MOV     R7,A
02A8 8FA4              MOV     MIN,R7
                                           ; SOURCE LINE # 1363
02AA 900000      R     MOV     DPTR,#zbuf+0BH
02AD E0                MOVX    A,@DPTR
02AE FF                MOV     R7,A
02AF 8FA5              MOV     HOUR,R7
                                           ; SOURCE LINE # 1365
02B1 900000      R     MOV     DPTR,#zbuf+07H
02B4 74D0              MOV     A,#0D0H
02B6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1366
02B7 900000      R     MOV     DPTR,#zbuf+08H
02BA E4                CLR     A
02BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1367
02BC C2EF              CLR     MDO
                                           ; SOURCE LINE # 1368
02BE 900000      R     MOV     DPTR,#DL
02C1 7402              MOV     A,#02H
02C3 F0                MOVX    @DPTR,A
02C4         ?C0352:
02C4 900000      R     MOV     DPTR,#DL
02C7 E0                MOVX    A,@DPTR
02C8 14                DEC     A
02C9 F0                MOVX    @DPTR,A
02CA 900000      R     MOV     DPTR,#DL
02CD E0                MOVX    A,@DPTR
02CE FF                MOV     R7,A
02CF EF                MOV     A,R7
02D0 70F2              JNZ     ?C0352
02D2 8002              SJMP    ?C0353
02D4         ?C0354:
02D4 80EE              SJMP    ?C0352
02D6         ?C0353:
                                           ; SOURCE LINE # 1369
02D6 C2ED              CLR     MCO
                                           ; SOURCE LINE # 1370
02D8 7800        R     MOV     R0,#LOW j
02DA 7607              MOV     @R0,#07H
02DC         ?C0355:
02DC 7800        R     MOV     R0,#LOW j
02DE E6                MOV     A,@R0
02DF FF                MOV     R7,A
02E0 EF                MOV     A,R7
02E1 C3                CLR     C
02E2 9411              SUBB    A,#011H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 134 

02E4 4003              JC      $ + 5H
02E6 020000      R     LJMP    ?C0356
                                           ; SOURCE LINE # 1371
                                           ; SOURCE LINE # 1372
02E9 750000      R     MOV     i1,#00H
02EC         ?C0358:
02EC E500        R     MOV     A,i1
02EE C3                CLR     C
02EF 9408              SUBB    A,#08H
02F1 5077              JNC     ?C0359
                                           ; SOURCE LINE # 1373
                                           ; SOURCE LINE # 1374
02F3 7800        R     MOV     R0,#LOW j
02F5 E6                MOV     A,@R0
02F6 FF                MOV     R7,A
02F7 7400        R     MOV     A,#LOW zbuf
02F9 2F                ADD     A,R7
02FA F582              MOV     DPL,A
02FC E4                CLR     A
02FD 3400        R     ADDC    A,#HIGH zbuf
02FF F583              MOV     DPH,A
0301 E0                MOVX    A,@DPTR
0302 FF                MOV     R7,A
0303 EF                MOV     A,R7
0304 20E704            JB      ACC.7,?C0361
                                           ; SOURCE LINE # 1375
                                           ; SOURCE LINE # 1376
0307 C2EF              CLR     MDO
                                           ; SOURCE LINE # 1377
0309 8002              SJMP    ?C0362
030B         ?C0361:
                                           ; SOURCE LINE # 1379
                                           ; SOURCE LINE # 1380
030B D2EF              SETB    MDO
                                           ; SOURCE LINE # 1381
030D         ?C0362:
                                           ; SOURCE LINE # 1382
030D 900000      R     MOV     DPTR,#DL
0310 7402              MOV     A,#02H
0312 F0                MOVX    @DPTR,A
0313         ?C0363:
0313 900000      R     MOV     DPTR,#DL
0316 E0                MOVX    A,@DPTR
0317 14                DEC     A
0318 F0                MOVX    @DPTR,A
0319 900000      R     MOV     DPTR,#DL
031C E0                MOVX    A,@DPTR
031D FF                MOV     R7,A
031E EF                MOV     A,R7
031F 70F2              JNZ     ?C0363
0321 8002              SJMP    ?C0364
0323         ?C0365:
0323 80EE              SJMP    ?C0363
0325         ?C0364:
                                           ; SOURCE LINE # 1383
0325 D2ED              SETB    MCO
0327         ?C0366:
0327 30EDFD            JNB     MCO,?C0366
032A 8002              SJMP    ?C0367
032C         ?C0368:
032C 80F9              SJMP    ?C0366
032E         ?C0367:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 135 

                                           ; SOURCE LINE # 1384
032E 900000      R     MOV     DPTR,#DL
0331 7402              MOV     A,#02H
0333 F0                MOVX    @DPTR,A
0334         ?C0369:
0334 900000      R     MOV     DPTR,#DL
0337 E0                MOVX    A,@DPTR
0338 14                DEC     A
0339 F0                MOVX    @DPTR,A
033A 900000      R     MOV     DPTR,#DL
033D E0                MOVX    A,@DPTR
033E FF                MOV     R7,A
033F EF                MOV     A,R7
0340 70F2              JNZ     ?C0369
0342 8002              SJMP    ?C0370
0344         ?C0371:
0344 80EE              SJMP    ?C0369
0346         ?C0370:
                                           ; SOURCE LINE # 1385
0346 C2ED              CLR     MCO
                                           ; SOURCE LINE # 1386
0348 E500        R     MOV     A,i1
034A 6407              XRL     A,#07H
034C 6016              JZ      ?C0372
034E 7800        R     MOV     R0,#LOW j
0350 E6                MOV     A,@R0
0351 FF                MOV     R7,A
0352 7400        R     MOV     A,#LOW zbuf
0354 2F                ADD     A,R7
0355 F582              MOV     DPL,A
0357 E4                CLR     A
0358 3400        R     ADDC    A,#HIGH zbuf
035A F583              MOV     DPH,A
035C E0                MOVX    A,@DPTR
035D FF                MOV     R7,A
035E EF                MOV     A,R7
035F 25E0              ADD     A,ACC
0361 FF                MOV     R7,A
0362 EF                MOV     A,R7
0363 F0                MOVX    @DPTR,A
0364         ?C0372:
                                           ; SOURCE LINE # 1387
0364 C2EF              CLR     MDO
                                           ; SOURCE LINE # 1388
0366         ?C0360:
0366 0500        R     INC     i1
0368 8082              SJMP    ?C0358
036A         ?C0359:
                                           ; SOURCE LINE # 1389
036A 900000      R     MOV     DPTR,#DL
036D 7402              MOV     A,#02H
036F F0                MOVX    @DPTR,A
0370         ?C0373:
0370 900000      R     MOV     DPTR,#DL
0373 E0                MOVX    A,@DPTR
0374 14                DEC     A
0375 F0                MOVX    @DPTR,A
0376 900000      R     MOV     DPTR,#DL
0379 E0                MOVX    A,@DPTR
037A FF                MOV     R7,A
037B EF                MOV     A,R7
037C 70F2              JNZ     ?C0373
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 136 

037E 8002              SJMP    ?C0374
0380         ?C0375:
0380 80EE              SJMP    ?C0373
0382         ?C0374:
                                           ; SOURCE LINE # 1390
0382 D2EF              SETB    MDO
0384 C2EE              CLR     MDE
0386 D2ED              SETB    MCO
0388         ?C0376:
0388 30EDFD            JNB     MCO,?C0376
038B 8002              SJMP    ?C0377
038D         ?C0378:
038D 80F9              SJMP    ?C0376
038F         ?C0377:
                                           ; SOURCE LINE # 1391
038F 900000      R     MOV     DPTR,#DL
0392 74C8              MOV     A,#0C8H
0394 F0                MOVX    @DPTR,A
0395         ?C0379:
0395 900000      R     MOV     DPTR,#DL
0398 E0                MOVX    A,@DPTR
0399 14                DEC     A
039A F0                MOVX    @DPTR,A
039B 900000      R     MOV     DPTR,#DL
039E E0                MOVX    A,@DPTR
039F FF                MOV     R7,A
03A0 EF                MOV     A,R7
03A1 7004              JNZ     ?C0382
03A3 7F01              MOV     R7,#01H
03A5 8002              SJMP    ?C0383
03A7         ?C0382:
03A7 7F00              MOV     R7,#00H
03A9         ?C0383:
03A9 20EC04            JB      MDI,?C0384
03AC 7E01              MOV     R6,#01H
03AE 8002              SJMP    ?C0385
03B0         ?C0384:
03B0 7E00              MOV     R6,#00H
03B2         ?C0385:
03B2 EE                MOV     A,R6
03B3 4F                ORL     A,R7
03B4 FF                MOV     R7,A
03B5 EF                MOV     A,R7
03B6 60DD              JZ      ?C0379
03B8 8002              SJMP    ?C0380
03BA         ?C0381:
03BA 80D9              SJMP    ?C0379
03BC         ?C0380:
                                           ; SOURCE LINE # 1392
03BC 900000      R     MOV     DPTR,#DL
03BF E0                MOVX    A,@DPTR
03C0 FF                MOV     R7,A
03C1 EF                MOV     A,R7
03C2 7006              JNZ     ?C0386
03C4 900000      R     MOV     DPTR,#b_err_cl
03C7 E0                MOVX    A,@DPTR
03C8 04                INC     A
03C9 F0                MOVX    @DPTR,A
03CA         ?C0386:
                                           ; SOURCE LINE # 1393
03CA D2EE              SETB    MDE
03CC C2ED              CLR     MCO
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 137 

                                           ; SOURCE LINE # 1394
03CE         ?C0357:
03CE 7800        R     MOV     R0,#LOW j
03D0 06                INC     @R0
03D1 020000      R     LJMP    ?C0355
03D4         ?C0356:
                                           ; SOURCE LINE # 1395
03D4 900000      R     MOV     DPTR,#DL
03D7 7402              MOV     A,#02H
03D9 F0                MOVX    @DPTR,A
03DA         ?C0387:
03DA 900000      R     MOV     DPTR,#DL
03DD E0                MOVX    A,@DPTR
03DE 14                DEC     A
03DF F0                MOVX    @DPTR,A
03E0 900000      R     MOV     DPTR,#DL
03E3 E0                MOVX    A,@DPTR
03E4 FF                MOV     R7,A
03E5 EF                MOV     A,R7
03E6 70F2              JNZ     ?C0387
03E8 8002              SJMP    ?C0388
03EA         ?C0389:
03EA 80EE              SJMP    ?C0387
03EC         ?C0388:
                                           ; SOURCE LINE # 1396
03EC D2ED              SETB    MCO
03EE         ?C0390:
03EE 30EDFD            JNB     MCO,?C0390
03F1 8002              SJMP    ?C0391
03F3         ?C0392:
03F3 80F9              SJMP    ?C0390
03F5         ?C0391:
                                           ; SOURCE LINE # 1397
03F5 900000      R     MOV     DPTR,#DL
03F8 7402              MOV     A,#02H
03FA F0                MOVX    @DPTR,A
03FB         ?C0393:
03FB 900000      R     MOV     DPTR,#DL
03FE E0                MOVX    A,@DPTR
03FF 14                DEC     A
0400 F0                MOVX    @DPTR,A
0401 900000      R     MOV     DPTR,#DL
0404 E0                MOVX    A,@DPTR
0405 FF                MOV     R7,A
0406 EF                MOV     A,R7
0407 70F2              JNZ     ?C0393
0409 8002              SJMP    ?C0394
040B         ?C0395:
040B 80EE              SJMP    ?C0393
040D         ?C0394:
                                           ; SOURCE LINE # 1398
040D D2EF              SETB    MDO
                                           ; SOURCE LINE # 1458
040F 900000      R     MOV     DPTR,#zbuf+05H
0412 7402              MOV     A,#02H
0414 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1459
0415 750002      R     MOV     cmd,#02H
                                           ; SOURCE LINE # 1460
0418 900000      R     MOV     DPTR,#zbuf+02H
041B 7409              MOV     A,#09H
041D F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 138 

                                           ; SOURCE LINE # 1463
041E         ?C0345:
                                           ; SOURCE LINE # 1465
041E 900000      R     MOV     DPTR,#zbuf+05H
0421 E0                MOVX    A,@DPTR
0422 FF                MOV     R7,A
0423 EF                MOV     A,R7
0424 B40204            CJNE    A,#02H,?C0397
0427 7F01              MOV     R7,#01H
0429 8002              SJMP    ?C0398
042B         ?C0397:
042B 7F00              MOV     R7,#00H
042D         ?C0398:
042D E500        R     MOV     A,cmd
042F B40204            CJNE    A,#02H,?C0399
0432 7E01              MOV     R6,#01H
0434 8002              SJMP    ?C0400
0436         ?C0399:
0436 7E00              MOV     R6,#00H
0438         ?C0400:
0438 EE                MOV     A,R6
0439 5F                ANL     A,R7
043A FF                MOV     R7,A
043B 900000      R     MOV     DPTR,#zbuf+02H
043E E0                MOVX    A,@DPTR
043F FE                MOV     R6,A
0440 EE                MOV     A,R6
0441 B40904            CJNE    A,#09H,?C0401
0444 7E01              MOV     R6,#01H
0446 8002              SJMP    ?C0402
0448         ?C0401:
0448 7E00              MOV     R6,#00H
044A         ?C0402:
044A EE                MOV     A,R6
044B 5F                ANL     A,R7
044C FF                MOV     R7,A
044D EF                MOV     A,R7
044E 7003              JNZ     $ + 5H
0450 020000      R     LJMP    ?C0344
                                           ; SOURCE LINE # 1466
                                           ; SOURCE LINE # 1467
0453 900000      R     MOV     DPTR,#tmp_rw
0456 74D0              MOV     A,#0D0H
0458 F0                MOVX    @DPTR,A
0459 C2EF              CLR     MDO
045B 900000      R     MOV     DPTR,#DL
045E 7402              MOV     A,#02H
0460 F0                MOVX    @DPTR,A
0461         ?C0403:
0461 900000      R     MOV     DPTR,#DL
0464 E0                MOVX    A,@DPTR
0465 14                DEC     A
0466 F0                MOVX    @DPTR,A
0467 900000      R     MOV     DPTR,#DL
046A E0                MOVX    A,@DPTR
046B FF                MOV     R7,A
046C EF                MOV     A,R7
046D 70F2              JNZ     ?C0403
046F 8002              SJMP    ?C0404
0471         ?C0405:
0471 80EE              SJMP    ?C0403
0473         ?C0404:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 139 

0473 C2ED              CLR     MCO
                                           ; SOURCE LINE # 1468
0475 7800        R     MOV     R0,#LOW j
0477 7600              MOV     @R0,#00H
0479         ?C0406:
0479 7800        R     MOV     R0,#LOW j
047B E6                MOV     A,@R0
047C FF                MOV     R7,A
047D EF                MOV     A,R7
047E C3                CLR     C
047F 9402              SUBB    A,#02H
0481 4003              JC      $ + 5H
0483 020000      R     LJMP    ?C0407
                                           ; SOURCE LINE # 1469
0486 750000      R     MOV     i1,#00H
0489         ?C0409:
0489 E500        R     MOV     A,i1
048B C3                CLR     C
048C 9408              SUBB    A,#08H
048E 505E              JNC     ?C0410
                                           ; SOURCE LINE # 1470
0490 900000      R     MOV     DPTR,#tmp_rw
0493 E0                MOVX    A,@DPTR
0494 FF                MOV     R7,A
0495 EF                MOV     A,R7
0496 20E704            JB      ACC.7,?C0412
                                           ; SOURCE LINE # 1471
0499 C2EF              CLR     MDO
049B 8002              SJMP    ?C0413
049D         ?C0412:
049D D2EF              SETB    MDO
049F         ?C0413:
                                           ; SOURCE LINE # 1472
049F 900000      R     MOV     DPTR,#DL
04A2 7402              MOV     A,#02H
04A4 F0                MOVX    @DPTR,A
04A5         ?C0414:
04A5 900000      R     MOV     DPTR,#DL
04A8 E0                MOVX    A,@DPTR
04A9 14                DEC     A
04AA F0                MOVX    @DPTR,A
04AB 900000      R     MOV     DPTR,#DL
04AE E0                MOVX    A,@DPTR
04AF FF                MOV     R7,A
04B0 EF                MOV     A,R7
04B1 70F2              JNZ     ?C0414
04B3 8002              SJMP    ?C0415
04B5         ?C0416:
04B5 80EE              SJMP    ?C0414
04B7         ?C0415:
04B7 D2ED              SETB    MCO
04B9         ?C0417:
                                           ; SOURCE LINE # 1473
04B9 30EDFD            JNB     MCO,?C0417
04BC 8002              SJMP    ?C0418
04BE         ?C0419:
04BE 80F9              SJMP    ?C0417
04C0         ?C0418:
                                           ; SOURCE LINE # 1474
04C0 900000      R     MOV     DPTR,#DL
04C3 7402              MOV     A,#02H
04C5 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 140 

04C6         ?C0420:
04C6 900000      R     MOV     DPTR,#DL
04C9 E0                MOVX    A,@DPTR
04CA 14                DEC     A
04CB F0                MOVX    @DPTR,A
04CC 900000      R     MOV     DPTR,#DL
04CF E0                MOVX    A,@DPTR
04D0 FF                MOV     R7,A
04D1 EF                MOV     A,R7
04D2 70F2              JNZ     ?C0420
04D4 8002              SJMP    ?C0421
04D6         ?C0422:
04D6 80EE              SJMP    ?C0420
04D8         ?C0421:
04D8 C2ED              CLR     MCO
04DA C2EF              CLR     MDO
                                           ; SOURCE LINE # 1475
04DC 900000      R     MOV     DPTR,#tmp_rw
04DF E0                MOVX    A,@DPTR
04E0 FF                MOV     R7,A
04E1 EF                MOV     A,R7
04E2 25E0              ADD     A,ACC
04E4 FF                MOV     R7,A
04E5 900000      R     MOV     DPTR,#tmp_rw
04E8 EF                MOV     A,R7
04E9 F0                MOVX    @DPTR,A
04EA         ?C0411:
04EA 0500        R     INC     i1
04EC 809B              SJMP    ?C0409
04EE         ?C0410:
                                           ; SOURCE LINE # 1476
04EE 900000      R     MOV     DPTR,#DL
04F1 7402              MOV     A,#02H
04F3 F0                MOVX    @DPTR,A
04F4         ?C0423:
04F4 900000      R     MOV     DPTR,#DL
04F7 E0                MOVX    A,@DPTR
04F8 14                DEC     A
04F9 F0                MOVX    @DPTR,A
04FA 900000      R     MOV     DPTR,#DL
04FD E0                MOVX    A,@DPTR
04FE FF                MOV     R7,A
04FF EF                MOV     A,R7
0500 70F2              JNZ     ?C0423
0502 8002              SJMP    ?C0424
0504         ?C0425:
0504 80EE              SJMP    ?C0423
0506         ?C0424:
                                           ; SOURCE LINE # 1477
0506 C2EE              CLR     MDE
0508 D2ED              SETB    MCO
050A D2EF              SETB    MDO
050C         ?C0426:
050C 30EDFD            JNB     MCO,?C0426
050F 8002              SJMP    ?C0427
0511         ?C0428:
0511 80F9              SJMP    ?C0426
0513         ?C0427:
                                           ; SOURCE LINE # 1478
0513 900000      R     MOV     DPTR,#DL
0516 74C8              MOV     A,#0C8H
0518 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 141 

0519         ?C0429:
0519 900000      R     MOV     DPTR,#DL
051C E0                MOVX    A,@DPTR
051D 14                DEC     A
051E F0                MOVX    @DPTR,A
051F 900000      R     MOV     DPTR,#DL
0522 E0                MOVX    A,@DPTR
0523 FF                MOV     R7,A
0524 EF                MOV     A,R7
0525 7004              JNZ     ?C0432
0527 7F01              MOV     R7,#01H
0529 8002              SJMP    ?C0433
052B         ?C0432:
052B 7F00              MOV     R7,#00H
052D         ?C0433:
052D 20EC04            JB      MDI,?C0434
0530 7E01              MOV     R6,#01H
0532 8002              SJMP    ?C0435
0534         ?C0434:
0534 7E00              MOV     R6,#00H
0536         ?C0435:
0536 EE                MOV     A,R6
0537 4F                ORL     A,R7
0538 FF                MOV     R7,A
0539 EF                MOV     A,R7
053A 60DD              JZ      ?C0429
053C 8002              SJMP    ?C0430
053E         ?C0431:
053E 80D9              SJMP    ?C0429
0540         ?C0430:
                                           ; SOURCE LINE # 1479
0540 900000      R     MOV     DPTR,#DL
0543 E0                MOVX    A,@DPTR
0544 FF                MOV     R7,A
0545 EF                MOV     A,R7
0546 7006              JNZ     ?C0436
0548 900000      R     MOV     DPTR,#b_err_cl
054B E0                MOVX    A,@DPTR
054C 04                INC     A
054D F0                MOVX    @DPTR,A
054E         ?C0436:
                                           ; SOURCE LINE # 1482
054E D2EE              SETB    MDE
0550 C2ED              CLR     MCO
                                           ; SOURCE LINE # 1483
0552 900000      R     MOV     DPTR,#tmp_rw
0555 E4                CLR     A
0556 F0                MOVX    @DPTR,A
0557         ?C0408:
0557 7800        R     MOV     R0,#LOW j
0559 06                INC     @R0
055A 020000      R     LJMP    ?C0406
055D         ?C0407:
                                           ; SOURCE LINE # 1484
055D 900000      R     MOV     DPTR,#DL
0560 7402              MOV     A,#02H
0562 F0                MOVX    @DPTR,A
0563         ?C0437:
0563 900000      R     MOV     DPTR,#DL
0566 E0                MOVX    A,@DPTR
0567 14                DEC     A
0568 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 142 

0569 900000      R     MOV     DPTR,#DL
056C E0                MOVX    A,@DPTR
056D FF                MOV     R7,A
056E EF                MOV     A,R7
056F 70F2              JNZ     ?C0437
0571 8002              SJMP    ?C0438
0573         ?C0439:
0573 80EE              SJMP    ?C0437
0575         ?C0438:
0575 D2ED              SETB    MCO
0577         ?C0440:
                                           ; SOURCE LINE # 1485
0577 30EDFD            JNB     MCO,?C0440
057A 8002              SJMP    ?C0441
057C         ?C0442:
057C 80F9              SJMP    ?C0440
057E         ?C0441:
                                           ; SOURCE LINE # 1486
057E 900000      R     MOV     DPTR,#DL
0581 7402              MOV     A,#02H
0583 F0                MOVX    @DPTR,A
0584         ?C0443:
0584 900000      R     MOV     DPTR,#DL
0587 E0                MOVX    A,@DPTR
0588 14                DEC     A
0589 F0                MOVX    @DPTR,A
058A 900000      R     MOV     DPTR,#DL
058D E0                MOVX    A,@DPTR
058E FF                MOV     R7,A
058F EF                MOV     A,R7
0590 70F2              JNZ     ?C0443
0592 8002              SJMP    ?C0444
0594         ?C0445:
0594 80EE              SJMP    ?C0443
0596         ?C0444:
                                           ; SOURCE LINE # 1487
0596 D2EF              SETB    MDO
0598 900000      R     MOV     DPTR,#DL
059B 7402              MOV     A,#02H
059D F0                MOVX    @DPTR,A
059E         ?C0446:
059E 900000      R     MOV     DPTR,#DL
05A1 E0                MOVX    A,@DPTR
05A2 14                DEC     A
05A3 F0                MOVX    @DPTR,A
05A4 900000      R     MOV     DPTR,#DL
05A7 E0                MOVX    A,@DPTR
05A8 FF                MOV     R7,A
05A9 EF                MOV     A,R7
05AA 70F2              JNZ     ?C0446
05AC 8002              SJMP    ?C0447
05AE         ?C0448:
05AE 80EE              SJMP    ?C0446
05B0         ?C0447:
                                           ; SOURCE LINE # 1488
05B0 900000      R     MOV     DPTR,#tmp_rw
05B3 74D1              MOV     A,#0D1H
05B5 F0                MOVX    @DPTR,A
05B6 900000      R     MOV     DPTR,#DL
05B9 7402              MOV     A,#02H
05BB F0                MOVX    @DPTR,A
05BC         ?C0449:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 143 

05BC 900000      R     MOV     DPTR,#DL
05BF E0                MOVX    A,@DPTR
05C0 14                DEC     A
05C1 F0                MOVX    @DPTR,A
05C2 900000      R     MOV     DPTR,#DL
05C5 E0                MOVX    A,@DPTR
05C6 FF                MOV     R7,A
05C7 EF                MOV     A,R7
05C8 70F2              JNZ     ?C0449
05CA 8002              SJMP    ?C0450
05CC         ?C0451:
05CC 80EE              SJMP    ?C0449
05CE         ?C0450:
                                           ; SOURCE LINE # 1489
05CE C2EF              CLR     MDO
05D0 900000      R     MOV     DPTR,#DL
05D3 7402              MOV     A,#02H
05D5 F0                MOVX    @DPTR,A
05D6         ?C0452:
05D6 900000      R     MOV     DPTR,#DL
05D9 E0                MOVX    A,@DPTR
05DA 14                DEC     A
05DB F0                MOVX    @DPTR,A
05DC 900000      R     MOV     DPTR,#DL
05DF E0                MOVX    A,@DPTR
05E0 FF                MOV     R7,A
05E1 EF                MOV     A,R7
05E2 70F2              JNZ     ?C0452
05E4 8002              SJMP    ?C0453
05E6         ?C0454:
05E6 80EE              SJMP    ?C0452
05E8         ?C0453:
                                           ; SOURCE LINE # 1490
05E8 C2ED              CLR     MCO
05EA 900000      R     MOV     DPTR,#DL
05ED 7402              MOV     A,#02H
05EF F0                MOVX    @DPTR,A
05F0         ?C0455:
05F0 900000      R     MOV     DPTR,#DL
05F3 E0                MOVX    A,@DPTR
05F4 14                DEC     A
05F5 F0                MOVX    @DPTR,A
05F6 900000      R     MOV     DPTR,#DL
05F9 E0                MOVX    A,@DPTR
05FA FF                MOV     R7,A
05FB EF                MOV     A,R7
05FC 70F2              JNZ     ?C0455
05FE 8002              SJMP    ?C0456
0600         ?C0457:
0600 80EE              SJMP    ?C0455
0602         ?C0456:
                                           ; SOURCE LINE # 1491
0602 750000      R     MOV     i1,#00H
0605         ?C0458:
0605 E500        R     MOV     A,i1
0607 C3                CLR     C
0608 9408              SUBB    A,#08H
060A 505E              JNC     ?C0459
                                           ; SOURCE LINE # 1492
060C 900000      R     MOV     DPTR,#tmp_rw
060F E0                MOVX    A,@DPTR
0610 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 144 

0611 EF                MOV     A,R7
0612 20E704            JB      ACC.7,?C0461
0615 C2EF              CLR     MDO
0617 8002              SJMP    ?C0462
0619         ?C0461:
0619 D2EF              SETB    MDO
061B         ?C0462:
                                           ; SOURCE LINE # 1493
061B 900000      R     MOV     DPTR,#DL
061E 7402              MOV     A,#02H
0620 F0                MOVX    @DPTR,A
0621         ?C0463:
0621 900000      R     MOV     DPTR,#DL
0624 E0                MOVX    A,@DPTR
0625 14                DEC     A
0626 F0                MOVX    @DPTR,A
0627 900000      R     MOV     DPTR,#DL
062A E0                MOVX    A,@DPTR
062B FF                MOV     R7,A
062C EF                MOV     A,R7
062D 70F2              JNZ     ?C0463
062F 8002              SJMP    ?C0464
0631         ?C0465:
0631 80EE              SJMP    ?C0463
0633         ?C0464:
                                           ; SOURCE LINE # 1494
0633 D2ED              SETB    MCO
0635 900000      R     MOV     DPTR,#DL
0638 7402              MOV     A,#02H
063A F0                MOVX    @DPTR,A
063B         ?C0466:
063B 30EDFD            JNB     MCO,?C0466
063E 8002              SJMP    ?C0469
0640         ?C0468:
0640 80F9              SJMP    ?C0466
0642         ?C0467:
0642         ?C0469:
0642 900000      R     MOV     DPTR,#DL
0645 E0                MOVX    A,@DPTR
0646 14                DEC     A
0647 F0                MOVX    @DPTR,A
0648 900000      R     MOV     DPTR,#DL
064B E0                MOVX    A,@DPTR
064C FF                MOV     R7,A
064D EF                MOV     A,R7
064E 70F2              JNZ     ?C0469
0650 8002              SJMP    ?C0470
0652         ?C0471:
0652 80EE              SJMP    ?C0469
0654         ?C0470:
0654 C2ED              CLR     MCO
0656 C2EF              CLR     MDO
                                           ; SOURCE LINE # 1495
0658 900000      R     MOV     DPTR,#tmp_rw
065B E0                MOVX    A,@DPTR
065C FF                MOV     R7,A
065D EF                MOV     A,R7
065E 25E0              ADD     A,ACC
0660 FF                MOV     R7,A
0661 900000      R     MOV     DPTR,#tmp_rw
0664 EF                MOV     A,R7
0665 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 145 

0666         ?C0460:
0666 0500        R     INC     i1
0668 809B              SJMP    ?C0458
066A         ?C0459:
                                           ; SOURCE LINE # 1496
066A 900000      R     MOV     DPTR,#DL
066D 7402              MOV     A,#02H
066F F0                MOVX    @DPTR,A
0670         ?C0472:
0670 900000      R     MOV     DPTR,#DL
0673 E0                MOVX    A,@DPTR
0674 14                DEC     A
0675 F0                MOVX    @DPTR,A
0676 900000      R     MOV     DPTR,#DL
0679 E0                MOVX    A,@DPTR
067A FF                MOV     R7,A
067B EF                MOV     A,R7
067C 70F2              JNZ     ?C0472
067E 8002              SJMP    ?C0473
0680         ?C0474:
0680 80EE              SJMP    ?C0472
0682         ?C0473:
                                           ; SOURCE LINE # 1497
0682 C2EE              CLR     MDE
0684 D2EF              SETB    MDO
0686 D2ED              SETB    MCO
0688 900000      R     MOV     DPTR,#DL
068B 7402              MOV     A,#02H
068D F0                MOVX    @DPTR,A
068E         ?C0475:
068E 30EDFD            JNB     MCO,?C0475
0691 8002              SJMP    ?C0478
0693         ?C0477:
0693 80F9              SJMP    ?C0475
0695         ?C0476:
0695         ?C0478:
0695 900000      R     MOV     DPTR,#DL
0698 E0                MOVX    A,@DPTR
0699 14                DEC     A
069A F0                MOVX    @DPTR,A
069B 900000      R     MOV     DPTR,#DL
069E E0                MOVX    A,@DPTR
069F FF                MOV     R7,A
06A0 EF                MOV     A,R7
06A1 70F2              JNZ     ?C0478
06A3 8002              SJMP    ?C0479
06A5         ?C0480:
06A5 80EE              SJMP    ?C0478
06A7         ?C0479:
                                           ; SOURCE LINE # 1498
06A7 900000      R     MOV     DPTR,#DL
06AA 74C8              MOV     A,#0C8H
06AC F0                MOVX    @DPTR,A
06AD         ?C0481:
06AD 900000      R     MOV     DPTR,#DL
06B0 E0                MOVX    A,@DPTR
06B1 14                DEC     A
06B2 F0                MOVX    @DPTR,A
06B3 900000      R     MOV     DPTR,#DL
06B6 E0                MOVX    A,@DPTR
06B7 FF                MOV     R7,A
06B8 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 146 

06B9 7004              JNZ     ?C0484
06BB 7F01              MOV     R7,#01H
06BD 8002              SJMP    ?C0485
06BF         ?C0484:
06BF 7F00              MOV     R7,#00H
06C1         ?C0485:
06C1 20EC04            JB      MDI,?C0486
06C4 7E01              MOV     R6,#01H
06C6 8002              SJMP    ?C0487
06C8         ?C0486:
06C8 7E00              MOV     R6,#00H
06CA         ?C0487:
06CA EE                MOV     A,R6
06CB 4F                ORL     A,R7
06CC FF                MOV     R7,A
06CD EF                MOV     A,R7
06CE 60DD              JZ      ?C0481
06D0 8002              SJMP    ?C0482
06D2         ?C0483:
06D2 80D9              SJMP    ?C0481
06D4         ?C0482:
                                           ; SOURCE LINE # 1499
06D4 900000      R     MOV     DPTR,#DL
06D7 E0                MOVX    A,@DPTR
06D8 FF                MOV     R7,A
06D9 EF                MOV     A,R7
06DA 7006              JNZ     ?C0488
06DC 900000      R     MOV     DPTR,#b_err_cl
06DF E0                MOVX    A,@DPTR
06E0 04                INC     A
06E1 F0                MOVX    @DPTR,A
06E2         ?C0488:
                                           ; SOURCE LINE # 1502
06E2 D2EE              SETB    MDE
06E4 C2ED              CLR     MCO
06E6 900000      R     MOV     DPTR,#DL
06E9 7402              MOV     A,#02H
06EB F0                MOVX    @DPTR,A
06EC         ?C0489:
06EC 900000      R     MOV     DPTR,#DL
06EF E0                MOVX    A,@DPTR
06F0 14                DEC     A
06F1 F0                MOVX    @DPTR,A
06F2 900000      R     MOV     DPTR,#DL
06F5 E0                MOVX    A,@DPTR
06F6 FF                MOV     R7,A
06F7 EF                MOV     A,R7
06F8 70F2              JNZ     ?C0489
06FA 8002              SJMP    ?C0490
06FC         ?C0491:
06FC 80EE              SJMP    ?C0489
06FE         ?C0490:
                                           ; SOURCE LINE # 1503
06FE 7800        R     MOV     R0,#LOW j
0700 7600              MOV     @R0,#00H
0702         ?C0492:
0702 7800        R     MOV     R0,#LOW j
0704 E6                MOV     A,@R0
0705 FF                MOV     R7,A
0706 EF                MOV     A,R7
0707 C3                CLR     C
0708 9408              SUBB    A,#08H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 147 

070A 4003              JC      $ + 5H
070C 020000      R     LJMP    ?C0493
                                           ; SOURCE LINE # 1504
070F 750000      R     MOV     i1,#00H
0712         ?C0495:
0712 E500        R     MOV     A,i1
0714 C3                CLR     C
0715 9408              SUBB    A,#08H
0717 4003              JC      $ + 5H
0719 020000      R     LJMP    ?C0496
071C D2EF              SETB    MDO
071E C2EE              CLR     MDE
0720 D2ED              SETB    MCO
0722         ?C0498:
0722 30EDFD            JNB     MCO,?C0498
0725 8002              SJMP    ?C0499
0727         ?C0500:
0727 80F9              SJMP    ?C0498
0729         ?C0499:
0729 900000      R     MOV     DPTR,#DL
072C 7402              MOV     A,#02H
072E F0                MOVX    @DPTR,A
072F         ?C0501:
072F 900000      R     MOV     DPTR,#DL
0732 E0                MOVX    A,@DPTR
0733 14                DEC     A
0734 F0                MOVX    @DPTR,A
0735 900000      R     MOV     DPTR,#DL
0738 E0                MOVX    A,@DPTR
0739 FF                MOV     R7,A
073A EF                MOV     A,R7
073B 70F2              JNZ     ?C0501
073D 8002              SJMP    ?C0502
073F         ?C0503:
073F 80EE              SJMP    ?C0501
0741         ?C0502:
                                           ; SOURCE LINE # 1505
0741 20EC2E            JB      MDI,?C0504
                                           ; SOURCE LINE # 1506
0744 7800        R     MOV     R0,#LOW j
0746 E6                MOV     A,@R0
0747 FF                MOV     R7,A
0748 7449              MOV     A,#LOW bufout+09H
074A 2F                ADD     A,R7
074B F582              MOV     DPL,A
074D E4                CLR     A
074E 3400              ADDC    A,#HIGH bufout+09H
0750 F583              MOV     DPH,A
0752 E0                MOVX    A,@DPTR
0753 FF                MOV     R7,A
0754 EF                MOV     A,R7
0755 25E0              ADD     A,ACC
0757 FF                MOV     R7,A
0758 EF                MOV     A,R7
0759 F0                MOVX    @DPTR,A
075A 7800        R     MOV     R0,#LOW j
075C E6                MOV     A,@R0
075D FF                MOV     R7,A
075E 7449              MOV     A,#LOW bufout+09H
0760 2F                ADD     A,R7
0761 F582              MOV     DPL,A
0763 E4                CLR     A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 148 

0764 3400              ADDC    A,#HIGH bufout+09H
0766 F583              MOV     DPH,A
0768 E0                MOVX    A,@DPTR
0769 FF                MOV     R7,A
076A EF                MOV     A,R7
076B 54FE              ANL     A,#0FEH
076D FF                MOV     R7,A
076E EF                MOV     A,R7
076F F0                MOVX    @DPTR,A
0770 802C              SJMP    ?C0505
0772         ?C0504:
                                           ; SOURCE LINE # 1508
0772 7800        R     MOV     R0,#LOW j
0774 E6                MOV     A,@R0
0775 FF                MOV     R7,A
0776 7449              MOV     A,#LOW bufout+09H
0778 2F                ADD     A,R7
0779 F582              MOV     DPL,A
077B E4                CLR     A
077C 3400              ADDC    A,#HIGH bufout+09H
077E F583              MOV     DPH,A
0780 E0                MOVX    A,@DPTR
0781 FF                MOV     R7,A
0782 EF                MOV     A,R7
0783 25E0              ADD     A,ACC
0785 FF                MOV     R7,A
0786 EF                MOV     A,R7
0787 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1509
0788 7800        R     MOV     R0,#LOW j
078A E6                MOV     A,@R0
078B FF                MOV     R7,A
078C 7449              MOV     A,#LOW bufout+09H
078E 2F                ADD     A,R7
078F F582              MOV     DPL,A
0791 E4                CLR     A
0792 3400              ADDC    A,#HIGH bufout+09H
0794 F583              MOV     DPH,A
0796 E0                MOVX    A,@DPTR
0797 FF                MOV     R7,A
0798 EF                MOV     A,R7
0799 4401              ORL     A,#01H
079B FF                MOV     R7,A
079C EF                MOV     A,R7
079D F0                MOVX    @DPTR,A
079E         ?C0505:
                                           ; SOURCE LINE # 1510
079E C2ED              CLR     MCO
07A0 900000      R     MOV     DPTR,#DL
07A3 7402              MOV     A,#02H
07A5 F0                MOVX    @DPTR,A
07A6         ?C0506:
07A6 900000      R     MOV     DPTR,#DL
07A9 E0                MOVX    A,@DPTR
07AA 14                DEC     A
07AB F0                MOVX    @DPTR,A
07AC 900000      R     MOV     DPTR,#DL
07AF E0                MOVX    A,@DPTR
07B0 FF                MOV     R7,A
07B1 EF                MOV     A,R7
07B2 70F2              JNZ     ?C0506
07B4 8002              SJMP    ?C0497
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 149 

07B6         ?C0508:
07B6 80EE              SJMP    ?C0506
07B8         ?C0507:
07B8         ?C0497:
07B8 0500        R     INC     i1
07BA 020000      R     LJMP    ?C0495
07BD         ?C0496:
                                           ; SOURCE LINE # 1511
07BD C2EF              CLR     MDO
                                           ; SOURCE LINE # 1512
07BF 7800        R     MOV     R0,#LOW j
07C1 E6                MOV     A,@R0
07C2 FF                MOV     R7,A
07C3 EF                MOV     A,R7
07C4 B40702            CJNE    A,#07H,?C0509
07C7 D2EF              SETB    MDO
07C9         ?C0509:
                                           ; SOURCE LINE # 1513
07C9 D2EE              SETB    MDE
                                           ; SOURCE LINE # 1514
07CB D2ED              SETB    MCO
07CD         ?C0510:
07CD 30EDFD            JNB     MCO,?C0510
07D0 8002              SJMP    ?C0511
07D2         ?C0512:
07D2 80F9              SJMP    ?C0510
07D4         ?C0511:
                                           ; SOURCE LINE # 1515
07D4 900000      R     MOV     DPTR,#DL
07D7 7402              MOV     A,#02H
07D9 F0                MOVX    @DPTR,A
07DA         ?C0513:
07DA 900000      R     MOV     DPTR,#DL
07DD E0                MOVX    A,@DPTR
07DE 14                DEC     A
07DF F0                MOVX    @DPTR,A
07E0 900000      R     MOV     DPTR,#DL
07E3 E0                MOVX    A,@DPTR
07E4 FF                MOV     R7,A
07E5 EF                MOV     A,R7
07E6 70F2              JNZ     ?C0513
07E8 8002              SJMP    ?C0514
07EA         ?C0515:
07EA 80EE              SJMP    ?C0513
07EC         ?C0514:
                                           ; SOURCE LINE # 1516
07EC C2ED              CLR     MCO
07EE C2EE              CLR     MDE
07F0 900000      R     MOV     DPTR,#DL
07F3 7402              MOV     A,#02H
07F5 F0                MOVX    @DPTR,A
07F6         ?C0516:
07F6 900000      R     MOV     DPTR,#DL
07F9 E0                MOVX    A,@DPTR
07FA 14                DEC     A
07FB F0                MOVX    @DPTR,A
07FC 900000      R     MOV     DPTR,#DL
07FF E0                MOVX    A,@DPTR
0800 FF                MOV     R7,A
0801 EF                MOV     A,R7
0802 70F2              JNZ     ?C0516
0804 8002              SJMP    ?C0494
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 150 

0806         ?C0518:
0806 80EE              SJMP    ?C0516
0808         ?C0517:
0808         ?C0494:
0808 7800        R     MOV     R0,#LOW j
080A 06                INC     @R0
080B 020000      R     LJMP    ?C0492
080E         ?C0493:
                                           ; SOURCE LINE # 1517
080E D2EE              SETB    MDE
0810 900000      R     MOV     DPTR,#DL
0813 7402              MOV     A,#02H
0815 F0                MOVX    @DPTR,A
0816         ?C0519:
0816 900000      R     MOV     DPTR,#DL
0819 E0                MOVX    A,@DPTR
081A 14                DEC     A
081B F0                MOVX    @DPTR,A
081C 900000      R     MOV     DPTR,#DL
081F E0                MOVX    A,@DPTR
0820 FF                MOV     R7,A
0821 EF                MOV     A,R7
0822 70F2              JNZ     ?C0519
0824 8002              SJMP    ?C0520
0826         ?C0521:
0826 80EE              SJMP    ?C0519
0828         ?C0520:
                                           ; SOURCE LINE # 1518
0828 C2EF              CLR     MDO
082A 900000      R     MOV     DPTR,#DL
082D 7402              MOV     A,#02H
082F F0                MOVX    @DPTR,A
0830         ?C0522:
0830 900000      R     MOV     DPTR,#DL
0833 E0                MOVX    A,@DPTR
0834 14                DEC     A
0835 F0                MOVX    @DPTR,A
0836 900000      R     MOV     DPTR,#DL
0839 E0                MOVX    A,@DPTR
083A FF                MOV     R7,A
083B EF                MOV     A,R7
083C 70F2              JNZ     ?C0522
083E 8002              SJMP    ?C0523
0840         ?C0524:
0840 80EE              SJMP    ?C0522
0842         ?C0523:
                                           ; SOURCE LINE # 1519
0842 D2ED              SETB    MCO
0844         ?C0525:
0844 30EDFD            JNB     MCO,?C0525
0847 8002              SJMP    ?C0526
0849         ?C0527:
0849 80F9              SJMP    ?C0525
084B         ?C0526:
084B 900000      R     MOV     DPTR,#DL
084E 7402              MOV     A,#02H
0850 F0                MOVX    @DPTR,A
0851         ?C0528:
0851 900000      R     MOV     DPTR,#DL
0854 E0                MOVX    A,@DPTR
0855 14                DEC     A
0856 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 151 

0857 900000      R     MOV     DPTR,#DL
085A E0                MOVX    A,@DPTR
085B FF                MOV     R7,A
085C EF                MOV     A,R7
085D 70F2              JNZ     ?C0528
085F 8002              SJMP    ?C0529
0861         ?C0530:
0861 80EE              SJMP    ?C0528
0863         ?C0529:
0863 D2EF              SETB    MDO
                                           ; SOURCE LINE # 1528
0865 900000      R     MOV     DPTR,#zbuf+06H
0868 E0                MOVX    A,@DPTR
0869 FF                MOV     R7,A
086A 900046            MOV     DPTR,#bufout+06H
086D EF                MOV     A,R7
086E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1529
086F 900000      R     MOV     DPTR,#zbuf+07H
0872 E0                MOVX    A,@DPTR
0873 FF                MOV     R7,A
0874 900047            MOV     DPTR,#bufout+07H
0877 EF                MOV     A,R7
0878 F0                MOVX    @DPTR,A
0879 900000      R     MOV     DPTR,#zbuf+08H
087C E0                MOVX    A,@DPTR
087D FF                MOV     R7,A
087E 900048            MOV     DPTR,#bufout+08H
0881 EF                MOV     A,R7
0882 F0                MOVX    @DPTR,A
0883 900045            MOV     DPTR,#bufout+05H
0886 7411              MOV     A,#011H
0888 F0                MOVX    @DPTR,A
0889 900000      R     MOV     DPTR,#zbuf+05H
088C 740A              MOV     A,#0AH
088E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1535
088F D2B6              SETB    WR
                                           ; SOURCE LINE # 1536
0891 7800        R     MOV     R0,#LOW TM_LINE
0893 E6                MOV     A,@R0
0894 FF                MOV     R7,A
0895 7800        R     MOV     R0,#LOW TM_LINE
0897 E6                MOV     A,@R0
0898 FE                MOV     R6,A
0899 EE                MOV     A,R6
089A 2F                ADD     A,R7
089B FF                MOV     R7,A
089C 7800        R     MOV     R0,#LOW tmo
089E EF                MOV     A,R7
089F F6                MOV     @R0,A
                                           ; SOURCE LINE # 1537
08A0 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 1538
08A3         ?C0396:
                                           ; SOURCE LINE # 1540
08A3         ?C0344:
                                           ; SOURCE LINE # 1680
08A3 900000      R     MOV     DPTR,#zbuf+05H
08A6 E0                MOVX    A,@DPTR
08A7 FF                MOV     R7,A
08A8 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 152 

08A9 2406              ADD     A,#06H
08AB F500        R     MOV     len_o,A
                                           ; SOURCE LINE # 1681
08AD E500        R     MOV     A,len_o
08AF 04                INC     A
08B0 FF                MOV     R7,A
08B1 900042            MOV     DPTR,#bufout+02H
08B4 EF                MOV     A,R7
08B5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1696
08B6         ?C0531:
08B6 22                RET     
             ; FUNCTION kmd (END)

             ; FUNCTION main (BEGIN)
0000 C0D0              PUSH    PSW
0002 75D000            MOV     PSW,#00H
                                           ; SOURCE LINE # 1702
                                           ; SOURCE LINE # 1704
0005 900000      R     MOV     DPTR,#fl_kal
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#kol_cik
000D E4                CLR     A
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1706
000F C2AC              CLR     ES
                                           ; SOURCE LINE # 1707
0011 C28E              CLR     TR1
                                           ; SOURCE LINE # 1708
0013 C2AF              CLR     EA
                                           ; SOURCE LINE # 1711
0015 7580FF            MOV     P0,#0FFH
                                           ; SOURCE LINE # 1712
0018 75A040            MOV     P2,#040H
                                           ; SOURCE LINE # 1713
001B 750000      E     MOV     DAC_PRIN,#00H
001E 750000      E     MOV     DAC_PRIN+01H,#00H
                                           ; SOURCE LINE # 1716
0021 75AF81            MOV     CFG848,#081H
0024         ?C0532:
                                           ; SOURCE LINE # 1718
0024 20B208            JB      int0,?C0533
                                           ; SOURCE LINE # 1719
0027 750000      R     MOV     kol_c,#00H
002A 750000      R     MOV     kol_c+01H,#00H
                                           ; SOURCE LINE # 1720
002D 80F5              SJMP    ?C0532
002F         ?C0533:
                                           ; SOURCE LINE # 1722
002F 75A800            MOV     IE,#00H
                                           ; SOURCE LINE # 1723
0032 75B808            MOV     IP,#08H
                                           ; SOURCE LINE # 1725
0035 C2AF              CLR     EA
                                           ; SOURCE LINE # 1727
0037 30C209            JNB     WDS,?C0534
                                           ; SOURCE LINE # 1728
                                           ; SOURCE LINE # 1729
003A C2AF              CLR     EA
                                           ; SOURCE LINE # 1730
003C D2C0              SETB    WDWR
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 153 

                                           ; SOURCE LINE # 1731
003E 75C010            MOV     WDCON,#010H
                                           ; SOURCE LINE # 1732
0041 C2C2              CLR     WDS
                                           ; SOURCE LINE # 1734
0043         ?C0534:
                                           ; SOURCE LINE # 1737
0043 C2A4              CLR     svet
                                           ; SOURCE LINE # 1738
0045 7800        R     MOV     R0,#LOW rasx1_t
0047 120000      E     LCALL   ?C?LSTKIDATA
004A 00                DB      00H
004B 00                DB      00H
004C 00                DB      00H
004D 00                DB      00H
                                           ; SOURCE LINE # 1739
004E 7800        R     MOV     R0,#LOW rasx2_t
0050 120000      E     LCALL   ?C?LSTKIDATA
0053 00                DB      00H
0054 00                DB      00H
0055 00                DB      00H
0056 00                DB      00H
                                           ; SOURCE LINE # 1740
0057 7800        R     MOV     R0,#LOW rasx1
0059 120000      E     LCALL   ?C?LSTKIDATA
005C 00                DB      00H
005D 00                DB      00H
005E 00                DB      00H
005F 00                DB      00H
                                           ; SOURCE LINE # 1741
0060 7800        R     MOV     R0,#LOW rasx2
0062 120000      E     LCALL   ?C?LSTKIDATA
0065 00                DB      00H
0066 00                DB      00H
0067 00                DB      00H
0068 00                DB      00H
                                           ; SOURCE LINE # 1742
0069 C200        R     CLR     fl_m1
                                           ; SOURCE LINE # 1743
006B C200        R     CLR     fl_m2
                                           ; SOURCE LINE # 1744
006D 750000      R     MOV     cop_imp1,#00H
0070 750000      R     MOV     cop_imp1+01H,#00H
                                           ; SOURCE LINE # 1745
0073 750000      R     MOV     cop_imp2,#00H
0076 750000      R     MOV     cop_imp2+01H,#00H
                                           ; SOURCE LINE # 1746
0079 750000      R     MOV     copy_p,#00H
007C 7500FF      R     MOV     copy_p+01H,#0FFH
                                           ; SOURCE LINE # 1747
007F 750000      R     MOV     copy_p1,#00H
0082 750000      R     MOV     copy_p1+01H,#00H
                                           ; SOURCE LINE # 1748
0085 750000      R     MOV     bufcht1,#00H
0088 750000      R     MOV     bufcht1+01H,#00H
                                           ; SOURCE LINE # 1749
008B 750000      R     MOV     bufcht1+02H,#00H
008E 750000      R     MOV     bufcht1+03H,#00H
                                           ; SOURCE LINE # 1750
0091 C200        R     CLR     FL_BLOK_EPROM
                                           ; SOURCE LINE # 1751
0093 C200        R     CLR     FCNT_SEC_V1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 154 

                                           ; SOURCE LINE # 1752
0095 C200        R     CLR     FCNT_SEC_V2
                                           ; SOURCE LINE # 1753
0097 C200        R     CLR     fcnt
                                           ; SOURCE LINE # 1754
0099 7800        R     MOV     R0,#LOW CNT_SEC_V2
009B 7600              MOV     @R0,#00H
009D 08                INC     R0
009E 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1755
00A0 7800        R     MOV     R0,#LOW CNT_SEC_V1
00A2 7600              MOV     @R0,#00H
00A4 08                INC     R0
00A5 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1756
00A7 7800        R     MOV     R0,#LOW CNT_SEC
00A9 7600              MOV     @R0,#00H
00AB 08                INC     R0
00AC 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1757
00AE 750000      R     MOV     kol_c,#00H
00B1 750000      R     MOV     kol_c+01H,#00H
                                           ; SOURCE LINE # 1758
00B4 900000      R     MOV     DPTR,#par
00B7 E4                CLR     A
00B8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1759
00B9 750000      R     MOV     st_ser,#00H
                                           ; SOURCE LINE # 1760
00BC C200        R     CLR     fl_buf
                                           ; SOURCE LINE # 1761
00BE D200        R     SETB    fl_ds
                                           ; SOURCE LINE # 1762
00C0 900000      R     MOV     DPTR,#BUF_FP_100_0
00C3 E4                CLR     A
00C4 F0                MOVX    @DPTR,A
00C5 A3                INC     DPTR
00C6 E4                CLR     A
00C7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1764
00C8 7800        R     MOV     R0,#LOW nro
00CA 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 1765
00CC C2B6              CLR     WR
                                           ; SOURCE LINE # 1768
00CE 120000      E     LCALL   setup
                                           ; SOURCE LINE # 1770
00D1 75C700            MOV     EADRH,#00H
00D4 75C607            MOV     EADRL,#07H
00D7 75B901            MOV     ECON,#01H
00DA 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1772
00DD 7800        R     MOV     R0,#LOW TM_LINE
00DF A6BD              MOV     @R0,EDATA2
                                           ; SOURCE LINE # 1773
00E1 7800        R     MOV     R0,#LOW TM_LINE
00E3 E6                MOV     A,@R0
00E4 FF                MOV     R7,A
00E5 EF                MOV     A,R7
00E6 D3                SETB    C
00E7 943F              SUBB    A,#03FH
00E9 4004              JC      ?C0535
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 155 

                                           ; SOURCE LINE # 1774
00EB 7800        R     MOV     R0,#LOW TM_LINE
00ED 763F              MOV     @R0,#03FH
00EF         ?C0535:
                                           ; SOURCE LINE # 1776
00EF 7800        R     MOV     R0,#LOW TM_LINE
00F1 E6                MOV     A,@R0
00F2 FF                MOV     R7,A
00F3 7800        R     MOV     R0,#LOW TM_LINE
00F5 EF                MOV     A,R7
00F6 26                ADD     A,@R0
00F7 F6                MOV     @R0,A
                                           ; SOURCE LINE # 1778
00F8 7800        R     MOV     R0,#LOW TM_LINE
00FA E6                MOV     A,@R0
00FB FF                MOV     R7,A
00FC EF                MOV     A,R7
00FD 7004              JNZ     ?C0536
                                           ; SOURCE LINE # 1779
00FF 7800        R     MOV     R0,#LOW TM_LINE
0101 7601              MOV     @R0,#01H
0103         ?C0536:
                                           ; SOURCE LINE # 1781
0103 E5BF              MOV     A,EDATA4
0105 B4CC05            CJNE    A,#0CCH,?C0537
                                           ; SOURCE LINE # 1782
0108 85BF00      R     MOV     r_crc,EDATA4
010B 8003              SJMP    ?C0538
010D         ?C0537:
                                           ; SOURCE LINE # 1784
010D 7500FF      R     MOV     r_crc,#0FFH
0110         ?C0538:
                                           ; SOURCE LINE # 1788
0110 E5BC              MOV     A,EDATA1
0112 B46408            CJNE    A,#064H,?C0539
                                           ; SOURCE LINE # 1789
                                           ; SOURCE LINE # 1790
0115 750001      R     MOV     nas1,#01H
0118 750001      R     MOV     nas2,#01H
                                           ; SOURCE LINE # 1791
011B 8006              SJMP    ?C0540
011D         ?C0539:
                                           ; SOURCE LINE # 1793
011D 7500FF      R     MOV     nas1,#0FFH
0120 7500FF      R     MOV     nas2,#0FFH
                                           ; SOURCE LINE # 1794
0123         ?C0540:
                                           ; SOURCE LINE # 1796
0123 75C700            MOV     EADRH,#00H
0126 75C606            MOV     EADRL,#06H
0129 75B901            MOV     ECON,#01H
012C 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1797
012F 85BC00      R     MOV     lineadd,EDATA1
                                           ; SOURCE LINE # 1798
0132 E500        R     MOV     A,lineadd
0134 B4FF06            CJNE    A,#0FFH,?C0541
                                           ; SOURCE LINE # 1799
0137 75003F      R     MOV     lineadd,#03FH
                                           ; SOURCE LINE # 1800
013A 750001      R     MOV     lineadd,#01H
                                           ; SOURCE LINE # 1801
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 156 

013D         ?C0541:
                                           ; SOURCE LINE # 1805
013D C200        R     CLR     aktiv
                                           ; SOURCE LINE # 1806
013F E5BE              MOV     A,EDATA3
0141 7002              JNZ     ?C0542
                                           ; SOURCE LINE # 1807
0143 D200        R     SETB    aktiv
0145         ?C0542:
                                           ; SOURCE LINE # 1818
0145 C200        R     CLR     v_rgr
                                           ; SOURCE LINE # 1819
0147 E5BF              MOV     A,EDATA4
0149 B40402            CJNE    A,#04H,?C0543
                                           ; SOURCE LINE # 1820
014C D200        R     SETB    v_rgr
014E         ?C0543:
                                           ; SOURCE LINE # 1823
014E 75C700            MOV     EADRH,#00H
0151 75C614            MOV     EADRL,#014H
0154 75B901            MOV     ECON,#01H
0157 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1825
015A 900000      R     MOV     DPTR,#POR_R1_ON
015D E5BC              MOV     A,EDATA1
015F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1826
0160 900000      R     MOV     DPTR,#POR_R1_OFF
0163 E5BD              MOV     A,EDATA2
0165 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1827
0166 900000      R     MOV     DPTR,#POR_R1_OFF
0169 E0                MOVX    A,@DPTR
016A FF                MOV     R7,A
016B 900000      R     MOV     DPTR,#POR_R1_ON
016E E0                MOVX    A,@DPTR
016F FE                MOV     R6,A
0170 EE                MOV     A,R6
0171 C3                CLR     C
0172 9F                SUBB    A,R7
0173 400C              JC      ?C0544
                                           ; SOURCE LINE # 1828
0175 900000      R     MOV     DPTR,#POR_R1_OFF
0178 740A              MOV     A,#0AH
017A F0                MOVX    @DPTR,A
017B 900000      R     MOV     DPTR,#POR_R1_ON
017E 7403              MOV     A,#03H
0180 F0                MOVX    @DPTR,A
0181         ?C0544:
                                           ; SOURCE LINE # 1831
0181 900000      R     MOV     DPTR,#POR_R2_ON
0184 E5BE              MOV     A,EDATA3
0186 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1832
0187 900000      R     MOV     DPTR,#POR_R2_OFF
018A E5BF              MOV     A,EDATA4
018C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1833
018D 900000      R     MOV     DPTR,#POR_R2_OFF
0190 E0                MOVX    A,@DPTR
0191 FF                MOV     R7,A
0192 900000      R     MOV     DPTR,#POR_R2_ON
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 157 

0195 E0                MOVX    A,@DPTR
0196 FE                MOV     R6,A
0197 EE                MOV     A,R6
0198 C3                CLR     C
0199 9F                SUBB    A,R7
019A 400C              JC      ?C0545
                                           ; SOURCE LINE # 1834
019C 900000      R     MOV     DPTR,#POR_R2_OFF
019F 740A              MOV     A,#0AH
01A1 F0                MOVX    @DPTR,A
01A2 900000      R     MOV     DPTR,#POR_R2_ON
01A5 7403              MOV     A,#03H
01A7 F0                MOVX    @DPTR,A
01A8         ?C0545:
                                           ; SOURCE LINE # 1838
01A8 75C700            MOV     EADRH,#00H
01AB 75C680            MOV     EADRL,#080H
01AE 75B901            MOV     ECON,#01H
01B1 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1840
01B4 900000      R     MOV     DPTR,#paket_BO
01B7 E5BC              MOV     A,EDATA1
01B9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1842
01BA 900000      R     MOV     DPTR,#paket_BO
01BD E0                MOVX    A,@DPTR
01BE FF                MOV     R7,A
01BF EF                MOV     A,R7
01C0 64FF              XRL     A,#0FFH
01C2 7003              JNZ     $ + 5H
01C4 020000      R     LJMP    ?C0546
                                           ; SOURCE LINE # 1843
                                           ; SOURCE LINE # 1844
01C7 900000      R     MOV     DPTR,#off
01CA E4                CLR     A
01CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1845
01CC 900000      R     MOV     DPTR,#paket_BO
01CF E0                MOVX    A,@DPTR
01D0 FF                MOV     R7,A
01D1 7800        R     MOV     R0,#LOW lineadd_dop
01D3 EF                MOV     A,R7
01D4 F6                MOV     @R0,A
                                           ; SOURCE LINE # 1847
01D5 900000      R     MOV     DPTR,#off
01D8 7401              MOV     A,#01H
01DA F0                MOVX    @DPTR,A
01DB         ?C0547:
01DB 900000      R     MOV     DPTR,#off
01DE E0                MOVX    A,@DPTR
01DF FF                MOV     R7,A
01E0 EF                MOV     A,R7
01E1 C3                CLR     C
01E2 940D              SUBB    A,#0DH
01E4 4003              JC      $ + 5H
01E6 020000      R     LJMP    ?C0546
                                           ; SOURCE LINE # 1848
                                           ; SOURCE LINE # 1849
01E9 900000      R     MOV     DPTR,#off
01EC E0                MOVX    A,@DPTR
01ED FF                MOV     R7,A
01EE 7E10              MOV     R6,#010H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 158 

01F0 EF                MOV     A,R7
01F1 8EF0              MOV     B,R6
01F3 A4                MUL     AB
01F4 FF                MOV     R7,A
01F5 AEF0              MOV     R6,B
01F7 EF                MOV     A,R7
01F8 2400              ADD     A,#00H
01FA FF                MOV     R7,A
01FB EE                MOV     A,R6
01FC 3402              ADDC    A,#02H
01FE FE                MOV     R6,A
01FF EF                MOV     A,R7
0200 7802              MOV     R0,#02H
0202         ?C0769:
0202 CE                XCH     A,R6
0203 C3                CLR     C
0204 13                RRC     A
0205 CE                XCH     A,R6
0206 13                RRC     A
0207 D8F9              DJNZ    R0,?C0769
0209 FF                MOV     R7,A
020A EE                MOV     A,R6
020B FF                MOV     R7,A
020C 7E00              MOV     R6,#00H
020E EF                MOV     A,R7
020F 5403              ANL     A,#03H
0211 F5C7              MOV     EADRH,A
0213 900000      R     MOV     DPTR,#off
0216 E0                MOVX    A,@DPTR
0217 FF                MOV     R7,A
0218 7E10              MOV     R6,#010H
021A EF                MOV     A,R7
021B 8EF0              MOV     B,R6
021D A4                MUL     AB
021E FF                MOV     R7,A
021F AEF0              MOV     R6,B
0221 EF                MOV     A,R7
0222 2400              ADD     A,#00H
0224 FF                MOV     R7,A
0225 EE                MOV     A,R6
0226 3402              ADDC    A,#02H
0228 FE                MOV     R6,A
0229 EF                MOV     A,R7
022A 7802              MOV     R0,#02H
022C         ?C0770:
022C CE                XCH     A,R6
022D C3                CLR     C
022E 13                RRC     A
022F CE                XCH     A,R6
0230 13                RRC     A
0231 D8F9              DJNZ    R0,?C0770
0233 FF                MOV     R7,A
0234 8FC6              MOV     EADRL,R7
0236 75B901            MOV     ECON,#01H
0239 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1850
023C AFBC              MOV     R7,EDATA1
023E EF                MOV     A,R7
023F 120000      E     LCALL   ?C?CCASE
0242 0000        R     DW      ?C0551
0244 01                DB      01H
0245 0000        R     DW      ?C0552
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 159 

0247 02                DB      02H
0248 0000        R     DW      ?C0553
024A CC                DB      0CCH
024B 0000              DW      00H
024D 0000        R     DW      ?C0549
                                           ; SOURCE LINE # 1851
                                           ; SOURCE LINE # 1852
024F         ?C0551:
                                           ; SOURCE LINE # 1853
                                           ; SOURCE LINE # 1854
024F E5BD              MOV     A,EDATA2
0251 13                RRC     A
0252 13                RRC     A
0253 13                RRC     A
0254 541F              ANL     A,#01FH
0256 FF                MOV     R7,A
0257 EF                MOV     A,R7
0258 2407              ADD     A,#07H
025A FF                MOV     R7,A
025B 900000      R     MOV     DPTR,#paket_BO+01H
025E EF                MOV     A,R7
025F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1855
0260 802D              SJMP    ?C0549
                                           ; SOURCE LINE # 1856
                                           ; SOURCE LINE # 1857
0262         ?C0552:
                                           ; SOURCE LINE # 1858
                                           ; SOURCE LINE # 1859
0262 E5BD              MOV     A,EDATA2
0264 13                RRC     A
0265 13                RRC     A
0266 13                RRC     A
0267 541F              ANL     A,#01FH
0269 FF                MOV     R7,A
026A EF                MOV     A,R7
026B 2407              ADD     A,#07H
026D FF                MOV     R7,A
026E 900000      R     MOV     DPTR,#paket_BO+02H
0271 EF                MOV     A,R7
0272 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1860
0273 801A              SJMP    ?C0549
                                           ; SOURCE LINE # 1861
                                           ; SOURCE LINE # 1862
0275         ?C0553:
                                           ; SOURCE LINE # 1863
                                           ; SOURCE LINE # 1864
0275 E5BD              MOV     A,EDATA2
0277 13                RRC     A
0278 13                RRC     A
0279 13                RRC     A
027A 541F              ANL     A,#01FH
027C FF                MOV     R7,A
027D 7E00              MOV     R6,#00H
027F EF                MOV     A,R7
0280 2406              ADD     A,#06H
0282 FF                MOV     R7,A
0283 EE                MOV     A,R6
0284 3400              ADDC    A,#00H
0286 FE                MOV     R6,A
0287 900000      R     MOV     DPTR,#paket_BO+03H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 160 

028A EE                MOV     A,R6
028B F0                MOVX    @DPTR,A
028C A3                INC     DPTR
028D EF                MOV     A,R7
028E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1865
                                           ; SOURCE LINE # 1866
                                           ; SOURCE LINE # 1867
028F         ?C0550:
                                           ; SOURCE LINE # 1868
028F         ?C0549:
028F 900000      R     MOV     DPTR,#off
0292 E0                MOVX    A,@DPTR
0293 04                INC     A
0294 F0                MOVX    @DPTR,A
0295 020000      R     LJMP    ?C0547
0298         ?C0548:
                                           ; SOURCE LINE # 1869
0298         ?C0546:
                                           ; SOURCE LINE # 1873
0298 750000      R     MOV     i1,#00H
029B         ?C0554:
029B E500        R     MOV     A,i1
029D C3                CLR     C
029E 9405              SUBB    A,#05H
02A0 4003              JC      $ + 5H
02A2 020000      R     LJMP    ?C0555
                                           ; SOURCE LINE # 1874
                                           ; SOURCE LINE # 1875
02A5 AF00        R     MOV     R7,i1
02A7 7E10              MOV     R6,#010H
02A9 EF                MOV     A,R7
02AA 8EF0              MOV     B,R6
02AC A4                MUL     AB
02AD FF                MOV     R7,A
02AE AEF0              MOV     R6,B
02B0 EF                MOV     A,R7
02B1 2414              ADD     A,#014H
02B3 FF                MOV     R7,A
02B4 EE                MOV     A,R6
02B5 3402              ADDC    A,#02H
02B7 FE                MOV     R6,A
02B8 EF                MOV     A,R7
02B9 7802              MOV     R0,#02H
02BB         ?C0771:
02BB CE                XCH     A,R6
02BC C3                CLR     C
02BD 13                RRC     A
02BE CE                XCH     A,R6
02BF 13                RRC     A
02C0 D8F9              DJNZ    R0,?C0771
02C2 FF                MOV     R7,A
02C3 EE                MOV     A,R6
02C4 FF                MOV     R7,A
02C5 7E00              MOV     R6,#00H
02C7 EF                MOV     A,R7
02C8 5403              ANL     A,#03H
02CA F5C7              MOV     EADRH,A
02CC AF00        R     MOV     R7,i1
02CE 7E10              MOV     R6,#010H
02D0 EF                MOV     A,R7
02D1 8EF0              MOV     B,R6
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 161 

02D3 A4                MUL     AB
02D4 FF                MOV     R7,A
02D5 AEF0              MOV     R6,B
02D7 EF                MOV     A,R7
02D8 2414              ADD     A,#014H
02DA FF                MOV     R7,A
02DB EE                MOV     A,R6
02DC 3402              ADDC    A,#02H
02DE FE                MOV     R6,A
02DF EF                MOV     A,R7
02E0 7802              MOV     R0,#02H
02E2         ?C0772:
02E2 CE                XCH     A,R6
02E3 C3                CLR     C
02E4 13                RRC     A
02E5 CE                XCH     A,R6
02E6 13                RRC     A
02E7 D8F9              DJNZ    R0,?C0772
02E9 FF                MOV     R7,A
02EA 8FC6              MOV     EADRL,R7
02EC 75B901            MOV     ECON,#01H
02EF 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1876
02F2 E5BC              MOV     A,EDATA1
02F4 64FF              XRL     A,#0FFH
02F6 7003              JNZ     $ + 5H
02F8 020000      R     LJMP    ?C0556
                                           ; SOURCE LINE # 1877
                                           ; SOURCE LINE # 1878
02FB AF00        R     MOV     R7,i1
02FD EF                MOV     A,R7
02FE 75F006            MOV     B,#06H
0301 A4                MUL     AB
0302 2400        R     ADD     A,#LOW rele_prin
0304 F582              MOV     DPL,A
0306 E4                CLR     A
0307 3400        R     ADDC    A,#HIGH rele_prin
0309 F583              MOV     DPH,A
030B E5BC              MOV     A,EDATA1
030D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1879
030E AF00        R     MOV     R7,i1
0310 EF                MOV     A,R7
0311 75F006            MOV     B,#06H
0314 A4                MUL     AB
0315 2400        R     ADD     A,#LOW rele_prin+01H
0317 F582              MOV     DPL,A
0319 E4                CLR     A
031A 3400        R     ADDC    A,#HIGH rele_prin+01H
031C F583              MOV     DPH,A
031E E5BD              MOV     A,EDATA2
0320 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1880
0321 AFBE              MOV     R7,EDATA3
0323 7E00              MOV     R6,#00H
0325 AD00        R     MOV     R5,i1
0327 ED                MOV     A,R5
0328 75F006            MOV     B,#06H
032B A4                MUL     AB
032C 2400        R     ADD     A,#LOW rele_prin+02H
032E F582              MOV     DPL,A
0330 E4                CLR     A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 162 

0331 3400        R     ADDC    A,#HIGH rele_prin+02H
0333 F583              MOV     DPH,A
0335 EE                MOV     A,R6
0336 F0                MOVX    @DPTR,A
0337 A3                INC     DPTR
0338 EF                MOV     A,R7
0339 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1881
033A AF00        R     MOV     R7,i1
033C EF                MOV     A,R7
033D 75F006            MOV     B,#06H
0340 A4                MUL     AB
0341 2400        R     ADD     A,#LOW rele_prin+02H
0343 F582              MOV     DPL,A
0345 E4                CLR     A
0346 3400        R     ADDC    A,#HIGH rele_prin+02H
0348 F583              MOV     DPH,A
034A C083              PUSH    DPH
034C C082              PUSH    DPL
034E E0                MOVX    A,@DPTR
034F FE                MOV     R6,A
0350 A3                INC     DPTR
0351 E0                MOVX    A,@DPTR
0352 FF                MOV     R7,A
0353 EF                MOV     A,R7
0354 7F00              MOV     R7,#00H
0356 FE                MOV     R6,A
0357 D082              POP     DPL
0359 D083              POP     DPH
035B EE                MOV     A,R6
035C F0                MOVX    @DPTR,A
035D A3                INC     DPTR
035E EF                MOV     A,R7
035F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1882
0360 AFBF              MOV     R7,EDATA4
0362 7E00              MOV     R6,#00H
0364 AD00        R     MOV     R5,i1
0366 ED                MOV     A,R5
0367 75F006            MOV     B,#06H
036A A4                MUL     AB
036B 2400        R     ADD     A,#LOW rele_prin+02H
036D F582              MOV     DPL,A
036F E4                CLR     A
0370 3400        R     ADDC    A,#HIGH rele_prin+02H
0372 F583              MOV     DPH,A
0374 EE                MOV     A,R6
0375 8FF0              MOV     B,R7
0377 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 1885
037A AF00        R     MOV     R7,i1
037C 7E10              MOV     R6,#010H
037E EF                MOV     A,R7
037F 8EF0              MOV     B,R6
0381 A4                MUL     AB
0382 FF                MOV     R7,A
0383 AEF0              MOV     R6,B
0385 EF                MOV     A,R7
0386 2418              ADD     A,#018H
0388 FF                MOV     R7,A
0389 EE                MOV     A,R6
038A 3402              ADDC    A,#02H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 163 

038C FE                MOV     R6,A
038D EF                MOV     A,R7
038E 7802              MOV     R0,#02H
0390         ?C0773:
0390 CE                XCH     A,R6
0391 C3                CLR     C
0392 13                RRC     A
0393 CE                XCH     A,R6
0394 13                RRC     A
0395 D8F9              DJNZ    R0,?C0773
0397 FF                MOV     R7,A
0398 EE                MOV     A,R6
0399 FF                MOV     R7,A
039A 7E00              MOV     R6,#00H
039C EF                MOV     A,R7
039D 5403              ANL     A,#03H
039F F5C7              MOV     EADRH,A
03A1 AF00        R     MOV     R7,i1
03A3 7E10              MOV     R6,#010H
03A5 EF                MOV     A,R7
03A6 8EF0              MOV     B,R6
03A8 A4                MUL     AB
03A9 FF                MOV     R7,A
03AA AEF0              MOV     R6,B
03AC EF                MOV     A,R7
03AD 2418              ADD     A,#018H
03AF FF                MOV     R7,A
03B0 EE                MOV     A,R6
03B1 3402              ADDC    A,#02H
03B3 FE                MOV     R6,A
03B4 EF                MOV     A,R7
03B5 7802              MOV     R0,#02H
03B7         ?C0774:
03B7 CE                XCH     A,R6
03B8 C3                CLR     C
03B9 13                RRC     A
03BA CE                XCH     A,R6
03BB 13                RRC     A
03BC D8F9              DJNZ    R0,?C0774
03BE FF                MOV     R7,A
03BF 8FC6              MOV     EADRL,R7
03C1 75B901            MOV     ECON,#01H
03C4 75C700            MOV     EADRH,#00H
                                           ; SOURCE LINE # 1886
03C7 AFBC              MOV     R7,EDATA1
03C9 7E00              MOV     R6,#00H
03CB AD00        R     MOV     R5,i1
03CD ED                MOV     A,R5
03CE 75F006            MOV     B,#06H
03D1 A4                MUL     AB
03D2 2400        R     ADD     A,#LOW rele_prin+04H
03D4 F582              MOV     DPL,A
03D6 E4                CLR     A
03D7 3400        R     ADDC    A,#HIGH rele_prin+04H
03D9 F583              MOV     DPH,A
03DB EE                MOV     A,R6
03DC F0                MOVX    @DPTR,A
03DD A3                INC     DPTR
03DE EF                MOV     A,R7
03DF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1887
03E0 AF00        R     MOV     R7,i1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 164 

03E2 EF                MOV     A,R7
03E3 75F006            MOV     B,#06H
03E6 A4                MUL     AB
03E7 2400        R     ADD     A,#LOW rele_prin+04H
03E9 F582              MOV     DPL,A
03EB E4                CLR     A
03EC 3400        R     ADDC    A,#HIGH rele_prin+04H
03EE F583              MOV     DPH,A
03F0 C083              PUSH    DPH
03F2 C082              PUSH    DPL
03F4 E0                MOVX    A,@DPTR
03F5 FE                MOV     R6,A
03F6 A3                INC     DPTR
03F7 E0                MOVX    A,@DPTR
03F8 FF                MOV     R7,A
03F9 EF                MOV     A,R7
03FA 7F00              MOV     R7,#00H
03FC FE                MOV     R6,A
03FD D082              POP     DPL
03FF D083              POP     DPH
0401 EE                MOV     A,R6
0402 F0                MOVX    @DPTR,A
0403 A3                INC     DPTR
0404 EF                MOV     A,R7
0405 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1888
0406 AFBD              MOV     R7,EDATA2
0408 7E00              MOV     R6,#00H
040A AD00        R     MOV     R5,i1
040C ED                MOV     A,R5
040D 75F006            MOV     B,#06H
0410 A4                MUL     AB
0411 2400        R     ADD     A,#LOW rele_prin+04H
0413 F582              MOV     DPL,A
0415 E4                CLR     A
0416 3400        R     ADDC    A,#HIGH rele_prin+04H
0418 F583              MOV     DPH,A
041A EE                MOV     A,R6
041B 8FF0              MOV     B,R7
041D 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 1890
0420         ?C0557:
                                           ; SOURCE LINE # 1891
0420         ?C0556:
0420 0500        R     INC     i1
0422 020000      R     LJMP    ?C0554
0425         ?C0555:
                                           ; SOURCE LINE # 1893
0425 900000      R     MOV     DPTR,#ob_par
0428 E4                CLR     A
0429 F0                MOVX    @DPTR,A
042A A3                INC     DPTR
042B E4                CLR     A
042C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1895
042D 758DF3            MOV     TH1,#0F3H
                                           ; SOURCE LINE # 1896
0430 758BD2            MOV     TL1,#0D2H
                                           ; SOURCE LINE # 1898
0433 900000      R     MOV     DPTR,#OGR_UR
0436 E4                CLR     A
0437 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 165 

0438 A3                INC     DPTR
0439 E4                CLR     A
043A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1899
043B 750000      R     MOV     i1,#00H
043E         ?C0558:
043E E500        R     MOV     A,i1
0440 C3                CLR     C
0441 940D              SUBB    A,#0DH
0443 4003              JC      $ + 5H
0445 020000      R     LJMP    ?C0559
                                           ; SOURCE LINE # 1900
                                           ; SOURCE LINE # 1901
0448 AF00        R     MOV     R7,i1
044A EF                MOV     A,R7
044B C4                SWAP    A
044C 54F0              ANL     A,#0F0H
044E 2400        E     ADD     A,#LOW Str_CH_A
0450 F582              MOV     DPL,A
0452 E4                CLR     A
0453 3400        E     ADDC    A,#HIGH Str_CH_A
0455 F583              MOV     DPH,A
0457 E0                MOVX    A,@DPTR
0458 FF                MOV     R7,A
0459 EF                MOV     A,R7
045A 64FF              XRL     A,#0FFH
045C 7003              JNZ     $ + 5H
045E 020000      R     LJMP    ?C0560
                                           ; SOURCE LINE # 1902
                                           ; SOURCE LINE # 1903
0461 AF00        R     MOV     R7,i1
0463 EF                MOV     A,R7
0464 C4                SWAP    A
0465 54F0              ANL     A,#0F0H
0467 2400        E     ADD     A,#LOW Str_CH_A+01H
0469 F582              MOV     DPL,A
046B E4                CLR     A
046C 3400        E     ADDC    A,#HIGH Str_CH_A+01H
046E F583              MOV     DPH,A
0470 E0                MOVX    A,@DPTR
0471 FF                MOV     R7,A
0472 EF                MOV     A,R7
0473 B48440            CJNE    A,#084H,?C0562
                                           ; SOURCE LINE # 1904
0476 AF00        R     MOV     R7,i1
0478 EF                MOV     A,R7
0479 C4                SWAP    A
047A 54F0              ANL     A,#0F0H
047C 2400        E     ADD     A,#LOW Str_CH_A+0BH
047E F582              MOV     DPL,A
0480 E4                CLR     A
0481 3400        E     ADDC    A,#HIGH Str_CH_A+0BH
0483 F583              MOV     DPH,A
0485 E0                MOVX    A,@DPTR
0486 FF                MOV     R7,A
0487 E4                CLR     A
0488 FC                MOV     R4,A
0489 FD                MOV     R5,A
048A FE                MOV     R6,A
048B 8F00        R     MOV     H2+03H,R7
048D 8E00        R     MOV     H2+02H,R6
048F 8D00        R     MOV     H2+01H,R5
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 166 

0491 8C00        R     MOV     H2,R4
                                           ; SOURCE LINE # 1905
0493 AF00        R     MOV     R7,H2+03H
0495 AE00        R     MOV     R6,H2+02H
0497 AD00        R     MOV     R5,H2+01H
0499 AC00        R     MOV     R4,H2
049B 7B90              MOV     R3,#090H
049D 7A01              MOV     R2,#01H
049F 7900              MOV     R1,#00H
04A1 7800              MOV     R0,#00H
04A3 120000      E     LCALL   ?C?LMUL
04A6 8F00        R     MOV     H2+03H,R7
04A8 8E00        R     MOV     H2+02H,R6
04AA 8D00        R     MOV     H2+01H,R5
04AC 8C00        R     MOV     H2,R4
                                           ; SOURCE LINE # 1906
04AE E500        R     MOV     A,nas1
04B0 B40103            CJNE    A,#01H,?C0562
                                           ; SOURCE LINE # 1907
04B3 850000      R     MOV     nas1,i1
04B6         ?C0563:
                                           ; SOURCE LINE # 1908
04B6         ?C0562:
                                           ; SOURCE LINE # 1910
04B6 AF00        R     MOV     R7,i1
04B8 EF                MOV     A,R7
04B9 C4                SWAP    A
04BA 54F0              ANL     A,#0F0H
04BC 2400        E     ADD     A,#LOW Str_CH_A+01H
04BE F582              MOV     DPL,A
04C0 E4                CLR     A
04C1 3400        E     ADDC    A,#HIGH Str_CH_A+01H
04C3 F583              MOV     DPH,A
04C5 E0                MOVX    A,@DPTR
04C6 FF                MOV     R7,A
04C7 EF                MOV     A,R7
04C8 B48840            CJNE    A,#088H,?C0564
                                           ; SOURCE LINE # 1911
04CB AF00        R     MOV     R7,i1
04CD EF                MOV     A,R7
04CE C4                SWAP    A
04CF 54F0              ANL     A,#0F0H
04D1 2400        E     ADD     A,#LOW Str_CH_A+0BH
04D3 F582              MOV     DPL,A
04D5 E4                CLR     A
04D6 3400        E     ADDC    A,#HIGH Str_CH_A+0BH
04D8 F583              MOV     DPH,A
04DA E0                MOVX    A,@DPTR
04DB FF                MOV     R7,A
04DC E4                CLR     A
04DD FC                MOV     R4,A
04DE FD                MOV     R5,A
04DF FE                MOV     R6,A
04E0 8F00        R     MOV     H1+03H,R7
04E2 8E00        R     MOV     H1+02H,R6
04E4 8D00        R     MOV     H1+01H,R5
04E6 8C00        R     MOV     H1,R4
                                           ; SOURCE LINE # 1912
04E8 AF00        R     MOV     R7,H1+03H
04EA AE00        R     MOV     R6,H1+02H
04EC AD00        R     MOV     R5,H1+01H
04EE AC00        R     MOV     R4,H1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 167 

04F0 7B90              MOV     R3,#090H
04F2 7A01              MOV     R2,#01H
04F4 7900              MOV     R1,#00H
04F6 7800              MOV     R0,#00H
04F8 120000      E     LCALL   ?C?LMUL
04FB 8F00        R     MOV     H1+03H,R7
04FD 8E00        R     MOV     H1+02H,R6
04FF 8D00        R     MOV     H1+01H,R5
0501 8C00        R     MOV     H1,R4
                                           ; SOURCE LINE # 1913
0503 E500        R     MOV     A,nas2
0505 B40103            CJNE    A,#01H,?C0564
                                           ; SOURCE LINE # 1914
0508 850000      R     MOV     nas2,i1
050B         ?C0565:
                                           ; SOURCE LINE # 1915
050B         ?C0564:
                                           ; SOURCE LINE # 1917
050B AF00        R     MOV     R7,i1
050D EF                MOV     A,R7
050E C4                SWAP    A
050F 54F0              ANL     A,#0F0H
0511 2400        E     ADD     A,#LOW Str_CH_A+01H
0513 F582              MOV     DPL,A
0515 E4                CLR     A
0516 3400        E     ADDC    A,#HIGH Str_CH_A+01H
0518 F583              MOV     DPH,A
051A E0                MOVX    A,@DPTR
051B FF                MOV     R7,A
051C EF                MOV     A,R7
051D B4601B            CJNE    A,#060H,?C0566
                                           ; SOURCE LINE # 1918
                                           ; SOURCE LINE # 1919
0520 AF00        R     MOV     R7,i1
0522 EF                MOV     A,R7
0523 C4                SWAP    A
0524 54F0              ANL     A,#0F0H
0526 2400        E     ADD     A,#LOW Str_CH_A+07H
0528 F582              MOV     DPL,A
052A E4                CLR     A
052B 3400        E     ADDC    A,#HIGH Str_CH_A+07H
052D F583              MOV     DPH,A
052F E0                MOVX    A,@DPTR
0530 FF                MOV     R7,A
0531 7E00              MOV     R6,#00H
0533 900000      R     MOV     DPTR,#OGR_UR
0536 EE                MOV     A,R6
0537 F0                MOVX    @DPTR,A
0538 A3                INC     DPTR
0539 EF                MOV     A,R7
053A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1920
053B         ?C0566:
                                           ; SOURCE LINE # 1922
053B AF00        R     MOV     R7,i1
053D EF                MOV     A,R7
053E C4                SWAP    A
053F 54F0              ANL     A,#0F0H
0541 2400        E     ADD     A,#LOW Str_CH_A+07H
0543 F582              MOV     DPL,A
0545 E4                CLR     A
0546 3400        E     ADDC    A,#HIGH Str_CH_A+07H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 168 

0548 F583              MOV     DPH,A
054A E0                MOVX    A,@DPTR
054B FF                MOV     R7,A
054C EF                MOV     A,R7
054D 540F              ANL     A,#0FH
054F FF                MOV     R7,A
0550 EF                MOV     A,R7
0551 B4051B            CJNE    A,#05H,?C0560
                                           ; SOURCE LINE # 1923
0554 AF00        R     MOV     R7,i1
0556 EF                MOV     A,R7
0557 C4                SWAP    A
0558 54F0              ANL     A,#0F0H
055A 2400        E     ADD     A,#LOW Str_CH_A+02H
055C F582              MOV     DPL,A
055E E4                CLR     A
055F 3400        E     ADDC    A,#HIGH Str_CH_A+02H
0561 F583              MOV     DPH,A
0563 E0                MOVX    A,@DPTR
0564 FF                MOV     R7,A
0565 EF                MOV     A,R7
0566 30E404            JNB     ACC.4,?C0568
                                           ; SOURCE LINE # 1924
0569 D200        R     SETB    fl_rgr
056B 8002              SJMP    ?C0560
056D         ?C0568:
                                           ; SOURCE LINE # 1926
056D C200        R     CLR     fl_rgr
056F         ?C0569:
056F         ?C0567:
                                           ; SOURCE LINE # 1927
056F         ?C0561:
                                           ; SOURCE LINE # 1928
056F         ?C0560:
056F 0500        R     INC     i1
0571 020000      R     LJMP    ?C0558
0574         ?C0559:
                                           ; SOURCE LINE # 1932
0574 750000      R     MOV     i1,#00H
0577         ?C0570:
0577 E500        R     MOV     A,i1
0579 C3                CLR     C
057A 940D              SUBB    A,#0DH
057C 5016              JNC     ?C0571
                                           ; SOURCE LINE # 1933
057E AF00        R     MOV     R7,i1
0580 EF                MOV     A,R7
0581 C4                SWAP    A
0582 54F0              ANL     A,#0F0H
0584 2400        E     ADD     A,#LOW Str_CH_A+0BH
0586 F582              MOV     DPL,A
0588 E4                CLR     A
0589 3400        E     ADDC    A,#HIGH Str_CH_A+0BH
058B F583              MOV     DPH,A
058D 74FF              MOV     A,#0FFH
058F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1934
0590         ?C0572:
0590 0500        R     INC     i1
0592 80E3              SJMP    ?C0570
0594         ?C0571:
                                           ; SOURCE LINE # 1936
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 169 

0594 7800        R     MOV     R0,#LOW j
0596 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1937
0598 750000      R     MOV     i1,#00H
059B         ?C0573:
059B E500        R     MOV     A,i1
059D C3                CLR     C
059E 940D              SUBB    A,#0DH
05A0 4003              JC      $ + 5H
05A2 020000      R     LJMP    ?C0574
                                           ; SOURCE LINE # 1938
05A5 AF00        R     MOV     R7,i1
05A7 EF                MOV     A,R7
05A8 C4                SWAP    A
05A9 54F0              ANL     A,#0F0H
05AB 2400        E     ADD     A,#LOW Str_CH_A
05AD F582              MOV     DPL,A
05AF E4                CLR     A
05B0 3400        E     ADDC    A,#HIGH Str_CH_A
05B2 F583              MOV     DPH,A
05B4 E0                MOVX    A,@DPTR
05B5 FF                MOV     R7,A
05B6 EF                MOV     A,R7
05B7 64FF              XRL     A,#0FFH
05B9 7003              JNZ     $ + 5H
05BB 020000      R     LJMP    ?C0575
                                           ; SOURCE LINE # 1939
                                           ; SOURCE LINE # 1942
05BE AF00        R     MOV     R7,i1
05C0 EF                MOV     A,R7
05C1 C4                SWAP    A
05C2 54F0              ANL     A,#0F0H
05C4 2400        E     ADD     A,#LOW Str_CH_A+0BH
05C6 F582              MOV     DPL,A
05C8 E4                CLR     A
05C9 3400        E     ADDC    A,#HIGH Str_CH_A+0BH
05CB F583              MOV     DPH,A
05CD 74FF              MOV     A,#0FFH
05CF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1943
05D0 7800        R     MOV     R0,#LOW j1
05D2 7600              MOV     @R0,#00H
05D4         ?C0577:
05D4 7800        R     MOV     R0,#LOW j1
05D6 E6                MOV     A,@R0
05D7 FF                MOV     R7,A
05D8 EF                MOV     A,R7
05D9 C3                CLR     C
05DA 9415              SUBB    A,#015H
05DC 5068              JNC     ?C0575
                                           ; SOURCE LINE # 1944
                                           ; SOURCE LINE # 1945
05DE 7800        R     MOV     R0,#LOW j1
05E0 E6                MOV     A,@R0
05E1 FF                MOV     R7,A
05E2 EF                MOV     A,R7
05E3 25E0              ADD     A,ACC
05E5 2400        E     ADD     A,#LOW Str_TDAT
05E7 F582              MOV     DPL,A
05E9 E4                CLR     A
05EA 3400        E     ADDC    A,#HIGH Str_TDAT
05EC F583              MOV     DPH,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 170 

05EE E0                MOVX    A,@DPTR
05EF FF                MOV     R7,A
05F0 EF                MOV     A,R7
05F1 64FF              XRL     A,#0FFH
05F3 604C              JZ      ?C0579
                                           ; SOURCE LINE # 1946
05F5 AF00        R     MOV     R7,i1
05F7 EF                MOV     A,R7
05F8 C4                SWAP    A
05F9 54F0              ANL     A,#0F0H
05FB 2400        E     ADD     A,#LOW Str_CH_A
05FD F582              MOV     DPL,A
05FF E4                CLR     A
0600 3400        E     ADDC    A,#HIGH Str_CH_A
0602 F583              MOV     DPH,A
0604 E0                MOVX    A,@DPTR
0605 FF                MOV     R7,A
0606 7800        R     MOV     R0,#LOW j1
0608 E6                MOV     A,@R0
0609 FE                MOV     R6,A
060A EE                MOV     A,R6
060B 25E0              ADD     A,ACC
060D 2400        E     ADD     A,#LOW Str_TDAT
060F F582              MOV     DPL,A
0611 E4                CLR     A
0612 3400        E     ADDC    A,#HIGH Str_TDAT
0614 F583              MOV     DPH,A
0616 E0                MOVX    A,@DPTR
0617 FE                MOV     R6,A
0618 EE                MOV     A,R6
0619 6F                XRL     A,R7
061A 7025              JNZ     ?C0579
                                           ; SOURCE LINE # 1947
                                           ; SOURCE LINE # 1948
061C 7800        R     MOV     R0,#LOW j1
061E E6                MOV     A,@R0
061F FF                MOV     R7,A
0620 EF                MOV     A,R7
0621 25E0              ADD     A,ACC
0623 2400        E     ADD     A,#LOW Str_TDAT+01H
0625 F582              MOV     DPL,A
0627 E4                CLR     A
0628 3400        E     ADDC    A,#HIGH Str_TDAT+01H
062A F583              MOV     DPH,A
062C E0                MOVX    A,@DPTR
062D FF                MOV     R7,A
062E AE00        R     MOV     R6,i1
0630 EE                MOV     A,R6
0631 C4                SWAP    A
0632 54F0              ANL     A,#0F0H
0634 2400        E     ADD     A,#LOW Str_CH_A+0BH
0636 F582              MOV     DPL,A
0638 E4                CLR     A
0639 3400        E     ADDC    A,#HIGH Str_CH_A+0BH
063B F583              MOV     DPH,A
063D EF                MOV     A,R7
063E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1949
063F 8005              SJMP    ?C0575
                                           ; SOURCE LINE # 1950
0641         ?C0581:
0641         ?C0580:
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 171 

                                           ; SOURCE LINE # 1951
0641         ?C0579:
0641 7800        R     MOV     R0,#LOW j1
0643 06                INC     @R0
0644 808E              SJMP    ?C0577
0646         ?C0578:
                                           ; SOURCE LINE # 1952
0646         ?C0576:
                                           ; SOURCE LINE # 1953
0646         ?C0575:
0646 0500        R     INC     i1
0648 020000      R     LJMP    ?C0573
064B         ?C0574:
                                           ; SOURCE LINE # 1955
064B C200        R     CLR     napr
                                           ; SOURCE LINE # 1957
064D 120000      E     LCALL   setup_ADC
                                           ; SOURCE LINE # 1959
0650 AF80              MOV     R7,P0
0652 7E00              MOV     R6,#00H
0654 8E00        R     MOV     copy_p,R6
0656 8F00        R     MOV     copy_p+01H,R7
                                           ; SOURCE LINE # 1960
0658 7800        R     MOV     R0,#LOW MM
065A E6                MOV     A,@R0
065B FF                MOV     R7,A
065C 7E00              MOV     R6,#00H
065E EE                MOV     A,R6
065F 5500        R     ANL     A,copy_p
0661 FE                MOV     R6,A
0662 EF                MOV     A,R7
0663 5500        R     ANL     A,copy_p+01H
0665 FF                MOV     R7,A
0666 7800        R     MOV     R0,#LOW MM
0668 E6                MOV     A,@R0
0669 FD                MOV     R5,A
066A 7C00              MOV     R4,#00H
066C EF                MOV     A,R7
066D 6D                XRL     A,R5
066E 7002              JNZ     ?C0775
0670 EE                MOV     A,R6
0671 6C                XRL     A,R4
0672         ?C0775:
0672 7004              JNZ     ?C0582
0674 D200        R     SETB    d1
0676 8002              SJMP    ?C0583
0678         ?C0582:
0678 C200        R     CLR     d1
067A         ?C0583:
                                           ; SOURCE LINE # 1961
067A 7800        R     MOV     R0,#LOW MM+06H
067C E6                MOV     A,@R0
067D FF                MOV     R7,A
067E 7E00              MOV     R6,#00H
0680 EE                MOV     A,R6
0681 5500        R     ANL     A,copy_p
0683 FE                MOV     R6,A
0684 EF                MOV     A,R7
0685 5500        R     ANL     A,copy_p+01H
0687 FF                MOV     R7,A
0688 7800        R     MOV     R0,#LOW MM+06H
068A E6                MOV     A,@R0
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 172 

068B FD                MOV     R5,A
068C 7C00              MOV     R4,#00H
068E EF                MOV     A,R7
068F 6D                XRL     A,R5
0690 7002              JNZ     ?C0776
0692 EE                MOV     A,R6
0693 6C                XRL     A,R4
0694         ?C0776:
0694 7004              JNZ     ?C0584
0696 D200        R     SETB    d2
0698 8002              SJMP    ?C0585
069A         ?C0584:
069A C200        R     CLR     d2
069C         ?C0585:
                                           ; SOURCE LINE # 1962
069C A200        R     MOV     C,d1
069E 9200        R     MOV     d11,C
                                           ; SOURCE LINE # 1963
06A0 A200        R     MOV     C,d2
06A2 9200        R     MOV     d22,C
                                           ; SOURCE LINE # 1969
06A4 D200        R     SETB    rez
                                           ; SOURCE LINE # 1970
06A6 7F00              MOV     R7,#00H
06A8 120000      E     LCALL   _task_3
                                           ; SOURCE LINE # 1971
06AB C200        R     CLR     rez
                                           ; SOURCE LINE # 1972
06AD 900000      R     MOV     DPTR,#WK_1
06B0 E4                CLR     A
06B1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1973
06B2 900000      R     MOV     DPTR,#WKs
06B5 E4                CLR     A
06B6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1974
06B7 7800        R     MOV     R0,#LOW cnt_dol
06B9 E6                MOV     A,@R0
06BA FE                MOV     R6,A
06BB 08                INC     R0
06BC E6                MOV     A,@R0
06BD FF                MOV     R7,A
06BE E4                CLR     A
06BF FC                MOV     R4,A
06C0 FD                MOV     R5,A
06C1 900000      E     MOV     DPTR,#copy_dol
06C4 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 1977
06C7 C28E              CLR     TR1
                                           ; SOURCE LINE # 1978
06C9 758BD2            MOV     TL1,#0D2H
                                           ; SOURCE LINE # 1979
06CC 758DF3            MOV     TH1,#0F3H
                                           ; SOURCE LINE # 1980
06CF C28F              CLR     TF1
                                           ; SOURCE LINE # 1981
06D1 D2AB              SETB    ET1
                                           ; SOURCE LINE # 1982
06D3 D28E              SETB    TR1
                                           ; SOURCE LINE # 1983
06D5 D2AF              SETB    EA
                                           ; SOURCE LINE # 1984
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 173 

06D7 D2BC              SETB    PS
                                           ; SOURCE LINE # 1985
06D9 D2AE              SETB    EADC
06DB         ?C0586:
                                           ; SOURCE LINE # 1987
06DB AE00        R     MOV     R6,kol_c
06DD AF00        R     MOV     R7,kol_c+01H
06DF E4                CLR     A
06E0 FC                MOV     R4,A
06E1 FD                MOV     R5,A
06E2 7BE8              MOV     R3,#0E8H
06E4 7AFD              MOV     R2,#0FDH
06E6 7900              MOV     R1,#00H
06E8 7800              MOV     R0,#00H
06EA D3                SETB    C
06EB 120000      E     LCALL   ?C?SLCMP
06EE 400A              JC      ?C0587
                                           ; SOURCE LINE # 1988
06F0 0500        R     INC     kol_c+01H
06F2 E500        R     MOV     A,kol_c+01H
06F4 7002              JNZ     ?C0777
06F6 0500        R     INC     kol_c
06F8         ?C0777:
06F8 80E1              SJMP    ?C0586
06FA         ?C0587:
                                           ; SOURCE LINE # 1990
06FA 750005      R     MOV     st_ser,#05H
                                           ; SOURCE LINE # 1991
06FD D2AC              SETB    ES
                                           ; SOURCE LINE # 2004
06FF         zz1:
                                           ; SOURCE LINE # 2006
06FF 20001D      R     JB      fl_rest,?C0589
                                           ; SOURCE LINE # 2007
                                           ; SOURCE LINE # 2009
0702 E5D7              MOV     A,PLLCON
0704 7004              JNZ     ?C0591
0706 7F01              MOV     R7,#01H
0708 8002              SJMP    ?C0592
070A         ?C0591:
070A 7F00              MOV     R7,#00H
070C         ?C0592:
070C EF                MOV     A,R7
070D 30E606            JNB     ACC.6,?C0590
                                           ; SOURCE LINE # 2010
0710 900000      R     MOV     DPTR,#b_err_p
0713 E0                MOVX    A,@DPTR
0714 04                INC     A
0715 F0                MOVX    @DPTR,A
0716         ?C0590:
                                           ; SOURCE LINE # 2011
0716 C2AF              CLR     EA
                                           ; SOURCE LINE # 2012
0718 D2C0              SETB    WDWR
071A 75C032            MOV     WDCON,#032H
                                           ; SOURCE LINE # 2013
071D D2AF              SETB    EA
                                           ; SOURCE LINE # 2015
071F         ?C0589:
                                           ; SOURCE LINE # 2017
071F 900000      R     MOV     DPTR,#b_err_p
0722 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 174 

0723 FF                MOV     R7,A
0724 EF                MOV     A,R7
0725 D3                SETB    C
0726 9464              SUBB    A,#064H
0728 4006              JC      ?C0593
                                           ; SOURCE LINE # 2018
072A 900000      R     MOV     DPTR,#mi11
072D 743C              MOV     A,#03CH
072F F0                MOVX    @DPTR,A
0730         ?C0593:
                                           ; SOURCE LINE # 2020
0730 900000      R     MOV     DPTR,#b_err_cl
0733 E0                MOVX    A,@DPTR
0734 FF                MOV     R7,A
0735 EF                MOV     A,R7
0736 D3                SETB    C
0737 9464              SUBB    A,#064H
0739 4006              JC      ?C0594
                                           ; SOURCE LINE # 2021
073B 900000      R     MOV     DPTR,#mi11
073E 740A              MOV     A,#0AH
0740 F0                MOVX    @DPTR,A
0741         ?C0594:
                                           ; SOURCE LINE # 2023
0741 900000      R     MOV     DPTR,#b_err_pit
0744 E0                MOVX    A,@DPTR
0745 FF                MOV     R7,A
0746 EF                MOV     A,R7
0747 D3                SETB    C
0748 9464              SUBB    A,#064H
074A 4005              JC      ?C0595
                                           ; SOURCE LINE # 2024
074C 900000      R     MOV     DPTR,#mi11
074F E4                CLR     A
0750 F0                MOVX    @DPTR,A
0751         ?C0595:
                                           ; SOURCE LINE # 2026
0751 900000      R     MOV     DPTR,#mi1+01H
0754 E0                MOVX    A,@DPTR
0755 04                INC     A
0756 F0                MOVX    @DPTR,A
0757 7006              JNZ     ?C0778
0759 900000      R     MOV     DPTR,#mi1
075C E0                MOVX    A,@DPTR
075D 04                INC     A
075E F0                MOVX    @DPTR,A
075F         ?C0778:
                                           ; SOURCE LINE # 2027
075F 900000      R     MOV     DPTR,#mi11
0762 E0                MOVX    A,@DPTR
0763 FF                MOV     R7,A
0764 7E00              MOV     R6,#00H
0766 900000      R     MOV     DPTR,#mi1
0769 E0                MOVX    A,@DPTR
076A FC                MOV     R4,A
076B A3                INC     DPTR
076C E0                MOVX    A,@DPTR
076D FD                MOV     R5,A
076E C3                CLR     C
076F ED                MOV     A,R5
0770 9F                SUBB    A,R7
0771 EC                MOV     A,R4
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 175 

0772 9E                SUBB    A,R6
0773 4013              JC      ?C0596
                                           ; SOURCE LINE # 2028
0775 300008      R     JNB     ep2,?C0597
                                           ; SOURCE LINE # 2029
0778 300005      R     JNB     fl_sv,?C0597
                                           ; SOURCE LINE # 2030
077B A2A4              MOV     C,svet
077D B3                CPL     C
077E 92A4              MOV     svet,C
0780         ?C0598:
0780         ?C0597:
                                           ; SOURCE LINE # 2031
0780 900000      R     MOV     DPTR,#mi1
0783 E4                CLR     A
0784 F0                MOVX    @DPTR,A
0785 A3                INC     DPTR
0786 E4                CLR     A
0787 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2032
0788         ?C0596:
                                           ; SOURCE LINE # 2087
0788 900000      R     MOV     DPTR,#par
078B E0                MOVX    A,@DPTR
078C FF                MOV     R7,A
078D EF                MOV     A,R7
078E 640A              XRL     A,#0AH
0790 6003              JZ      $ + 5H
0792 020000      R     LJMP    ?C0599
                                           ; SOURCE LINE # 2088
                                           ; SOURCE LINE # 2090
0795 750025      R     MOV     zad,#025H
                                           ; SOURCE LINE # 2092
0798 750000      R     MOV     i1,#00H
079B         ?C0600:
079B E500        R     MOV     A,i1
079D C3                CLR     C
079E 9407              SUBB    A,#07H
07A0 5079              JNC     ?C0601
                                           ; SOURCE LINE # 2093
                                           ; SOURCE LINE # 2094
07A2 AF00        R     MOV     R7,i1
07A4 EF                MOV     A,R7
07A5 25E0              ADD     A,ACC
07A7 25E0              ADD     A,ACC
07A9 2400        R     ADD     A,#LOW BUF_vr
07AB F582              MOV     DPL,A
07AD E4                CLR     A
07AE 3400        R     ADDC    A,#HIGH BUF_vr
07B0 F583              MOV     DPH,A
07B2 E0                MOVX    A,@DPTR
07B3 FC                MOV     R4,A
07B4 A3                INC     DPTR
07B5 E0                MOVX    A,@DPTR
07B6 FD                MOV     R5,A
07B7 A3                INC     DPTR
07B8 E0                MOVX    A,@DPTR
07B9 FE                MOV     R6,A
07BA A3                INC     DPTR
07BB E0                MOVX    A,@DPTR
07BC FF                MOV     R7,A
07BD 7BF0              MOV     R3,#0F0H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 176 

07BF 7AFF              MOV     R2,#0FFH
07C1 790F              MOV     R1,#0FH
07C3 7800              MOV     R0,#00H
07C5 D3                SETB    C
07C6 120000      E     LCALL   ?C?ULCMP
07C9 4035              JC      ?C0603
                                           ; SOURCE LINE # 2095
                                           ; SOURCE LINE # 2097
07CB AF00        R     MOV     R7,i1
07CD EF                MOV     A,R7
07CE 25E0              ADD     A,ACC
07D0 25E0              ADD     A,ACC
07D2 2400        R     ADD     A,#LOW BUF_vr
07D4 F582              MOV     DPL,A
07D6 E4                CLR     A
07D7 3400        R     ADDC    A,#HIGH BUF_vr
07D9 F583              MOV     DPH,A
07DB E0                MOVX    A,@DPTR
07DC FC                MOV     R4,A
07DD A3                INC     DPTR
07DE E0                MOVX    A,@DPTR
07DF FD                MOV     R5,A
07E0 A3                INC     DPTR
07E1 E0                MOVX    A,@DPTR
07E2 FE                MOV     R6,A
07E3 A3                INC     DPTR
07E4 E0                MOVX    A,@DPTR
07E5 FF                MOV     R7,A
07E6 7802              MOV     R0,#02H
07E8 120000      E     LCALL   ?C?ULSHR
07EB AB00        R     MOV     R3,i1
07ED EB                MOV     A,R3
07EE 25E0              ADD     A,ACC
07F0 25E0              ADD     A,ACC
07F2 2400        E     ADD     A,#LOW BUF_T
07F4 F582              MOV     DPL,A
07F6 E4                CLR     A
07F7 3400        E     ADDC    A,#HIGH BUF_T
07F9 F583              MOV     DPH,A
07FB 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 2098
07FE 8017              SJMP    ?C0602
0800         ?C0603:
                                           ; SOURCE LINE # 2100
0800 AF00        R     MOV     R7,i1
0802 EF                MOV     A,R7
0803 25E0              ADD     A,ACC
0805 25E0              ADD     A,ACC
0807 2400        E     ADD     A,#LOW BUF_T
0809 F582              MOV     DPL,A
080B E4                CLR     A
080C 3400        E     ADDC    A,#HIGH BUF_T
080E F583              MOV     DPH,A
0810 120000      E     LCALL   ?C?LSTKXDATA
0813 00                DB      00H
0814 00                DB      00H
0815 FF                DB      0FFH
0816 FF                DB      0FFH
0817         ?C0604:
                                           ; SOURCE LINE # 2101
0817         ?C0602:
0817 0500        R     INC     i1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 177 

0819 8080              SJMP    ?C0600
081B         ?C0601:
                                           ; SOURCE LINE # 2104
081B 750000      R     MOV     i1,#00H
081E         ?C0605:
081E E500        R     MOV     A,i1
0820 C3                CLR     C
0821 940B              SUBB    A,#0BH
0823 500E              JNC     ?C0608
                                           ; SOURCE LINE # 2105
                                           ; SOURCE LINE # 2106
0825 AF00        R     MOV     R7,i1
0827 120000      E     LCALL   _task_3
                                           ; SOURCE LINE # 2107
082A         ?C0607:
082A 0500        R     INC     i1
082C 80F0              SJMP    ?C0605
082E         ?C0606:
                                           ; SOURCE LINE # 2108
082E 8003              SJMP    ?C0608
0830         ?C0599:
                                           ; SOURCE LINE # 2111
0830 750025      R     MOV     zad,#025H
0833         ?C0608:
                                           ; SOURCE LINE # 2112
0833 30B208            JNB     int0,?C0609
                                           ; SOURCE LINE # 2113
                                           ; SOURCE LINE # 2115
0836 900000      R     MOV     DPTR,#par
0839 E0                MOVX    A,@DPTR
083A 04                INC     A
083B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2116
083C 8006              SJMP    ?C0610
083E         ?C0609:
                                           ; SOURCE LINE # 2118
083E 900000      R     MOV     DPTR,#b_err_pit
0841 E0                MOVX    A,@DPTR
0842 04                INC     A
0843 F0                MOVX    @DPTR,A
0844         ?C0610:
                                           ; SOURCE LINE # 2122
0844 200003      R     JB      Eprom_ch,$ + 6H
0847 020000      R     LJMP    ?C0611
                                           ; SOURCE LINE # 2123
                                           ; SOURCE LINE # 2125
084A C2AC              CLR     ES
                                           ; SOURCE LINE # 2126
084C A2B2              MOV     C,int0
084E E4                CLR     A
084F 33                RLC     A
0850 FF                MOV     R7,A
0851 E500        R     MOV     A,cmd
0853 B40204            CJNE    A,#02H,?C0613
0856 7E01              MOV     R6,#01H
0858 8002              SJMP    ?C0614
085A         ?C0613:
085A 7E00              MOV     R6,#00H
085C         ?C0614:
085C EE                MOV     A,R6
085D 5F                ANL     A,R7
085E FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 178 

085F EF                MOV     A,R7
0860 7003              JNZ     $ + 5H
0862 020000      R     LJMP    ?C0612
                                           ; SOURCE LINE # 2127
                                           ; SOURCE LINE # 2128
0865 750000      R     MOV     j4,#00H
0868         ?C0615:
0868 E500        R     MOV     A,j4
086A C3                CLR     C
086B 9500        R     SUBB    A,len_o
086D 4003              JC      $ + 5H
086F 020000      R     LJMP    ?C0616
                                           ; SOURCE LINE # 2129
                                           ; SOURCE LINE # 2130
0872 E500        R     MOV     A,ED
0874 13                RRC     A
0875 13                RRC     A
0876 543F              ANL     A,#03FH
0878 FF                MOV     R7,A
0879 7E00              MOV     R6,#00H
087B 8FC7              MOV     EADRH,R7
                                           ; SOURCE LINE # 2131
087D E500        R     MOV     A,ED+01H
087F AE00        R     MOV     R6,ED
0881 7802              MOV     R0,#02H
0883         ?C0779:
0883 CE                XCH     A,R6
0884 C3                CLR     C
0885 13                RRC     A
0886 CE                XCH     A,R6
0887 13                RRC     A
0888 D8F9              DJNZ    R0,?C0779
088A FF                MOV     R7,A
088B 8FC6              MOV     EADRL,R7
                                           ; SOURCE LINE # 2133
088D 75B901            MOV     ECON,#01H
                                           ; SOURCE LINE # 2136
0890 7E00              MOV     R6,#00H
0892 E500        R     MOV     A,ED+01H
0894 5403              ANL     A,#03H
0896 FF                MOV     R7,A
0897 EF                MOV     A,R7
0898 4E                ORL     A,R6
0899 7004              JNZ     ?C0619
089B 7F01              MOV     R7,#01H
089D 8002              SJMP    ?C0620
089F         ?C0619:
089F 7F00              MOV     R7,#00H
08A1         ?C0620:
08A1 E500        R     MOV     A,j4
08A3 C3                CLR     C
08A4 9500        R     SUBB    A,len_o
08A6 5004              JNC     ?C0621
08A8 7E01              MOV     R6,#01H
08AA 8002              SJMP    ?C0622
08AC         ?C0621:
08AC 7E00              MOV     R6,#00H
08AE         ?C0622:
08AE EE                MOV     A,R6
08AF 5F                ANL     A,R7
08B0 FF                MOV     R7,A
08B1 EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 179 

08B2 6019              JZ      ?C0618
                                           ; SOURCE LINE # 2137
08B4 AF00        R     MOV     R7,j4
08B6 7446              MOV     A,#LOW bufout+06H
08B8 2F                ADD     A,R7
08B9 F582              MOV     DPL,A
08BB E4                CLR     A
08BC 3400              ADDC    A,#HIGH bufout+06H
08BE F583              MOV     DPH,A
08C0 E5BC              MOV     A,EDATA1
08C2 F0                MOVX    @DPTR,A
08C3 0500        R     INC     ED+01H
08C5 E500        R     MOV     A,ED+01H
08C7 7002              JNZ     ?C0780
08C9 0500        R     INC     ED
08CB         ?C0780:
08CB 0500        R     INC     j4
08CD         ?C0618:
                                           ; SOURCE LINE # 2139
08CD 7E00              MOV     R6,#00H
08CF E500        R     MOV     A,ED+01H
08D1 5403              ANL     A,#03H
08D3 FF                MOV     R7,A
08D4 EF                MOV     A,R7
08D5 6401              XRL     A,#01H
08D7 4E                ORL     A,R6
08D8 7004              JNZ     ?C0624
08DA 7F01              MOV     R7,#01H
08DC 8002              SJMP    ?C0625
08DE         ?C0624:
08DE 7F00              MOV     R7,#00H
08E0         ?C0625:
08E0 E500        R     MOV     A,j4
08E2 C3                CLR     C
08E3 9500        R     SUBB    A,len_o
08E5 5004              JNC     ?C0626
08E7 7E01              MOV     R6,#01H
08E9 8002              SJMP    ?C0627
08EB         ?C0626:
08EB 7E00              MOV     R6,#00H
08ED         ?C0627:
08ED EE                MOV     A,R6
08EE 5F                ANL     A,R7
08EF FF                MOV     R7,A
08F0 EF                MOV     A,R7
08F1 6019              JZ      ?C0623
                                           ; SOURCE LINE # 2140
08F3 AF00        R     MOV     R7,j4
08F5 7446              MOV     A,#LOW bufout+06H
08F7 2F                ADD     A,R7
08F8 F582              MOV     DPL,A
08FA E4                CLR     A
08FB 3400              ADDC    A,#HIGH bufout+06H
08FD F583              MOV     DPH,A
08FF E5BD              MOV     A,EDATA2
0901 F0                MOVX    @DPTR,A
0902 0500        R     INC     ED+01H
0904 E500        R     MOV     A,ED+01H
0906 7002              JNZ     ?C0781
0908 0500        R     INC     ED
090A         ?C0781:
090A 0500        R     INC     j4
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 180 

090C         ?C0623:
                                           ; SOURCE LINE # 2142
090C 7E00              MOV     R6,#00H
090E E500        R     MOV     A,ED+01H
0910 5403              ANL     A,#03H
0912 FF                MOV     R7,A
0913 EF                MOV     A,R7
0914 6402              XRL     A,#02H
0916 4E                ORL     A,R6
0917 7004              JNZ     ?C0629
0919 7F01              MOV     R7,#01H
091B 8002              SJMP    ?C0630
091D         ?C0629:
091D 7F00              MOV     R7,#00H
091F         ?C0630:
091F E500        R     MOV     A,j4
0921 C3                CLR     C
0922 9500        R     SUBB    A,len_o
0924 5004              JNC     ?C0631
0926 7E01              MOV     R6,#01H
0928 8002              SJMP    ?C0632
092A         ?C0631:
092A 7E00              MOV     R6,#00H
092C         ?C0632:
092C EE                MOV     A,R6
092D 5F                ANL     A,R7
092E FF                MOV     R7,A
092F EF                MOV     A,R7
0930 6019              JZ      ?C0628
                                           ; SOURCE LINE # 2143
0932 AF00        R     MOV     R7,j4
0934 7446              MOV     A,#LOW bufout+06H
0936 2F                ADD     A,R7
0937 F582              MOV     DPL,A
0939 E4                CLR     A
093A 3400              ADDC    A,#HIGH bufout+06H
093C F583              MOV     DPH,A
093E E5BE              MOV     A,EDATA3
0940 F0                MOVX    @DPTR,A
0941 0500        R     INC     ED+01H
0943 E500        R     MOV     A,ED+01H
0945 7002              JNZ     ?C0782
0947 0500        R     INC     ED
0949         ?C0782:
0949 0500        R     INC     j4
094B         ?C0628:
                                           ; SOURCE LINE # 2145
094B 7E00              MOV     R6,#00H
094D E500        R     MOV     A,ED+01H
094F 5403              ANL     A,#03H
0951 FF                MOV     R7,A
0952 EF                MOV     A,R7
0953 6403              XRL     A,#03H
0955 4E                ORL     A,R6
0956 7004              JNZ     ?C0634
0958 7F01              MOV     R7,#01H
095A 8002              SJMP    ?C0635
095C         ?C0634:
095C 7F00              MOV     R7,#00H
095E         ?C0635:
095E E500        R     MOV     A,j4
0960 C3                CLR     C
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 181 

0961 9500        R     SUBB    A,len_o
0963 5004              JNC     ?C0636
0965 7E01              MOV     R6,#01H
0967 8002              SJMP    ?C0637
0969         ?C0636:
0969 7E00              MOV     R6,#00H
096B         ?C0637:
096B EE                MOV     A,R6
096C 5F                ANL     A,R7
096D FF                MOV     R7,A
096E EF                MOV     A,R7
096F 6019              JZ      ?C0633
                                           ; SOURCE LINE # 2146
0971 AF00        R     MOV     R7,j4
0973 7446              MOV     A,#LOW bufout+06H
0975 2F                ADD     A,R7
0976 F582              MOV     DPL,A
0978 E4                CLR     A
0979 3400              ADDC    A,#HIGH bufout+06H
097B F583              MOV     DPH,A
097D E5BF              MOV     A,EDATA4
097F F0                MOVX    @DPTR,A
0980 0500        R     INC     ED+01H
0982 E500        R     MOV     A,ED+01H
0984 7002              JNZ     ?C0783
0986 0500        R     INC     ED
0988         ?C0783:
0988 0500        R     INC     j4
098A         ?C0633:
                                           ; SOURCE LINE # 2147
098A 1500        R     DEC     j4
                                           ; SOURCE LINE # 2148
098C         ?C0617:
098C 0500        R     INC     j4
098E 020000      R     LJMP    ?C0615
0991         ?C0616:
                                           ; SOURCE LINE # 2149
0991 7406              MOV     A,#06H
0993 2500        R     ADD     A,len_o
0995 F500        R     MOV     len_o,A
                                           ; SOURCE LINE # 2150
0997 7800        R     MOV     R0,#LOW TM_LINE
0999 E6                MOV     A,@R0
099A FF                MOV     R7,A
099B 7800        R     MOV     R0,#LOW TM_LINE
099D E6                MOV     A,@R0
099E FE                MOV     R6,A
099F EE                MOV     A,R6
09A0 2F                ADD     A,R7
09A1 FF                MOV     R7,A
09A2 7800        R     MOV     R0,#LOW tmo
09A4 EF                MOV     A,R7
09A5 F6                MOV     @R0,A
                                           ; SOURCE LINE # 2151
09A6 D2B6              SETB    WR
                                           ; SOURCE LINE # 2152
09A8 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 2153
09AB E500        R     MOV     A,len_o
09AD 04                INC     A
09AE FF                MOV     R7,A
09AF 900042            MOV     DPTR,#bufout+02H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 182 

09B2 EF                MOV     A,R7
09B3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2154
09B4 8003              SJMP    ?C0638
09B6         ?C0612:
                                           ; SOURCE LINE # 2156
09B6 75000A      R     MOV     st_ser,#0AH
09B9         ?C0638:
                                           ; SOURCE LINE # 2157
09B9 C200        R     CLR     Eprom_ch
                                           ; SOURCE LINE # 2158
09BB D2AC              SETB    ES
                                           ; SOURCE LINE # 2159
09BD         ?C0611:
                                           ; SOURCE LINE # 2161
09BD 200003      R     JB      Eprom_zap,$ + 6H
09C0 020000      R     LJMP    ?C0639
                                           ; SOURCE LINE # 2162
                                           ; SOURCE LINE # 2164
09C3 C2AC              CLR     ES
                                           ; SOURCE LINE # 2165
09C5 A2B2              MOV     C,int0
09C7 E4                CLR     A
09C8 33                RLC     A
09C9 FF                MOV     R7,A
09CA E500        R     MOV     A,cmd
09CC B40104            CJNE    A,#01H,?C0641
09CF 7E01              MOV     R6,#01H
09D1 8002              SJMP    ?C0642
09D3         ?C0641:
09D3 7E00              MOV     R6,#00H
09D5         ?C0642:
09D5 EE                MOV     A,R6
09D6 5F                ANL     A,R7
09D7 FF                MOV     R7,A
09D8 EF                MOV     A,R7
09D9 7003              JNZ     $ + 5H
09DB 020000      R     LJMP    ?C0640
                                           ; SOURCE LINE # 2166
                                           ; SOURCE LINE # 2167
09DE E500        R     MOV     A,Len_p
09E0 24F9              ADD     A,#0F9H
09E2 FF                MOV     R7,A
09E3 EF                MOV     A,R7
09E4 6500        R     XRL     A,len_o
09E6 6006              JZ      ?C0643
                                           ; SOURCE LINE # 2168
09E8 75000A      R     MOV     st_ser,#0AH
09EB 020000      R     LJMP    kon1
09EE         ?C0643:
                                           ; SOURCE LINE # 2170
09EE 750000      R     MOV     i1,#00H
09F1         ?C0645:
09F1 E500        R     MOV     A,i1
09F3 C3                CLR     C
09F4 9500        R     SUBB    A,len_o
09F6 4003              JC      $ + 5H
09F8 020000      R     LJMP    ?C0646
                                           ; SOURCE LINE # 2171
                                           ; SOURCE LINE # 2172
09FB E500        R     MOV     A,ED
09FD 13                RRC     A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 183 

09FE 13                RRC     A
09FF 543F              ANL     A,#03FH
0A01 FF                MOV     R7,A
0A02 7E00              MOV     R6,#00H
0A04 8FC7              MOV     EADRH,R7
                                           ; SOURCE LINE # 2173
0A06 E500        R     MOV     A,ED+01H
0A08 AE00        R     MOV     R6,ED
0A0A 7802              MOV     R0,#02H
0A0C         ?C0784:
0A0C CE                XCH     A,R6
0A0D C3                CLR     C
0A0E 13                RRC     A
0A0F CE                XCH     A,R6
0A10 13                RRC     A
0A11 D8F9              DJNZ    R0,?C0784
0A13 FF                MOV     R7,A
0A14 8FC6              MOV     EADRL,R7
                                           ; SOURCE LINE # 2175
0A16 75B901            MOV     ECON,#01H
                                           ; SOURCE LINE # 2177
0A19 7E00              MOV     R6,#00H
0A1B E500        R     MOV     A,ED+01H
0A1D 5403              ANL     A,#03H
0A1F FF                MOV     R7,A
0A20 EF                MOV     A,R7
0A21 4E                ORL     A,R6
0A22 7004              JNZ     ?C0649
0A24 7F01              MOV     R7,#01H
0A26 8002              SJMP    ?C0650
0A28         ?C0649:
0A28 7F00              MOV     R7,#00H
0A2A         ?C0650:
0A2A E500        R     MOV     A,i1
0A2C C3                CLR     C
0A2D 9500        R     SUBB    A,len_o
0A2F 5004              JNC     ?C0651
0A31 7E01              MOV     R6,#01H
0A33 8002              SJMP    ?C0652
0A35         ?C0651:
0A35 7E00              MOV     R6,#00H
0A37         ?C0652:
0A37 EE                MOV     A,R6
0A38 5F                ANL     A,R7
0A39 FF                MOV     R7,A
0A3A EF                MOV     A,R7
0A3B 601A              JZ      ?C0648
                                           ; SOURCE LINE # 2178
0A3D AF00        R     MOV     R7,i1
0A3F 7400        R     MOV     A,#LOW zbuf+06H
0A41 2F                ADD     A,R7
0A42 F582              MOV     DPL,A
0A44 E4                CLR     A
0A45 3400        R     ADDC    A,#HIGH zbuf+06H
0A47 F583              MOV     DPH,A
0A49 E0                MOVX    A,@DPTR
0A4A FF                MOV     R7,A
0A4B 8FBC              MOV     EDATA1,R7
0A4D 0500        R     INC     ED+01H
0A4F E500        R     MOV     A,ED+01H
0A51 7002              JNZ     ?C0785
0A53 0500        R     INC     ED
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 184 

0A55         ?C0785:
0A55 0500        R     INC     i1
                                           ; SOURCE LINE # 2179
0A57         ?C0648:
                                           ; SOURCE LINE # 2181
0A57 7E00              MOV     R6,#00H
0A59 E500        R     MOV     A,ED+01H
0A5B 5403              ANL     A,#03H
0A5D FF                MOV     R7,A
0A5E EF                MOV     A,R7
0A5F 6401              XRL     A,#01H
0A61 4E                ORL     A,R6
0A62 7004              JNZ     ?C0654
0A64 7F01              MOV     R7,#01H
0A66 8002              SJMP    ?C0655
0A68         ?C0654:
0A68 7F00              MOV     R7,#00H
0A6A         ?C0655:
0A6A E500        R     MOV     A,i1
0A6C C3                CLR     C
0A6D 9500        R     SUBB    A,len_o
0A6F 5004              JNC     ?C0656
0A71 7E01              MOV     R6,#01H
0A73 8002              SJMP    ?C0657
0A75         ?C0656:
0A75 7E00              MOV     R6,#00H
0A77         ?C0657:
0A77 EE                MOV     A,R6
0A78 5F                ANL     A,R7
0A79 FF                MOV     R7,A
0A7A EF                MOV     A,R7
0A7B 601A              JZ      ?C0653
                                           ; SOURCE LINE # 2182
0A7D AF00        R     MOV     R7,i1
0A7F 7400        R     MOV     A,#LOW zbuf+06H
0A81 2F                ADD     A,R7
0A82 F582              MOV     DPL,A
0A84 E4                CLR     A
0A85 3400        R     ADDC    A,#HIGH zbuf+06H
0A87 F583              MOV     DPH,A
0A89 E0                MOVX    A,@DPTR
0A8A FF                MOV     R7,A
0A8B 8FBD              MOV     EDATA2,R7
0A8D 0500        R     INC     ED+01H
0A8F E500        R     MOV     A,ED+01H
0A91 7002              JNZ     ?C0786
0A93 0500        R     INC     ED
0A95         ?C0786:
0A95 0500        R     INC     i1
                                           ; SOURCE LINE # 2183
0A97         ?C0653:
                                           ; SOURCE LINE # 2185
0A97 7E00              MOV     R6,#00H
0A99 E500        R     MOV     A,ED+01H
0A9B 5403              ANL     A,#03H
0A9D FF                MOV     R7,A
0A9E EF                MOV     A,R7
0A9F 6402              XRL     A,#02H
0AA1 4E                ORL     A,R6
0AA2 7004              JNZ     ?C0659
0AA4 7F01              MOV     R7,#01H
0AA6 8002              SJMP    ?C0660
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 185 

0AA8         ?C0659:
0AA8 7F00              MOV     R7,#00H
0AAA         ?C0660:
0AAA E500        R     MOV     A,i1
0AAC C3                CLR     C
0AAD 9500        R     SUBB    A,len_o
0AAF 5004              JNC     ?C0661
0AB1 7E01              MOV     R6,#01H
0AB3 8002              SJMP    ?C0662
0AB5         ?C0661:
0AB5 7E00              MOV     R6,#00H
0AB7         ?C0662:
0AB7 EE                MOV     A,R6
0AB8 5F                ANL     A,R7
0AB9 FF                MOV     R7,A
0ABA EF                MOV     A,R7
0ABB 601A              JZ      ?C0658
                                           ; SOURCE LINE # 2186
0ABD AF00        R     MOV     R7,i1
0ABF 7400        R     MOV     A,#LOW zbuf+06H
0AC1 2F                ADD     A,R7
0AC2 F582              MOV     DPL,A
0AC4 E4                CLR     A
0AC5 3400        R     ADDC    A,#HIGH zbuf+06H
0AC7 F583              MOV     DPH,A
0AC9 E0                MOVX    A,@DPTR
0ACA FF                MOV     R7,A
0ACB 8FBE              MOV     EDATA3,R7
0ACD 0500        R     INC     ED+01H
0ACF E500        R     MOV     A,ED+01H
0AD1 7002              JNZ     ?C0787
0AD3 0500        R     INC     ED
0AD5         ?C0787:
0AD5 0500        R     INC     i1
                                           ; SOURCE LINE # 2187
0AD7         ?C0658:
                                           ; SOURCE LINE # 2189
0AD7 7E00              MOV     R6,#00H
0AD9 E500        R     MOV     A,ED+01H
0ADB 5403              ANL     A,#03H
0ADD FF                MOV     R7,A
0ADE EF                MOV     A,R7
0ADF 6403              XRL     A,#03H
0AE1 4E                ORL     A,R6
0AE2 7004              JNZ     ?C0664
0AE4 7F01              MOV     R7,#01H
0AE6 8002              SJMP    ?C0665
0AE8         ?C0664:
0AE8 7F00              MOV     R7,#00H
0AEA         ?C0665:
0AEA E500        R     MOV     A,i1
0AEC C3                CLR     C
0AED 9500        R     SUBB    A,len_o
0AEF 5004              JNC     ?C0666
0AF1 7E01              MOV     R6,#01H
0AF3 8002              SJMP    ?C0667
0AF5         ?C0666:
0AF5 7E00              MOV     R6,#00H
0AF7         ?C0667:
0AF7 EE                MOV     A,R6
0AF8 5F                ANL     A,R7
0AF9 FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 186 

0AFA EF                MOV     A,R7
0AFB 601A              JZ      ?C0663
                                           ; SOURCE LINE # 2190
0AFD AF00        R     MOV     R7,i1
0AFF 7400        R     MOV     A,#LOW zbuf+06H
0B01 2F                ADD     A,R7
0B02 F582              MOV     DPL,A
0B04 E4                CLR     A
0B05 3400        R     ADDC    A,#HIGH zbuf+06H
0B07 F583              MOV     DPH,A
0B09 E0                MOVX    A,@DPTR
0B0A FF                MOV     R7,A
0B0B 8FBF              MOV     EDATA4,R7
0B0D 0500        R     INC     ED+01H
0B0F E500        R     MOV     A,ED+01H
0B11 7002              JNZ     ?C0788
0B13 0500        R     INC     ED
0B15         ?C0788:
0B15 0500        R     INC     i1
                                           ; SOURCE LINE # 2191
0B17         ?C0663:
                                           ; SOURCE LINE # 2192
0B17 1500        R     DEC     i1
                                           ; SOURCE LINE # 2193
0B19 C28E              CLR     TR1
                                           ; SOURCE LINE # 2194
0B1B 75B905            MOV     ECON,#05H
                                           ; SOURCE LINE # 2195
0B1E D28E              SETB    TR1
                                           ; SOURCE LINE # 2196
0B20 C28E              CLR     TR1
                                           ; SOURCE LINE # 2197
0B22 75B902            MOV     ECON,#02H
                                           ; SOURCE LINE # 2198
0B25 D28E              SETB    TR1
                                           ; SOURCE LINE # 2199
0B27         ?C0647:
0B27 0500        R     INC     i1
0B29 020000      R     LJMP    ?C0645
0B2C         ?C0646:
                                           ; SOURCE LINE # 2200
0B2C 75000A      R     MOV     st_ser,#0AH
                                           ; SOURCE LINE # 2201
0B2F         ?C0640:
                                           ; SOURCE LINE # 2203
0B2F A2B2              MOV     C,int0
0B31 E4                CLR     A
0B32 33                RLC     A
0B33 FF                MOV     R7,A
0B34 E500        R     MOV     A,cmd
0B36 B40304            CJNE    A,#03H,?C0669
0B39 7E01              MOV     R6,#01H
0B3B 8002              SJMP    ?C0670
0B3D         ?C0669:
0B3D 7E00              MOV     R6,#00H
0B3F         ?C0670:
0B3F EE                MOV     A,R6
0B40 5F                ANL     A,R7
0B41 FF                MOV     R7,A
0B42 EF                MOV     A,R7
0B43 7003              JNZ     $ + 5H
0B45 020000      R     LJMP    kon1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 187 

                                           ; SOURCE LINE # 2204
                                           ; SOURCE LINE # 2206
0B48 E500        R     MOV     A,Len_p
0B4A 24F9              ADD     A,#0F9H
0B4C FF                MOV     R7,A
0B4D EF                MOV     A,R7
0B4E 6500        R     XRL     A,len_o
0B50 6006              JZ      ?C0671
                                           ; SOURCE LINE # 2207
0B52 75000A      R     MOV     st_ser,#0AH
0B55 020000      R     LJMP    kon1
0B58         ?C0671:
                                           ; SOURCE LINE # 2209
0B58 750000      R     MOV     i1,#00H
0B5B         ?C0672:
0B5B E500        R     MOV     A,i1
0B5D C3                CLR     C
0B5E 9500        R     SUBB    A,len_o
0B60 4003              JC      $ + 5H
0B62 020000      R     LJMP    ?C0673
                                           ; SOURCE LINE # 2210
                                           ; SOURCE LINE # 2211
0B65 E500        R     MOV     A,ED
0B67 13                RRC     A
0B68 13                RRC     A
0B69 543F              ANL     A,#03FH
0B6B FF                MOV     R7,A
0B6C 7E00              MOV     R6,#00H
0B6E 8FC7              MOV     EADRH,R7
                                           ; SOURCE LINE # 2212
0B70 E500        R     MOV     A,ED+01H
0B72 AE00        R     MOV     R6,ED
0B74 7802              MOV     R0,#02H
0B76         ?C0789:
0B76 CE                XCH     A,R6
0B77 C3                CLR     C
0B78 13                RRC     A
0B79 CE                XCH     A,R6
0B7A 13                RRC     A
0B7B D8F9              DJNZ    R0,?C0789
0B7D FF                MOV     R7,A
0B7E 8FC6              MOV     EADRL,R7
                                           ; SOURCE LINE # 2213
0B80 75B901            MOV     ECON,#01H
                                           ; SOURCE LINE # 2214
0B83 7E00              MOV     R6,#00H
0B85 E500        R     MOV     A,ED+01H
0B87 5403              ANL     A,#03H
0B89 FF                MOV     R7,A
0B8A EF                MOV     A,R7
0B8B 4E                ORL     A,R6
0B8C 7004              JNZ     ?C0676
0B8E 7F01              MOV     R7,#01H
0B90 8002              SJMP    ?C0677
0B92         ?C0676:
0B92 7F00              MOV     R7,#00H
0B94         ?C0677:
0B94 E500        R     MOV     A,i1
0B96 C3                CLR     C
0B97 9500        R     SUBB    A,len_o
0B99 5004              JNC     ?C0678
0B9B 7E01              MOV     R6,#01H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 188 

0B9D 8002              SJMP    ?C0679
0B9F         ?C0678:
0B9F 7E00              MOV     R6,#00H
0BA1         ?C0679:
0BA1 EE                MOV     A,R6
0BA2 5F                ANL     A,R7
0BA3 FF                MOV     R7,A
0BA4 EF                MOV     A,R7
0BA5 6036              JZ      ?C0675
                                           ; SOURCE LINE # 2215
0BA7 AF00        R     MOV     R7,i1
0BA9 7400        R     MOV     A,#LOW zbuf+06H
0BAB 2F                ADD     A,R7
0BAC F582              MOV     DPL,A
0BAE E4                CLR     A
0BAF 3400        R     ADDC    A,#HIGH zbuf+06H
0BB1 F583              MOV     DPH,A
0BB3 E0                MOVX    A,@DPTR
0BB4 FF                MOV     R7,A
0BB5 8FBC              MOV     EDATA1,R7
0BB7 AF00        R     MOV     R7,i1
0BB9 7400        R     MOV     A,#LOW zbuf+06H
0BBB 2F                ADD     A,R7
0BBC F582              MOV     DPL,A
0BBE E4                CLR     A
0BBF 3400        R     ADDC    A,#HIGH zbuf+06H
0BC1 F583              MOV     DPH,A
0BC3 E0                MOVX    A,@DPTR
0BC4 FF                MOV     R7,A
0BC5 AE00        R     MOV     R6,i1
0BC7 7446              MOV     A,#LOW bufout+06H
0BC9 2E                ADD     A,R6
0BCA F582              MOV     DPL,A
0BCC E4                CLR     A
0BCD 3400              ADDC    A,#HIGH bufout+06H
0BCF F583              MOV     DPH,A
0BD1 EF                MOV     A,R7
0BD2 F0                MOVX    @DPTR,A
0BD3 0500        R     INC     ED+01H
0BD5 E500        R     MOV     A,ED+01H
0BD7 7002              JNZ     ?C0790
0BD9 0500        R     INC     ED
0BDB         ?C0790:
0BDB 0500        R     INC     i1
0BDD         ?C0675:
                                           ; SOURCE LINE # 2217
0BDD 7E00              MOV     R6,#00H
0BDF E500        R     MOV     A,ED+01H
0BE1 5403              ANL     A,#03H
0BE3 FF                MOV     R7,A
0BE4 EF                MOV     A,R7
0BE5 6401              XRL     A,#01H
0BE7 4E                ORL     A,R6
0BE8 7004              JNZ     ?C0681
0BEA 7F01              MOV     R7,#01H
0BEC 8002              SJMP    ?C0682
0BEE         ?C0681:
0BEE 7F00              MOV     R7,#00H
0BF0         ?C0682:
0BF0 E500        R     MOV     A,i1
0BF2 C3                CLR     C
0BF3 9500        R     SUBB    A,len_o
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 189 

0BF5 5004              JNC     ?C0683
0BF7 7E01              MOV     R6,#01H
0BF9 8002              SJMP    ?C0684
0BFB         ?C0683:
0BFB 7E00              MOV     R6,#00H
0BFD         ?C0684:
0BFD EE                MOV     A,R6
0BFE 5F                ANL     A,R7
0BFF FF                MOV     R7,A
0C00 EF                MOV     A,R7
0C01 6036              JZ      ?C0680
                                           ; SOURCE LINE # 2218
0C03 AF00        R     MOV     R7,i1
0C05 7400        R     MOV     A,#LOW zbuf+06H
0C07 2F                ADD     A,R7
0C08 F582              MOV     DPL,A
0C0A E4                CLR     A
0C0B 3400        R     ADDC    A,#HIGH zbuf+06H
0C0D F583              MOV     DPH,A
0C0F E0                MOVX    A,@DPTR
0C10 FF                MOV     R7,A
0C11 8FBD              MOV     EDATA2,R7
0C13 AF00        R     MOV     R7,i1
0C15 7400        R     MOV     A,#LOW zbuf+06H
0C17 2F                ADD     A,R7
0C18 F582              MOV     DPL,A
0C1A E4                CLR     A
0C1B 3400        R     ADDC    A,#HIGH zbuf+06H
0C1D F583              MOV     DPH,A
0C1F E0                MOVX    A,@DPTR
0C20 FF                MOV     R7,A
0C21 AE00        R     MOV     R6,i1
0C23 7446              MOV     A,#LOW bufout+06H
0C25 2E                ADD     A,R6
0C26 F582              MOV     DPL,A
0C28 E4                CLR     A
0C29 3400              ADDC    A,#HIGH bufout+06H
0C2B F583              MOV     DPH,A
0C2D EF                MOV     A,R7
0C2E F0                MOVX    @DPTR,A
0C2F 0500        R     INC     ED+01H
0C31 E500        R     MOV     A,ED+01H
0C33 7002              JNZ     ?C0791
0C35 0500        R     INC     ED
0C37         ?C0791:
0C37 0500        R     INC     i1
0C39         ?C0680:
                                           ; SOURCE LINE # 2220
0C39 7E00              MOV     R6,#00H
0C3B E500        R     MOV     A,ED+01H
0C3D 5403              ANL     A,#03H
0C3F FF                MOV     R7,A
0C40 EF                MOV     A,R7
0C41 6402              XRL     A,#02H
0C43 4E                ORL     A,R6
0C44 7004              JNZ     ?C0686
0C46 7F01              MOV     R7,#01H
0C48 8002              SJMP    ?C0687
0C4A         ?C0686:
0C4A 7F00              MOV     R7,#00H
0C4C         ?C0687:
0C4C E500        R     MOV     A,i1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 190 

0C4E C3                CLR     C
0C4F 9500        R     SUBB    A,len_o
0C51 5004              JNC     ?C0688
0C53 7E01              MOV     R6,#01H
0C55 8002              SJMP    ?C0689
0C57         ?C0688:
0C57 7E00              MOV     R6,#00H
0C59         ?C0689:
0C59 EE                MOV     A,R6
0C5A 5F                ANL     A,R7
0C5B FF                MOV     R7,A
0C5C EF                MOV     A,R7
0C5D 6036              JZ      ?C0685
                                           ; SOURCE LINE # 2221
0C5F AF00        R     MOV     R7,i1
0C61 7400        R     MOV     A,#LOW zbuf+06H
0C63 2F                ADD     A,R7
0C64 F582              MOV     DPL,A
0C66 E4                CLR     A
0C67 3400        R     ADDC    A,#HIGH zbuf+06H
0C69 F583              MOV     DPH,A
0C6B E0                MOVX    A,@DPTR
0C6C FF                MOV     R7,A
0C6D 8FBE              MOV     EDATA3,R7
0C6F AF00        R     MOV     R7,i1
0C71 7400        R     MOV     A,#LOW zbuf+06H
0C73 2F                ADD     A,R7
0C74 F582              MOV     DPL,A
0C76 E4                CLR     A
0C77 3400        R     ADDC    A,#HIGH zbuf+06H
0C79 F583              MOV     DPH,A
0C7B E0                MOVX    A,@DPTR
0C7C FF                MOV     R7,A
0C7D AE00        R     MOV     R6,i1
0C7F 7446              MOV     A,#LOW bufout+06H
0C81 2E                ADD     A,R6
0C82 F582              MOV     DPL,A
0C84 E4                CLR     A
0C85 3400              ADDC    A,#HIGH bufout+06H
0C87 F583              MOV     DPH,A
0C89 EF                MOV     A,R7
0C8A F0                MOVX    @DPTR,A
0C8B 0500        R     INC     ED+01H
0C8D E500        R     MOV     A,ED+01H
0C8F 7002              JNZ     ?C0792
0C91 0500        R     INC     ED
0C93         ?C0792:
0C93 0500        R     INC     i1
0C95         ?C0685:
                                           ; SOURCE LINE # 2223
0C95 7E00              MOV     R6,#00H
0C97 E500        R     MOV     A,ED+01H
0C99 5403              ANL     A,#03H
0C9B FF                MOV     R7,A
0C9C EF                MOV     A,R7
0C9D 6403              XRL     A,#03H
0C9F 4E                ORL     A,R6
0CA0 7004              JNZ     ?C0691
0CA2 7F01              MOV     R7,#01H
0CA4 8002              SJMP    ?C0692
0CA6         ?C0691:
0CA6 7F00              MOV     R7,#00H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 191 

0CA8         ?C0692:
0CA8 E500        R     MOV     A,i1
0CAA C3                CLR     C
0CAB 9500        R     SUBB    A,len_o
0CAD 5004              JNC     ?C0693
0CAF 7E01              MOV     R6,#01H
0CB1 8002              SJMP    ?C0694
0CB3         ?C0693:
0CB3 7E00              MOV     R6,#00H
0CB5         ?C0694:
0CB5 EE                MOV     A,R6
0CB6 5F                ANL     A,R7
0CB7 FF                MOV     R7,A
0CB8 EF                MOV     A,R7
0CB9 6036              JZ      ?C0690
                                           ; SOURCE LINE # 2224
0CBB AF00        R     MOV     R7,i1
0CBD 7400        R     MOV     A,#LOW zbuf+06H
0CBF 2F                ADD     A,R7
0CC0 F582              MOV     DPL,A
0CC2 E4                CLR     A
0CC3 3400        R     ADDC    A,#HIGH zbuf+06H
0CC5 F583              MOV     DPH,A
0CC7 E0                MOVX    A,@DPTR
0CC8 FF                MOV     R7,A
0CC9 8FBF              MOV     EDATA4,R7
0CCB AF00        R     MOV     R7,i1
0CCD 7400        R     MOV     A,#LOW zbuf+06H
0CCF 2F                ADD     A,R7
0CD0 F582              MOV     DPL,A
0CD2 E4                CLR     A
0CD3 3400        R     ADDC    A,#HIGH zbuf+06H
0CD5 F583              MOV     DPH,A
0CD7 E0                MOVX    A,@DPTR
0CD8 FF                MOV     R7,A
0CD9 AE00        R     MOV     R6,i1
0CDB 7446              MOV     A,#LOW bufout+06H
0CDD 2E                ADD     A,R6
0CDE F582              MOV     DPL,A
0CE0 E4                CLR     A
0CE1 3400              ADDC    A,#HIGH bufout+06H
0CE3 F583              MOV     DPH,A
0CE5 EF                MOV     A,R7
0CE6 F0                MOVX    @DPTR,A
0CE7 0500        R     INC     ED+01H
0CE9 E500        R     MOV     A,ED+01H
0CEB 7002              JNZ     ?C0793
0CED 0500        R     INC     ED
0CEF         ?C0793:
0CEF 0500        R     INC     i1
0CF1         ?C0690:
                                           ; SOURCE LINE # 2225
0CF1 1500        R     DEC     i1
                                           ; SOURCE LINE # 2226
0CF3 C28E              CLR     TR1
                                           ; SOURCE LINE # 2227
0CF5 75B905            MOV     ECON,#05H
                                           ; SOURCE LINE # 2228
0CF8 D28E              SETB    TR1
                                           ; SOURCE LINE # 2229
0CFA C28E              CLR     TR1
                                           ; SOURCE LINE # 2230
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 192 

0CFC 75B902            MOV     ECON,#02H
                                           ; SOURCE LINE # 2231
0CFF D28E              SETB    TR1
                                           ; SOURCE LINE # 2233
0D01         ?C0674:
0D01 0500        R     INC     i1
0D03 020000      R     LJMP    ?C0672
0D06         ?C0673:
                                           ; SOURCE LINE # 2235
0D06 75B904            MOV     ECON,#04H
                                           ; SOURCE LINE # 2236
0D09 E5B9              MOV     A,ECON
0D0B 7025              JNZ     ?C0695
                                           ; SOURCE LINE # 2237
                                           ; SOURCE LINE # 2238
0D0D 7406              MOV     A,#06H
0D0F 2500        R     ADD     A,len_o
0D11 F500        R     MOV     len_o,A
                                           ; SOURCE LINE # 2239
0D13 7800        R     MOV     R0,#LOW TM_LINE
0D15 E6                MOV     A,@R0
0D16 FF                MOV     R7,A
0D17 7800        R     MOV     R0,#LOW TM_LINE
0D19 E6                MOV     A,@R0
0D1A FE                MOV     R6,A
0D1B EE                MOV     A,R6
0D1C 2F                ADD     A,R7
0D1D FF                MOV     R7,A
0D1E 7800        R     MOV     R0,#LOW tmo
0D20 EF                MOV     A,R7
0D21 F6                MOV     @R0,A
                                           ; SOURCE LINE # 2240
0D22 D2B6              SETB    WR
                                           ; SOURCE LINE # 2241
0D24 750014      R     MOV     st_ser,#014H
                                           ; SOURCE LINE # 2242
0D27 E500        R     MOV     A,len_o
0D29 04                INC     A
0D2A FF                MOV     R7,A
0D2B 900042            MOV     DPTR,#bufout+02H
0D2E EF                MOV     A,R7
0D2F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2243
0D30 8003              SJMP    kon1
0D32         ?C0695:
                                           ; SOURCE LINE # 2245
0D32 75000A      R     MOV     st_ser,#0AH
0D35         ?C0696:
                                           ; SOURCE LINE # 2246
0D35         ?C0668:
                                           ; SOURCE LINE # 2247
0D35         kon1:
                                           ; SOURCE LINE # 2248
0D35 C200        R     CLR     Eprom_zap
                                           ; SOURCE LINE # 2249
0D37 D2AC              SETB    ES
                                           ; SOURCE LINE # 2251
0D39         ?C0639:
                                           ; SOURCE LINE # 2255
0D39 900000      R     MOV     DPTR,#par
0D3C E0                MOVX    A,@DPTR
0D3D FF                MOV     R7,A
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 193 

0D3E EF                MOV     A,R7
0D3F 640B              XRL     A,#0BH
0D41 6003              JZ      $ + 5H
0D43 020000      R     LJMP    ?C0710
                                           ; SOURCE LINE # 2256
                                           ; SOURCE LINE # 2258
0D46 900000      R     MOV     DPTR,#par
0D49 E4                CLR     A
0D4A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2260
0D4B E5A4              MOV     A,MIN
0D4D 75F00A            MOV     B,#0AH
0D50 84                DIV     AB
0D51 AFF0              MOV     R7,B
0D53 EF                MOV     A,R7
0D54 700F              JNZ     ?C0698
                                           ; SOURCE LINE # 2261
                                           ; SOURCE LINE # 2262
0D56 900000      R     MOV     DPTR,#fl_kal
0D59 E0                MOVX    A,@DPTR
0D5A FF                MOV     R7,A
0D5B EF                MOV     A,R7
0D5C B41E06            CJNE    A,#01EH,?C0698
                                           ; SOURCE LINE # 2263
0D5F 900000      R     MOV     DPTR,#fl_kal
0D62 740A              MOV     A,#0AH
0D64 F0                MOVX    @DPTR,A
0D65         ?C0699:
                                           ; SOURCE LINE # 2264
0D65         ?C0698:
                                           ; SOURCE LINE # 2265
0D65 E5A4              MOV     A,MIN
0D67 75F00A            MOV     B,#0AH
0D6A 84                DIV     AB
0D6B AFF0              MOV     R7,B
0D6D EF                MOV     A,R7
0D6E B4090E            CJNE    A,#09H,?C0700
                                           ; SOURCE LINE # 2266
                                           ; SOURCE LINE # 2267
0D71 900000      R     MOV     DPTR,#fl_kal
0D74 E0                MOVX    A,@DPTR
0D75 FF                MOV     R7,A
0D76 EF                MOV     A,R7
0D77 7006              JNZ     ?C0700
                                           ; SOURCE LINE # 2268
0D79 900000      R     MOV     DPTR,#fl_kal
0D7C 741E              MOV     A,#01EH
0D7E F0                MOVX    @DPTR,A
0D7F         ?C0701:
                                           ; SOURCE LINE # 2269
0D7F         ?C0700:
                                           ; SOURCE LINE # 2287
0D7F C2AC              CLR     ES
                                           ; SOURCE LINE # 2288
0D81 120000      E     LCALL   lbuf_cop
                                           ; SOURCE LINE # 2289
0D84 D200        R     SETB    fl_buf
                                           ; SOURCE LINE # 2290
0D86 D2AC              SETB    ES
                                           ; SOURCE LINE # 2297
0D88 900000      R     MOV     DPTR,#chp
0D8B E0                MOVX    A,@DPTR
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 194 

0D8C 04                INC     A
0D8D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2301
0D8E 900000      R     MOV     DPTR,#chp
0D91 E0                MOVX    A,@DPTR
0D92 FF                MOV     R7,A
0D93 EF                MOV     A,R7
0D94 D3                SETB    C
0D95 9400              SUBB    A,#00H
0D97 5003              JNC     $ + 5H
0D99 020000      R     LJMP    ?C0702
                                           ; SOURCE LINE # 2302
0D9C 900000      R     MOV     DPTR,#chp
0D9F 7401              MOV     A,#01H
0DA1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2305
0DA2 E500        R     MOV     A,st_ser
0DA4 6405              XRL     A,#05H
0DA6 6003              JZ      $ + 5H
0DA8 020000      R     LJMP    ?C0702
                                           ; SOURCE LINE # 2309
0DAB 30007B      R     JNB     aktiv,?C0702
                                           ; SOURCE LINE # 2310
                                           ; SOURCE LINE # 2311
0DAE 750028      R     MOV     st_ser,#028H
                                           ; SOURCE LINE # 2312
0DB1 D2B6              SETB    WR
                                           ; SOURCE LINE # 2313
0DB3 750002      R     MOV     cmd,#02H
                                           ; SOURCE LINE # 2314
0DB6 75001A      R     MOV     len_o,#01AH
                                           ; SOURCE LINE # 2315
0DB9 7800        R     MOV     R0,#LOW i
0DBB 7600              MOV     @R0,#00H
0DBD         ?C0705:
0DBD 7800        R     MOV     R0,#LOW i
0DBF E6                MOV     A,@R0
0DC0 FF                MOV     R7,A
0DC1 EF                MOV     A,R7
0DC2 C3                CLR     C
0DC3 9500        R     SUBB    A,len_o
0DC5 5025              JNC     ?C0706
                                           ; SOURCE LINE # 2316
0DC7 7800        R     MOV     R0,#LOW i
0DC9 E6                MOV     A,@R0
0DCA FF                MOV     R7,A
0DCB 74C0              MOV     A,#LOW lbuf_dn
0DCD 2F                ADD     A,R7
0DCE F582              MOV     DPL,A
0DD0 E4                CLR     A
0DD1 3400              ADDC    A,#HIGH lbuf_dn
0DD3 F583              MOV     DPH,A
0DD5 E0                MOVX    A,@DPTR
0DD6 FF                MOV     R7,A
0DD7 7800        R     MOV     R0,#LOW i
0DD9 E6                MOV     A,@R0
0DDA FE                MOV     R6,A
0DDB 7446              MOV     A,#LOW bufout+06H
0DDD 2E                ADD     A,R6
0DDE F582              MOV     DPL,A
0DE0 E4                CLR     A
0DE1 3400              ADDC    A,#HIGH bufout+06H
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 195 

0DE3 F583              MOV     DPH,A
0DE5 EF                MOV     A,R7
0DE6 F0                MOVX    @DPTR,A
0DE7         ?C0707:
0DE7 7800        R     MOV     R0,#LOW i
0DE9 06                INC     @R0
0DEA 80D1              SJMP    ?C0705
0DEC         ?C0706:
                                           ; SOURCE LINE # 2317
0DEC 900000      R     MOV     DPTR,#zbuf
0DEF 747E              MOV     A,#07EH
0DF1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2318
0DF2 E500        R     MOV     A,lineadd
0DF4 4480              ORL     A,#080H
0DF6 FF                MOV     R7,A
0DF7 900000      R     MOV     DPTR,#zbuf+01H
0DFA EF                MOV     A,R7
0DFB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2320
0DFC 900000      R     MOV     DPTR,#zbuf+02H
0DFF 7407              MOV     A,#07H
0E01 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2321
0E02 900000      R     MOV     DPTR,#zbuf+03H
0E05 7402              MOV     A,#02H
0E07 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2322
0E08 900000      R     MOV     DPTR,#zbuf+04H
0E0B E4                CLR     A
0E0C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2323
0E0D 900000      R     MOV     DPTR,#zbuf+05H
0E10 E500        R     MOV     A,len_o
0E12 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2325
0E13 7406              MOV     A,#06H
0E15 2500        R     ADD     A,len_o
0E17 F500        R     MOV     len_o,A
                                           ; SOURCE LINE # 2328
0E19 E500        R     MOV     A,len_o
0E1B 04                INC     A
0E1C FF                MOV     R7,A
0E1D 900042            MOV     DPTR,#bufout+02H
0E20 EF                MOV     A,R7
0E21 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 2329
0E22 7800        R     MOV     R0,#LOW nro
0E24 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 2330
0E26 75997E            MOV     SBUF,#07EH
                                           ; SOURCE LINE # 2331
0E29         ?C0704:
                                           ; SOURCE LINE # 2333
0E29         ?C0703:
                                           ; SOURCE LINE # 2334
0E29         ?C0702:
                                           ; SOURCE LINE # 2339
0E29 900000      R     MOV     DPTR,#kol_cik
0E2C E0                MOVX    A,@DPTR
0E2D FF                MOV     R7,A
0E2E EF                MOV     A,R7
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 196 

0E2F D3                SETB    C
0E30 9432              SUBB    A,#032H
0E32 5006              JNC     ?C0708
                                           ; SOURCE LINE # 2340
0E34 900000      R     MOV     DPTR,#kol_cik
0E37 E0                MOVX    A,@DPTR
0E38 04                INC     A
0E39 F0                MOVX    @DPTR,A
0E3A         ?C0708:
                                           ; SOURCE LINE # 2342
0E3A 900000      R     MOV     DPTR,#kol_cik
0E3D E0                MOVX    A,@DPTR
0E3E FF                MOV     R7,A
0E3F EF                MOV     A,R7
0E40 D3                SETB    C
0E41 9432              SUBB    A,#032H
0E43 4002              JC      ?C0710
                                           ; SOURCE LINE # 2343
0E45 D200        R     SETB    fl_sv
                                           ; SOURCE LINE # 2345
0E47         ?C0709:
                                           ; SOURCE LINE # 2346
0E47         ?C0697:
0E47         ?C0710:
                                           ; SOURCE LINE # 2350
0E47 E500        R     MOV     A,zad
0E49 7003              JNZ     $ + 5H
0E4B 020000      R     LJMP    zz1
                                           ; SOURCE LINE # 2351
                                           ; SOURCE LINE # 2352
0E4E 80F7              SJMP    ?C0710
0E50         ?C0711:
                                           ; SOURCE LINE # 2355
0E50 020000      R     LJMP    zz1
                                           ; SOURCE LINE # 2356
0E53         ?C0712:
0E53 D0D0              POP     PSW
0E55 22                RET     
             ; FUNCTION main (END)

C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 197 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


fl_rgr . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0000H  1
P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
TAB_ADC. . . . . . . . . . . . . . . .  EXTERN   CODE   ARRAY    -----  72
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
FL_BLOK_EPROM. . . . . . . . . . . . .  PUBLIC   DATA   BIT      0001H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
str_rele_prin. . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0000H  6
str_rele_prin. . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  6
  linaddr. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  off. . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  ustavka1 . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
  ustavka2 . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0004H  2
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
ADCSTAT. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D8H  1
ep2. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0002H  1
fl_r11 . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0003H  1
mi1. . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0006H  2
ED . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    0008H  2
fl_r22 . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0004H  1
paket_BO . . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0008H  5
kanal. . . . . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00A6H  14
CNT_SEC_V1 . . . . . . . . . . . . . .  PUBLIC   IDATA  U_INT    0000H  2
kol_c. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    000AH  2
CNT_SEC_V2 . . . . . . . . . . . . . .  PUBLIC   IDATA  U_INT    0002H  2
fl_ds. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0005H  1
r_crc. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   000CH  1
ADC0CON2 . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E6H  1
EADC . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AEH  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
copy_p . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    000DH  2
len_o. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   000FH  1
DL . . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   000DH  1
xbufin . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0080H  34
BUF_T. . . . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  60
POR_R1_OFF . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   000EH  1
EDATA1 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BCH  1
REL1_ON. . . . . . . . . . . . . . . .  EXTERN   XDATA  U_INT    -----  2
POR_R2_OFF . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   000FH  1
EDATA2 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BDH  1
CNT_SEC_DL . . . . . . . . . . . . . .  PUBLIC   IDATA  U_LONG   0004H  4
REL2_ON. . . . . . . . . . . . . . . .  EXTERN   XDATA  U_INT    -----  2
st_ser . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0010H  1
EDATA3 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BEH  1
new_zn . . . . . . . . . . . . . . . .  EXTERN   DATA   U_INT    -----  2
d1 . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0006H  1
EDATA4 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00BFH  1
WKs. . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0010H  1
d2 . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0007H  1
RD . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B7H  1
paket. . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0011H  1
ES . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ACH  1
SF . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D4H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
bufout . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0040H  34
MM . . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  ARRAY    0008H  7
i1 . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0011H  1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 198 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


j1 . . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   000FH  1
RI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0098H  1
j2 . . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0010H  1
fl_sv. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0008H  1
TI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0099H  1
cop_imp1 . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    0012H  2
cop_imp2 . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    0014H  2
fcnt_100 . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0009H  1
RDY0 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00DFH  1
I2CCON . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
priem. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0016H  1
aktiv. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000AH  1
CNT_SEC. . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_INT    0011H  2
timer1int. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
v_rgr. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000BH  1
PS . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BCH  1
SP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0081H  1
TAB_NO_LINE_32 . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0084H  34
ECON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B9H  1
main . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  off. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  j4 . . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0006H  1
  i1 . . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0007H  1
  fl_kal . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  kol_cik. . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
  zz1. . . . . . . . . . . . . . . . .  LABEL    CODE   LABEL    -----  -----
  kon1 . . . . . . . . . . . . . . . .  LABEL    CODE   LABEL    -----  -----
BUF_vr . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0012H  28
TAB_NO_LINE_25 . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0000H  34
status . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0017H  1
crco . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_INT    0013H  2
WR . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B6H  1
TAB_NO_LINE_36 . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0022H  64
FL_BLOK_EEPR . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000CH  1
TAB_NO_LINE_28 . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    0062H  34
TM_LINE. . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0015H  1
lbuf . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0000H  28
BUF_PIT. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    00F8H  7
fcnt . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000DH  1
SBUF . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0099H  1
bufcht1. . . . . . . . . . . . . . . .  PUBLIC   DATA   ARRAY    0018H  4
Eprom_ch . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000EH  1
Eprom_zap. . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      000FH  1
WK_1 . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   002EH  1
napr . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0010H  1
setup. . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
cmd. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   001CH  1
crc. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    001DH  2
mi11 . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   002FH  1
zbuf . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0030H  34
b_err_pit. . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0052H  1
chp. . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0053H  1
TABX_CH_A. . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  16
  NAME_PAR . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  R_IZM. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 199 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  Frm_Dat. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  LA_TAB . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  NA_P1. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0004H  1
  NA_P2. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0005H  1
  NA_P3. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0006H  1
  NA_P5. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0007H  1
  NA_P4. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0008H  1
  N_RAZ. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0009H  1
  KF_CRD . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000AH  1
  KF_WIND. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000BH  1
  KF_KORZ. . . . . . . . . . . . . . .  MEMBER   -----  U_INT    000CH  2
  KF_KORZ1 . . . . . . . . . . . . . .  MEMBER   -----  U_INT    000EH  2
kmd. . . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  t. . . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0005H  1
  tmp_rw . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
b_err_cl . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0054H  1
HOUR . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A5H  1
copy_p1. . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    001FH  2
zad. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0021H  1
ADC0H. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00DBH  1
cmr. . . . . . . . . . . . . . . . . .  EXTERN   IDATA  U_LONG   -----  4
par. . . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0055H  1
svet . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A4H  1
WDWR . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C0H  1
str_paket_BO . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0056H  5
str_paket_BO . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  5
  linaddr_BO . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  off_rele1. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  off_rele2. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  off_dac. . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0003H  2
d11. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0011H  1
ADC0M. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00DAH  1
rele_prin. . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    005BH  30
rasx1_t. . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_LONG   0016H  4
Str_CH_A . . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  208
rasx2_t. . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_LONG   001AH  4
_task_3. . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
d22. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0012H  1
CMRX1_K1 . . . . . . . . . . . . . . .  EXTERN   IDATA  U_LONG   -----  4
Str_TDAT . . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  40
CMRX1_K2 . . . . . . . . . . . . . . .  EXTERN   IDATA  U_LONG   -----  4
ET1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ABH  1
PLLCON . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D7H  1
TF1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008FH  1
TH1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008DH  1
SPICON . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F8H  1
lbuf_cop . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
nro. . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   001EH  1
FCNT_SEC_V1. . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0013H  1
REL1_OFF . . . . . . . . . . . . . . .  EXTERN   XDATA  U_INT    -----  2
tmo. . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   001FH  1
FCNT_SEC_V2. . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0014H  1
fl_tadc. . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0015H  1
TL1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008BH  1
fl_m1. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0016H  1
REL2_OFF . . . . . . . . . . . . . . .  EXTERN   XDATA  U_INT    -----  2
tmp. . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0020H  1
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 200 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


rez. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0017H  1
fl_m2. . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0018H  1
POR_R1_ON. . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0079H  1
BUF_FP . . . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  60
POR_R2_ON. . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   007AH  1
stat_byte. . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   007BH  1
lineadd. . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0022H  1
int_adc. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  tmadc. . . . . . . . . . . . . . . .  STATIC   DATA   U_INT    0000H  2
BUF_FP_100_0 . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    007CH  2
MDE. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00EEH  1
mi . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_INT    0023H  2
TR1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008EH  1
kn . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0025H  1
BUF_MN . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    00DCH  28
MDI. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ECH  1
RELE1. . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0083H  1
SEC. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A3H  1
setup_ADC. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
b_err_p. . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   007EH  1
copy_dol . . . . . . . . . . . . . . .  EXTERN   XDATA  U_LONG   -----  4
lbuf_dn. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    00C0H  28
MCO. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00EDH  1
MDO. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00EFH  1
nr . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0026H  1
DAC_PRIN . . . . . . . . . . . . . . .  EXTERN   DATA   INT      -----  2
MIN. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A4H  1
EADRH. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C7H  1
KOL. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0027H  1
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
cnt_dol. . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_INT    0021H  2
i. . . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0023H  1
j. . . . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0024H  1
EADRL. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C6H  1
TABX_DAT . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  2
  NAME_PAR . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  ADR_RZ . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
SPH. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B7H  1
Crc16Table . . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00B4H  512
WDS. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C2H  1
ADCMODE. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D1H  1
VER_PR . . . . . . . . . . . . . . . .  PUBLIC   CODE   U_INT    02B4H  2
Len_p. . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0028H  1
OGR_UR . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    007FH  2
fl_buf . . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      0019H  1
rasx1. . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_LONG   0025H  4
rasx2. . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_LONG   0029H  4
fl_rest. . . . . . . . . . . . . . . .  PUBLIC   DATA   BIT      001AH  1
nas1 . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   0029H  1
nas2 . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   002AH  1
CFG848 . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00AFH  1
ob_par . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0081H  2
ser_int. . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  tmpbait. . . . . . . . . . . . . . .  STATIC   DATA   INT      0002H  2
  bRELE. . . . . . . . . . . . . . . .  AUTO     DATA   BIT      0000H  1
  temp_pr_rel. . . . . . . . . . . . .  AUTO     XDATA  INT      0000H  2
  temp_pr_rel. . . . . . . . . . . . .  AUTO     XDATA  INT      0000H  2
C51 COMPILER V9.00   MAIN_BKCD                                                             05/21/2013 15:05:03 PAGE 201 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  temp_pr_rel. . . . . . . . . . . . .  AUTO     XDATA  INT      0000H  2
  temp_pr_rel. . . . . . . . . . . . .  AUTO     XDATA  INT      0000H  2
  temp_pr_rel. . . . . . . . . . . . .  AUTO     XDATA  INT      0000H  2
  i. . . . . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0004H  1
  kon. . . . . . . . . . . . . . . . .  LABEL    CODE   LABEL    -----  -----
H1 . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_LONG   002BH  4
fcnt_k . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_INT    0083H  2
N_K. . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_CHAR   002FH  1
H2 . . . . . . . . . . . . . . . . . .  PUBLIC   DATA   U_LONG   0030H  4
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
lineadd_dop. . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   002DH  1
int0 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B2H  1
WDCON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
tm_kan . . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0085H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =  11540    ----
   CONSTANT SIZE    =    694    ----
   XDATA SIZE       =    140    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     52    ----
   IDATA SIZE       =     46    ----
   BIT SIZE         =     28    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
