
21.05.2013
надо бы добавить параметр с состоянием реле
старший байт - реле 1
младший байт - реле 2
номер параметра выбираем 0х10

таким образом имеем 
существующие дополнительные параметры в строке описания выдачи в сети на странице 7:

0x7F    час минуты секунды сотни_секунд
0х10    состояние_реле1 состояние_реле2
0x20    лопатка - похоже на рассчет изменения расхода рассчитывающийся и запоминающийся в БКСД
0x30    скорость тальблока
0x40    экран и кнопки пульта
0x50    нагрузка
0x60    момент трения
0xCC    статус-байт
0xX1    только формат хода
0xX2    --
0xX3    формат основного параметра и расхода
0xX4    формат расчетного параметра	  и суммарнного рассхода
0xX5    рассчетный параметр являющийся суммой основного
0xX7    канал два по режиму 84
0xX9    прибавление объема по ходам насоса


новое в бксд для сгт с нашей программой у сгт газпром:

при чистом епроме или отсутствии адреса откликается на адрес 1

1. на 3х бксд испольхуется аналоговый выход с цапа:
    веса (по двум датчикам по "или")
    давления
    сумм ходы насоса
    
    Также для них используется калибровка канала цапа
    Входными значениями для таблицы калибровки цапа по весу и давлению являются значения датчиков
    Входными значениями для таблицы калибровки цапа по сумм ходам являются принятые из пакета для блока отображения 
    (вариант 2 - суммировать значение двух каналов ходов делить на 2 и выдавать на калибровку цапа)
    
  
    
2.  блокировки по весу давлению  тальблоку - обычные
    блокировка по газам - принимается значение из пакета для блока отображения
    
    
    
соответственно должна быть настройка этого дела:

lineadd_dop - адрес БО для поиска значений для цапа и включения блокировок

настройка реагирования на БО располагается на 3 странице епрома:
ячейка 0300 - адрес БО для реагирования
ячейка 0310 - тип устройства (1- реле 1; 2- реле2; 3 - цап)
ячейка 0320 - смещение в пакете для выбора значения соответствующего типа устройства

если в ячейке NA_P5 канала цапа установлено значение 0xCC, то на калибровку канала цап подается принятое от блока отображения значение

реле после настройки на принятие от БО срабатывают как только принят пакет, при этом обычная настройка реле должна быть затерта на 0xFF  


page 3
- <page>
  <line>8affffffffffffffffffffffffffffff</line> 
  <line>0100ffff0181200100ffffffffffffff</line> 
  <line>0210ffff0182200100ffffffffffffff</line> 
  <line>cc20ffff0281300200ffffffffffffff</line> 
  <line>ffffffff0282300200ffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  <line>ffffffffffffffffffffffffffffffff</line> 
  </page>



дополнения:

суммирование ходов в бксд
прием параметра из пвкета для БО сравнение его с уставкой и включение реле если превышает



